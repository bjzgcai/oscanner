{
  "sha": "83ef7a4dd0f647a1d068e941e0bb006342a9942f",
  "message": "Fix comment positioning bug on page refresh\n\nRoot cause: When page loads, textarea ref callbacks adjust heights\n(el.scrollHeight) which triggers browser reflow. The first ref triggers\nsetRefsReady, but subsequent textareas also adjust heights WITHOUT\ntriggering another state update. This means commentGroups useMemo\ncalculates positions using offsetTop values from BEFORE all height\nadjustments complete.\n\nSolution: Added useLayoutEffect that triggers one more setRefsReady\nincrement AFTER the initial refs are set. This forces commentGroups\nto recalculate positions after browser completes layout with all\nadjusted textarea heights.\n\nWhy useLayoutEffect: Runs synchronously after DOM mutations but before\npaint, ensuring positions are correct before user sees them.\n\nSymptom: Comments appeared \"a bit lower\" on refresh, fixed by clicking\n(which triggered re-render with correct layout values).\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>",
  "author": {
    "name": "lexicalmathical",
    "email": "lexicalmathical@gmail.com",
    "date": "2025-11-02T07:28:05Z"
  },
  "committer": {
    "name": "lexicalmathical",
    "email": "lexicalmathical@gmail.com",
    "date": "2025-11-02T07:28:05Z"
  },
  "stats": {
    "total": 13,
    "additions": 12,
    "deletions": 1
  },
  "files_count": 1,
  "parents": [
    "22492fb9d5f37ce2e08097ef921cfc77d8a3437a"
  ]
}