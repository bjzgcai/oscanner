*** MODIFIED: frontend/src/App.tsx (+105/-41) ***
@@ -20,9 +20,9 @@ import AboutView from './components/AboutView';
 import AgentDropdown from './components/AgentDropdown';
 import ChatWidgetUI from './components/ChatWidgetUI';
 import StateChooser from './components/StateChooser';
-import type { VoiceConfig } from './types/voice';
+import type { VoiceConfig, StateConfig } from './types/voice';
 import { getVoices, getMetaPrompt, getStateConfig } from './utils/voiceStorage';
-import { getDefaultVoices, chatWithVoice, importLocalData, generateDailyPicture, saveDailyPicture } from './api/voiceApi';
+import { getDefaultVoices, chatWithVoice, importLocalData } from './api/voiceApi';
 import { useMobile } from './utils/mobileDetect';
 import { CommentGroupCard } from './components/CommentCard';
 import { findNormalizedPhrase } from './utils/textNormalize';
@@ -260,6 +260,7 @@ export default function App() {
 
   // @@@ Auth screen state
   const [authScreen, setAuthScreen] = useState<'login' | 'register'>('login');
+  const [guestMode, setGuestMode] = useState(false);
   const [showMigrationDialog, setShowMigrationDialog] = useState(false);
   const [isMigrating, setIsMigrating] = useState(false);
 
@@ -289,10 +290,8 @@ export default function App() {
   // @@@ Warning dialog state
   const [showWarning, setShowWarning] = useState(false);
 
-  // @@@ State chooser
-  const [selectedState, setSelectedState] = useState<string | null>(
-    () => localStorage.getItem('selected-state')
-  );
+  // @@@ State chooser (start with null, load from database or localStorage later)
+  const [selectedState, setSelectedState] = useState<string | null>(null);
   const [stateConfig, setStateConfig] = useState(() => getStateConfig());
 
   // @@@ Per-cell textarea refs for positioning and style calculations
@@ -442,7 +441,7 @@ export default function App() {
             if (prefs.voice_configs) {
               setVoiceConfigs(prefs.voice_configs);
             }
-            if (prefs.selected_state) {
+            if (prefs.selected_state !== undefined && prefs.selected_state !== null) {
               setSelectedState(prefs.selected_state);
             }
           } catch (err) {
@@ -473,6 +472,12 @@ export default function App() {
         } else {
           setState(engine.getState());
         }
+
+        // @@@ Load selectedState from localStorage for guest mode
+        const savedState = localStorage.getItem('selected-state');
+        if (savedState) {
+          setSelectedState(savedState);
+        }
       }
     };
 
@@ -817,11 +822,33 @@ export default function App() {
     setShowWarning(true);
   }, []);
 
-  const confirmStartFresh = useCallback(() => {
-    localStorage.removeItem('ink_memory_state');
-    localStorage.removeItem('selected-state');
+  const confirmStartFresh = useCallback(async () => {
+    if (isAuthenticated && engineRef.current) {
+      // For authenticated users: save empty state to database
+      const currentState = engineRef.current.getState();
+      const emptyState = {
+        cells: [{ id: Math.random().toString(36).slice(2), type: 'text', content: '' }],
+        commentors: [],
+        tasks: [],
+        weightPath: [],
+        overlappedPhrases: [],
+        sessionId: currentState.sessionId
+      };
+
+      try {
+        const { saveSession } = await import('./api/voiceApi');
+        await saveSession(emptyState.sessionId, emptyState);
+      } catch (error) {
+        console.error('Failed to clear session in database:', error);
+      }
+    } else {
+      // For guest users: clear localStorage
+      localStorage.removeItem('ink_memory_state');
+      localStorage.removeItem('selected-state');
+    }
+
     window.location.reload();
-  }, []);
+  }, [isAuthenticated]);
 
   const handleSaveToday = useCallback(() => {
     if (!state || !engineRef.current) return;
@@ -865,10 +892,43 @@ export default function App() {
     }
   }, []);
 
-  const handleStateChoose = useCallback((stateId: string) => {
+  const handleStateChoose = useCallback(async (stateId: string) => {
     setSelectedState(stateId);
-    localStorage.setItem('selected-state', stateId);
-  }, []);
+
+    // @@@ Save to database if authenticated, localStorage if guest
+    if (isAuthenticated) {
+      try {
+        const { savePreferences } = await import('./api/voiceApi');
+        await savePreferences({ selected_state: stateId });
+      } catch (error) {
+        console.error('Failed to save state to database:', error);
+      }
+    } else {
+      localStorage.setItem('selected-state', stateId);
+    }
+  }, [isAuthenticated]);
+
+  const handleVoiceConfigsSave = useCallback(async (data: {
+    voices: Record<string, VoiceConfig>;
+    metaPrompt: string;
+    stateConfig: StateConfig;
+  }) => {
+    setVoiceConfigs(data.voices);
+
+    // @@@ Save to database if authenticated
+    if (isAuthenticated) {
+      try {
+        const { savePreferences } = await import('./api/voiceApi');
+        await savePreferences({
+          voice_configs: data.voices,
+          meta_prompt: data.metaPrompt,
+          state_config: data.stateConfig
+        });
+      } catch (error) {
+        console.error('Failed to save preferences to database:', error);
+      }
+    }
+  }, [isAuthenticated]);
 
   // @@@ Insert @ character at the end of last text cell
   const handleInsertAgent = useCallback(() => {
@@ -918,17 +978,17 @@ export default function App() {
   const handleMigrateData = useCallback(async () => {
     setIsMigrating(true);
     try {
-      // Export all localStorage data
+      // Export all localStorage data (convert null to undefined)
       const migrationData = {
-        currentSession: localStorage.getItem('ink_memory_state'),
-        calendarEntries: localStorage.getItem('calendarEntries'),
-        dailyPictures: localStorage.getItem('dailyPictures'),
-        voiceCustomizations: localStorage.getItem('voice-configs'),
-        metaPrompt: localStorage.getItem('meta-prompt'),
-        stateConfig: localStorage.getItem('state-config'),
-        selectedState: localStorage.getItem('selected-state'),
-        analysisReports: localStorage.getItem('analysisReports'),
-        oldDocument: localStorage.getItem('document')
+        currentSession: localStorage.getItem('ink_memory_state') ?? undefined,
+        calendarEntries: localStorage.getItem('calendarEntries') ?? undefined,
+        dailyPictures: localStorage.getItem('dailyPictures') ?? undefined,
+        voiceCustomizations: localStorage.getItem('voice-configs') ?? undefined,
+        metaPrompt: localStorage.getItem('meta-prompt') ?? undefined,
+        stateConfig: localStorage.getItem('state-config') ?? undefined,
+        selectedState: localStorage.getItem('selected-state') ?? undefined,
+        analysisReports: localStorage.getItem('analysisReports') ?? undefined,
+        oldDocument: localStorage.getItem('document') ?? undefined
       };
 
       // Call backend migration endpoint
@@ -970,6 +1030,10 @@ export default function App() {
     // This is handled by the useEffect hook above
   }, []);
 
+  const handleContinueAsGuest = useCallback(() => {
+    setGuestMode(true);
+  }, []);
+
   // @@@ Comment interaction handlers
   const handleCommentStar = useCallback((commentId: string) => {
     if (!engineRef.current) return;
@@ -1257,8 +1321,8 @@ export default function App() {
     );
   }
 
-  // @@@ Show auth screen if not authenticated
-  if (!isAuthenticated) {
+  // @@@ Show auth screen if not authenticated and not in guest mode
+  if (!isAuthenticated && !guestMode) {
     return (
       <div style={{
         display: 'flex',
@@ -1272,6 +1336,7 @@ export default function App() {
           <LoginForm
             onSuccess={handleAuthSuccess}
             onSwitchToRegister={() => setAuthScreen('register')}
+            onContinueAsGuest={handleContinueAsGuest}
           />
         ) : (
           <RegisterForm
@@ -1786,24 +1851,23 @@ export default function App() {
         }}>
           <VoiceSettings
             defaultVoices={defaultVoiceConfigs}
-            onSave={setVoiceConfigs}
+            onSave={handleVoiceConfigsSave}
           />
         </div>
       )}
-      {currentView === 'timeline' && (
-        <div style={{
-          position: 'fixed',
-          top: 48,
-          left: 0,
-          right: 0,
-          bottom: 0,
-          background: '#f8f0e6',
-          display: 'flex',
-          overflow: 'hidden'
-        }}>
-          <CollectionsView />
-        </div>
-      )}
+      {/* @@@ Always render timeline to pre-load data and position scroll */}
+      <div style={{
+        position: 'fixed',
+        top: 48,
+        left: 0,
+        right: 0,
+        bottom: 0,
+        background: '#f8f0e6',
+        display: currentView === 'timeline' ? 'flex' : 'none',
+        overflow: 'hidden'
+      }}>
+        <CollectionsView isVisible={currentView === 'timeline'} />
+      </div>
       {currentView === 'analysis' && (
         <div style={{
           position: 'fixed',

*** MODIFIED: frontend/src/components/AnalysisView.tsx (+92/-26) ***
@@ -1,7 +1,8 @@
 import { useState, useEffect } from 'react';
 import { getCalendarData } from '../utils/calendarStorage';
-import { analyzeEchoes, analyzeTraits, analyzePatterns } from '../api/voiceApi';
+import { analyzeEchoes, analyzeTraits, analyzePatterns, saveAnalysisReport, getAnalysisReports } from '../api/voiceApi';
 import type { TextCell } from '../engine/EditorEngine';
+import { useAuth } from '../contexts/AuthContext';
 
 // @@@ Constants
 const MAX_SAVED_REPORTS = 10;
@@ -66,6 +67,7 @@ interface AnalysisReport {
 }
 
 export default function AnalysisView() {
+  const { isAuthenticated } = useAuth();
   const [allNotes, setAllNotes] = useState('');
   const [echoes, setEchoes] = useState<Echo[]>([]);
   const [traits, setTraits] = useState<Trait[]>([]);
@@ -117,27 +119,64 @@ export default function AnalysisView() {
       totalEntries: entryCount
     });
 
-    // @@@ Load saved reports history from localStorage
-    const savedReportsData = localStorage.getItem(LOCALSTORAGE_KEY);
-    if (savedReportsData) {
-      try {
-        const reports = JSON.parse(savedReportsData);
-        setSavedReports(reports);
-
-        // @@@ Load most recent report into state (defensive checks for legacy data)
-        if (reports.length > 0) {
-          const mostRecent = reports[0];
-          setEchoes(mostRecent.echoes || []);
-          setTraits(mostRecent.traits || []);
-          setPatterns(mostRecent.patterns || []);
+    // @@@ Load saved reports history from database if authenticated, localStorage if guest
+    const loadReports = async () => {
+      if (isAuthenticated) {
+        try {
+          const dbReports = await getAnalysisReports(MAX_SAVED_REPORTS);
+          // Convert database format to app format
+          const formattedReports = dbReports.map((r: any) => ({
+            id: r.id,
+            echoes: r.report_data?.echoes || [],
+            traits: r.report_data?.traits || [],
+            patterns: r.report_data?.patterns || [],
+            timestamp: new Date(r.created_at).getTime(),
+            stats: r.report_data?.stats || { days: 0, entries: 0, words: 0 }
+          }));
+          setSavedReports(formattedReports);
+
+          // Load most recent report into state
+          if (formattedReports.length > 0) {
+            const mostRecent = formattedReports[0];
+            setEchoes(mostRecent.echoes || []);
+            setTraits(mostRecent.traits || []);
+            setPatterns(mostRecent.patterns || []);
+          }
+        } catch (e) {
+          console.error('Failed to load reports from database:', e);
+        }
+      } else {
+        // Guest mode: load from localStorage
+        const savedReportsData = localStorage.getItem(LOCALSTORAGE_KEY);
+        if (savedReportsData) {
+          try {
+            const reports = JSON.parse(savedReportsData);
+            setSavedReports(reports);
+
+            // Load most recent report into state
+            if (reports.length > 0) {
+              const mostRecent = reports[0];
+              setEchoes(mostRecent.echoes || []);
+              setTraits(mostRecent.traits || []);
+              setPatterns(mostRecent.patterns || []);
+            }
+          } catch (e) {
+            console.error('Failed to load saved reports:', e);
+          }
         }
-      } catch (e) {
-        console.error('Failed to load saved reports:', e);
       }
-    }
-  }, []);
+    };
+
+    loadReports();
+  }, [isAuthenticated]);
 
   const handleAnalyzeAll = async () => {
+    // @@@ Block analysis for guests
+    if (!isAuthenticated) {
+      setError('Please log in to use reflections. This feature requires authentication.');
+      return;
+    }
+
     if (!allNotes.trim()) {
       setError('No notes found. Save some entries first.');
       return;
@@ -188,7 +227,7 @@ export default function AnalysisView() {
       )
     ]);
 
-    // @@@ Save report to localStorage history (prepend to array)
+    // @@@ Save report to database if authenticated, localStorage if guest
     const newReport: AnalysisReport = {
       id: Date.now(),
       echoes: echoesResult,
@@ -202,14 +241,41 @@ export default function AnalysisView() {
       }
     };
 
-    // Get existing reports and prepend new one
-    const updatedReports = [newReport, ...savedReports];
-
-    // Keep only last MAX_SAVED_REPORTS reports
-    const limitedReports = updatedReports.slice(0, MAX_SAVED_REPORTS);
+    if (isAuthenticated) {
+      try {
+        // Save to database
+        await saveAnalysisReport('full_analysis', {
+          echoes: echoesResult,
+          traits: traitsResult,
+          patterns: patternsResult,
+          stats: {
+            days: stats.totalDays,
+            entries: stats.totalEntries,
+            words: stats.totalWords
+          }
+        }, allNotes);
 
-    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(limitedReports));
-    setSavedReports(limitedReports);
+        // Reload reports from database
+        const dbReports = await getAnalysisReports(MAX_SAVED_REPORTS);
+        const formattedReports = dbReports.map((r: any) => ({
+          id: r.id,
+          echoes: r.report_data?.echoes || [],
+          traits: r.report_data?.traits || [],
+          patterns: r.report_data?.patterns || [],
+          timestamp: new Date(r.created_at).getTime(),
+          stats: r.report_data?.stats || { days: 0, entries: 0, words: 0 }
+        }));
+        setSavedReports(formattedReports);
+      } catch (error) {
+        console.error('Failed to save report to database:', error);
+      }
+    } else {
+      // Guest mode: save to localStorage
+      const updatedReports = [newReport, ...savedReports];
+      const limitedReports = updatedReports.slice(0, MAX_SAVED_REPORTS);
+      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(limitedReports));
+      setSavedReports(limitedReports);
+    }
 
     // @@@ Switch to report view after analysis completes
     setViewMode('report');

*** MODIFIED: frontend/src/components/Auth/LoginForm.tsx (+49/-1) ***
@@ -8,9 +8,10 @@ import { useAuth } from '../../contexts/AuthContext';
 interface LoginFormProps {
   onSuccess: () => void;
   onSwitchToRegister: () => void;
+  onContinueAsGuest: () => void;
 }
 
-export default function LoginForm({ onSuccess, onSwitchToRegister }: LoginFormProps) {
+export default function LoginForm({ onSuccess, onSwitchToRegister, onContinueAsGuest }: LoginFormProps) {
   const { login } = useAuth();
   const [email, setEmail] = useState('');
   const [password, setPassword] = useState('');
@@ -179,6 +180,53 @@ export default function LoginForm({ onSuccess, onSwitchToRegister }: LoginFormPr
           Register
         </button>
       </div>
+
+      <div style={{
+        marginTop: '24px',
+        paddingTop: '20px',
+        borderTop: '1px solid #e0d8cc',
+        textAlign: 'center'
+      }}>
+        <button
+          onClick={onContinueAsGuest}
+          disabled={isSubmitting}
+          style={{
+            width: '100%',
+            padding: '12px',
+            border: '1px solid #d0c4b0',
+            borderRadius: '6px',
+            backgroundColor: '#fff',
+            color: '#666',
+            fontSize: '15px',
+            fontWeight: 500,
+            cursor: isSubmitting ? 'not-allowed' : 'pointer',
+            fontFamily: "'Excalifont', 'Xiaolai', 'Georgia', serif",
+            transition: 'all 0.2s'
+          }}
+          onMouseEnter={(e) => {
+            if (!isSubmitting) {
+              e.currentTarget.style.backgroundColor = '#f8f0e6';
+              e.currentTarget.style.borderColor = '#999';
+            }
+          }}
+          onMouseLeave={(e) => {
+            if (!isSubmitting) {
+              e.currentTarget.style.backgroundColor = '#fff';
+              e.currentTarget.style.borderColor = '#d0c4b0';
+            }
+          }}
+        >
+          Continue as Guest
+        </button>
+        <div style={{
+          marginTop: '12px',
+          fontSize: '12px',
+          color: '#999',
+          fontStyle: 'italic'
+        }}>
+          Limited features: no image generation or reflections
+        </div>
+      </div>
     </div>
   );
 }

*** MODIFIED: frontend/src/components/CollectionsView.tsx (+54/-35) ***
@@ -1,4 +1,4 @@
-import { useState, useEffect, useRef } from 'react';
+import { useState, useEffect, useLayoutEffect, useRef } from 'react';
 import type { Commentor } from '../engine/EditorEngine';
 import { findNormalizedPhrase } from '../utils/textNormalize';
 import { useAuth } from '../contexts/AuthContext';
@@ -12,7 +12,7 @@ interface TimelineDay {
   daysOffset: number;
 }
 
-export default function CollectionsView() {
+export default function CollectionsView({ isVisible }: { isVisible: boolean }) {
   return (
     <div style={{
       width: '100%',
@@ -22,7 +22,7 @@ export default function CollectionsView() {
       background: '#f8f0e6',
       overflow: 'hidden'
     }}>
-      <TimelinePage />
+      <TimelinePage isVisible={isVisible} />
     </div>
   );
 }
@@ -212,7 +212,7 @@ async function getAllNotesFromSessions(isAuthenticated: boolean): Promise<string
 }
 
 // @@@ Timeline page - combines pictures and starred comments by date
-function TimelinePage() {
+function TimelinePage({ isVisible }: { isVisible: boolean }) {
   const { isAuthenticated } = useAuth();
   const [starredComments, setStarredComments] = useState<Commentor[]>([]);
   const [pictures, setPictures] = useState<Array<{ date: string; base64: string; prompt: string }>>([]);
@@ -223,15 +223,38 @@ function TimelinePage() {
 
   useEffect(() => {
     const loadData = async () => {
-      // Load starred comments from localStorage (not migrated yet)
-      const savedState = localStorage.getItem('ink_memory_state');
-      if (savedState) {
+      // @@@ Load starred comments from database if authenticated, localStorage if guest
+      if (isAuthenticated) {
         try {
-          const state = JSON.parse(savedState);
-          const starred = state.commentors?.filter((c: Commentor) => c.feedback === 'star') || [];
-          setStarredComments(starred);
-        } catch (e) {
-          console.error('Failed to load starred comments:', e);
+          const { listSessions, getSession } = await import('../api/voiceApi');
+          const sessions = await listSessions();
+          const allStarred: Commentor[] = [];
+
+          for (const session of sessions) {
+            try {
+              const fullSession = await getSession(session.id);
+              const starred = fullSession.editor_state?.commentors?.filter((c: Commentor) => c.feedback === 'star') || [];
+              allStarred.push(...starred);
+            } catch (err) {
+              console.error(`Failed to load session ${session.id}:`, err);
+            }
+          }
+
+          setStarredComments(allStarred);
+        } catch (error) {
+          console.error('Failed to load starred comments from database:', error);
+        }
+      } else {
+        // Guest mode: load from localStorage
+        const savedState = localStorage.getItem('ink_memory_state');
+        if (savedState) {
+          try {
+            const state = JSON.parse(savedState);
+            const starred = state.commentors?.filter((c: Commentor) => c.feedback === 'star') || [];
+            setStarredComments(starred);
+          } catch (e) {
+            console.error('Failed to load starred comments:', e);
+          }
         }
       }
 
@@ -297,31 +320,30 @@ function TimelinePage() {
   });
 
   // @@@ Set initial scroll position to center on today's card
-  useEffect(() => {
-    // @@@ Only center after data has loaded
-    if (initialLoading) return;
+  // Use useLayoutEffect to position BEFORE browser paints (prevents flash)
+  useLayoutEffect(() => {
+    // @@@ Only center when timeline is visible AND data has loaded
+    if (!isVisible || initialLoading) return;
 
-    // Triple RAF to ensure layout is complete AND data is rendered
+    // Double RAF to ensure layout is complete
     requestAnimationFrame(() => {
       requestAnimationFrame(() => {
-        requestAnimationFrame(() => {
-          if (scrollContainerRef.current) {
-            // Today is at index 7 (after 7 past days)
-            // Each card is 500px + 4rem gap (64px) = 564px
-            // Plus left padding of 4rem (64px)
-            const cardWidth = 500 + 64;
-            const todayIndex = 7;
-            const leftPadding = 64;
-            const containerWidth = scrollContainerRef.current.clientWidth;
-
-            // Center today's card
-            const scrollLeft = leftPadding + (todayIndex * cardWidth) - (containerWidth / 2) + (250);
-            scrollContainerRef.current.scrollLeft = scrollLeft;
-          }
-        });
+        if (scrollContainerRef.current) {
+          // Today is at index 7 (after 7 past days)
+          // Each card is 500px + 4rem gap (64px) = 564px
+          // Plus left padding of 4rem (64px)
+          const cardWidth = 500 + 64;
+          const todayIndex = 7;
+          const leftPadding = 64;
+          const containerWidth = scrollContainerRef.current.clientWidth;
+
+          // Center today's card
+          const scrollLeft = leftPadding + (todayIndex * cardWidth) - (containerWidth / 2) + (250);
+          scrollContainerRef.current.scrollLeft = scrollLeft;
+        }
       });
     });
-  }, [initialLoading]);
+  }, [isVisible, initialLoading]);
 
   const handleGenerateForDate = async (dateStr: string) => {
     // @@@ Block image generation for guests
@@ -358,9 +380,6 @@ function TimelinePage() {
 
       updated.unshift(newPicture);
       setPictures(updated);
-
-      // Don't save to localStorage for authenticated users (database is source of truth)
-      // localStorage.setItem('daily-pictures', JSON.stringify(updated));
     } catch (error) {
       console.error('Image generation failed:', error);
       alert('Failed to generate image. Please try again.');

*** MODIFIED: frontend/src/components/StateChooser.tsx (+8/-1) ***
@@ -1,4 +1,4 @@
-import { useState } from 'react';
+import { useState, useEffect } from 'react';
 import type { StateConfig } from '../types/voice';
 
 interface Props {
@@ -10,6 +10,13 @@ interface Props {
 export default function StateChooser({ stateConfig, selectedState, onChoose }: Props) {
   const [isExpanded, setIsExpanded] = useState(!selectedState);
 
+  // @@@ Collapse when selectedState is set externally (e.g., loaded from database)
+  useEffect(() => {
+    if (selectedState) {
+      setIsExpanded(false);
+    }
+  }, [selectedState]);
+
   const selectedStateData = selectedState ? stateConfig.states[selectedState] : null;
 
   return (

*** MODIFIED: frontend/src/components/VoiceSettings.tsx (+12/-6) ***
@@ -49,7 +49,11 @@ const ICON_LABELS = {
 
 interface Props {
   defaultVoices: Record<string, VoiceConfig>;
-  onSave: (voices: Record<string, VoiceConfig>) => void;
+  onSave: (data: {
+    voices: Record<string, VoiceConfig>;
+    metaPrompt: string;
+    stateConfig: StateConfig;
+  }) => void;
 }
 
 export default function VoiceSettings({ defaultVoices, onSave }: Props) {
@@ -76,7 +80,7 @@ export default function VoiceSettings({ defaultVoices, onSave }: Props) {
     saveVoices(voices);
     saveMetaPrompt(metaPrompt);
     saveStateConfig(stateConfig);
-    onSave(voices);
+    onSave({ voices, metaPrompt, stateConfig });
     setSaveStatus('saved');
     setTimeout(() => setSaveStatus('idle'), 2000);
   };
@@ -87,10 +91,12 @@ export default function VoiceSettings({ defaultVoices, onSave }: Props) {
     localStorage.removeItem('state-config');
     // Deep copy to force React to re-render
     const freshDefaults = JSON.parse(JSON.stringify(defaultVoices));
+    const freshMetaPrompt = getMetaPrompt();
+    const freshStateConfig = getStateConfig();
     setVoices(freshDefaults);
-    setMetaPrompt(getMetaPrompt());
-    setStateConfig(getStateConfig());
-    onSave(freshDefaults);
+    setMetaPrompt(freshMetaPrompt);
+    setStateConfig(freshStateConfig);
+    onSave({ voices: freshDefaults, metaPrompt: freshMetaPrompt, stateConfig: freshStateConfig });
   };
 
   const handleAdd = () => {
@@ -165,7 +171,7 @@ export default function VoiceSettings({ defaultVoices, onSave }: Props) {
           saveVoices(importedVoices);
           saveMetaPrompt(importedMetaPrompt);
           saveStateConfig(importedStateConfig);
-          onSave(importedVoices);
+          onSave({ voices: importedVoices, metaPrompt: importedMetaPrompt, stateConfig: importedStateConfig });
         });
       }
     };

*** MODIFIED: frontend/src/contexts/AuthContext.tsx (+2/-1) ***
@@ -4,7 +4,8 @@
  * Manages JWT token storage, user state, and auth operations
  */
 
-import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
+import { createContext, useContext, useState, useEffect } from 'react';
+import type { ReactNode } from 'react';
 
 const API_BASE = '/ink-and-memory';
 
