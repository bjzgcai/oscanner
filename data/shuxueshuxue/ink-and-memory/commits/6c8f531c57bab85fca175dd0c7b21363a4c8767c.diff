*** FILE: backend/database.py ***
@@ -34,43 +34,16 @@ def get_db():
     return db
 
 def init_db():
-    """Initialize database with schema and migrations."""
+    """Initialize database by creating all tables."""
     db = get_db()
-
-    # Check current schema version
-    try:
-        result = db.execute("SELECT MAX(version) FROM schema_version").fetchone()
-        current_version = result[0] if result[0] else 0
-    except sqlite3.OperationalError:
-        # schema_version table doesn't exist yet
-        current_version = 0
-
-    # Run migrations
-    if current_version < 1:
-        migrate_v1(db)
-    if current_version < 2:
-        migrate_v2(db)
-    if current_version < 3:
-        migrate_v3(db)
-    if current_version < 4:
-        migrate_v4(db)
-
+    create_tables(db)
     db.commit()
     db.close()
-
     print(f"âœ… Database initialized at {DB_PATH}")
 
-def migrate_v1(db):
-    """Initial schema - users, sessions, pictures, preferences."""
-    print("ðŸ“¦ Running migration v1: Initial schema")
-
-    # Schema version tracking
-    db.execute("""
-    CREATE TABLE IF NOT EXISTS schema_version (
-      version INTEGER PRIMARY KEY,
-      applied_at DATETIME DEFAULT CURRENT_TIMESTAMP
-    )
-    """)
+def create_tables(db):
+    """Create all database tables."""
+    print("ðŸ“¦ Creating database tables...")
 
     # Users table
     db.execute("""
@@ -97,17 +70,17 @@ def migrate_v1(db):
     """)
     db.execute("CREATE INDEX IF NOT EXISTS idx_sessions_user ON user_sessions(user_id)")
 
-    # Daily pictures (generated images)
+    # Daily pictures (generated images) - no UNIQUE constraint, allows multiple per day
     db.execute("""
     CREATE TABLE IF NOT EXISTS daily_pictures (
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       user_id INTEGER NOT NULL,
       date TEXT NOT NULL,
       image_base64 TEXT NOT NULL,
       prompt TEXT,
+      thumbnail_base64 TEXT,
       created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
-      FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE,
-      UNIQUE(user_id, date)
+      FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
     )
     """)
     db.execute("CREATE INDEX IF NOT EXISTS idx_pictures_user_date ON daily_pictures(user_id, date)")
@@ -120,12 +93,13 @@ def migrate_v1(db):
       meta_prompt TEXT,
       state_config_json TEXT,
       selected_state TEXT,
+      first_login_completed INTEGER DEFAULT 0,
       updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
       FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
     )
     """)
 
-    # Auth sessions (JWT alternative - optional, using JWT for now)
+    # Auth sessions
     db.execute("""
     CREATE TABLE IF NOT EXISTS auth_sessions (
       token TEXT PRIMARY KEY,
@@ -137,7 +111,7 @@ def migrate_v1(db):
     """)
     db.execute("CREATE INDEX IF NOT EXISTS idx_auth_user ON auth_sessions(user_id)")
 
-    # @@@ Analysis reports (echoes, traits, patterns)
+    # Analysis reports
     db.execute("""
     CREATE TABLE IF NOT EXISTS analysis_reports (
       id INTEGER PRIMARY KEY AUTOINCREMENT,
@@ -151,78 +125,58 @@ def migrate_v1(db):
     """)
     db.execute("CREATE INDEX IF NOT EXISTS idx_reports_user ON analysis_reports(user_id, created_at)")
 
-    # Record migration
-    db.execute("INSERT INTO schema_version (version) VALUES (1)")
-
-    print("âœ… Migration v1 completed")
-
-def migrate_v2(db):
-    """Add first_login_completed field to user_preferences."""
-    print("ðŸ“¦ Running migration v2: Add first_login_completed field")
-
-    # Add first_login_completed column to user_preferences
-    db.execute("""
-    ALTER TABLE user_preferences ADD COLUMN first_login_completed INTEGER DEFAULT 0
-    """)
-
-    # Record migration
-    db.execute("INSERT INTO schema_version (version) VALUES (2)")
-
-    print("âœ… Migration v2 completed")
-
-def migrate_v3(db):
-    """Add thumbnail_base64 field to daily_pictures."""
-    print("ðŸ“¦ Running migration v3: Add thumbnail support for images")
-
-    # Add thumbnail_base64 column to daily_pictures
-    db.execute("""
-    ALTER TABLE daily_pictures ADD COLUMN thumbnail_base64 TEXT
-    """)
-
-    # Record migration
-    db.execute("INSERT INTO schema_version (version) VALUES (3)")
-
-    print("âœ… Migration v3 completed")
-
-def migrate_v4(db):
-    """Remove UNIQUE constraint on (user_id, date) to allow multiple pictures per day."""
-    print("ðŸ“¦ Running migration v4: Allow multiple pictures per day")
-
-    # @@@ SQLite doesn't support DROP CONSTRAINT, so we need to recreate the table
-    # Create new table without UNIQUE constraint
+    # @@@ Decks table - organize voices into themed collections
     db.execute("""
-    CREATE TABLE daily_pictures_new (
-      id INTEGER PRIMARY KEY AUTOINCREMENT,
-      user_id INTEGER NOT NULL,
-      date TEXT NOT NULL,
-      image_base64 TEXT NOT NULL,
-      prompt TEXT,
+    CREATE TABLE IF NOT EXISTS decks (
+      id TEXT PRIMARY KEY,
+      name TEXT NOT NULL,
+      name_zh TEXT,
+      name_en TEXT,
+      description TEXT,
+      description_zh TEXT,
+      description_en TEXT,
+      icon TEXT,
+      color TEXT,
+      is_system BOOLEAN DEFAULT 0,
+      parent_id TEXT,
+      owner_id INTEGER,
+      enabled BOOLEAN DEFAULT 1,
+      order_index INTEGER,
       created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
-      thumbnail_base64 TEXT,
-      FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
+      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
+      FOREIGN KEY (parent_id) REFERENCES decks(id),
+      FOREIGN KEY (owner_id) REFERENCES users(id) ON DELETE CASCADE
     )
     """)
+    db.execute("CREATE INDEX IF NOT EXISTS idx_decks_owner ON decks(owner_id)")
 
-    # Copy all data from old table to new table
+    # @@@ Voices table - individual voice personas within decks
     db.execute("""
-    INSERT INTO daily_pictures_new (id, user_id, date, image_base64, prompt, created_at, thumbnail_base64)
-    SELECT id, user_id, date, image_base64, prompt, created_at, thumbnail_base64
-    FROM daily_pictures
+    CREATE TABLE IF NOT EXISTS voices (
+      id TEXT PRIMARY KEY,
+      deck_id TEXT NOT NULL,
+      name TEXT NOT NULL,
+      name_zh TEXT,
+      name_en TEXT,
+      system_prompt TEXT NOT NULL,
+      icon TEXT,
+      color TEXT,
+      is_system BOOLEAN DEFAULT 0,
+      parent_id TEXT,
+      owner_id INTEGER,
+      enabled BOOLEAN DEFAULT 1,
+      order_index INTEGER,
+      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
+      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
+      FOREIGN KEY (deck_id) REFERENCES decks(id) ON DELETE CASCADE,
+      FOREIGN KEY (parent_id) REFERENCES voices(id),
+      FOREIGN KEY (owner_id) REFERENCES users(id) ON DELETE CASCADE
+    )
     """)
+    db.execute("CREATE INDEX IF NOT EXISTS idx_voices_deck ON voices(deck_id)")
+    db.execute("CREATE INDEX IF NOT EXISTS idx_voices_owner ON voices(owner_id)")
 
-    # Drop old table
-    db.execute("DROP TABLE daily_pictures")
-
-    # Rename new table to original name
-    db.execute("ALTER TABLE daily_pictures_new RENAME TO daily_pictures")
-
-    # Recreate index (without UNIQUE constraint)
-    db.execute("CREATE INDEX idx_pictures_user_date ON daily_pictures(user_id, date)")
-
-    # Record migration
-    db.execute("INSERT INTO schema_version (version) VALUES (4)")
-
-    print("âœ… Migration v4 completed")
+    print("âœ… Tables created")
 
 # ========== User Management ==========
 
