*** FILE: frontend/src/App.tsx ***
@@ -1,4 +1,4 @@
-import React, { useState, useEffect, useLayoutEffect, useRef, useCallback, useMemo } from 'react';
+import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';
 import { EditorEngine } from './engine/EditorEngine';
 import type { EditorState, Commentor, TextCell } from './engine/EditorEngine';
 import { ChatWidget } from './engine/ChatWidget';
@@ -301,7 +301,6 @@ export default function App() {
   // @@@ Force re-render when refs are ready
   const [refsReady, setRefsReady] = useState(0);
   const refsReadyTriggered = useRef(false);
-  const layoutStableTriggered = useRef(false);
 
   // @@@ Comment alignment state
   const [commentsAligned, setCommentsAligned] = useState(false);
@@ -310,16 +309,6 @@ export default function App() {
   const [expandedCommentId, setExpandedCommentId] = useState<string | null>(null);
   const [commentChatProcessing, setCommentChatProcessing] = useState<Set<string>>(new Set());
 
-  // @@@ Force position recalculation after layout settles (fixes refresh bug)
-  useLayoutEffect(() => {
-    if (refsReady > 0 && !layoutStableTriggered.current) {
-      layoutStableTriggered.current = true;
-      // Trigger another increment after layout completes
-      // This ensures positions are calculated AFTER all textarea heights are adjusted
-      setRefsReady(prev => prev + 1);
-    }
-  }, [refsReady]);
-
   // @@@ Trigger re-render when returning to writing view to recalculate comment positions
   useEffect(() => {
     if (currentView === 'writing') {
@@ -642,7 +631,7 @@ export default function App() {
     });
 
     return groups;
-  }, [state?.commentors, state, refsReady]);
+  }, [state?.commentors, state, refsReady, selectedState]);
 
   useEffect(() => {
     if (!commentGroups) return;
