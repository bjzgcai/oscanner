[
  {
    "sha": "0fece1ad8684da6d29d6b8a262592ca00303f7ea",
    "filename": "frontend/src/App.css",
    "status": "modified",
    "additions": 20,
    "deletions": 0,
    "changes": 20,
    "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.css",
    "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.css",
    "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2FApp.css?ref=4056c8636f0adc483f65c6e914e3b9e374517773",
    "patch": "@@ -134,6 +134,26 @@\n   }\n }\n \n+@keyframes energyPulse {\n+  0% {\n+    box-shadow: 0 0 0 rgba(102, 102, 102, 0);\n+    transform: scale(1);\n+    filter: brightness(1);\n+  }\n+  50% {\n+    box-shadow:\n+      0 0 12px rgba(102, 102, 102, 0.75),\n+      0 0 20px rgba(102, 102, 102, 0.45);\n+    transform: scale(1.06);\n+    filter: brightness(1.15);\n+  }\n+  100% {\n+    box-shadow: 0 0 0 rgba(102, 102, 102, 0);\n+    transform: scale(1);\n+    filter: brightness(1);\n+  }\n+}\n+\n /* @@@ Comment expansion animations */\n @keyframes slideDownFadeIn {\n   from {"
  },
  {
    "sha": "fbe1ebed4b2216ae55a805dc8c9b0dc2ac7d9e56",
    "filename": "frontend/src/App.tsx",
    "status": "modified",
    "additions": 70,
    "deletions": 6,
    "changes": 76,
    "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.tsx",
    "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.tsx",
    "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2FApp.tsx?ref=4056c8636f0adc483f65c6e914e3b9e374517773",
    "patch": "@@ -228,6 +228,44 @@ export default function App() {\n     engineRef,\n   });\n \n+  const energyThreshold = 50;\n+  const appliedComments = state?.commentors.filter(c => c.appliedAt) ?? [];\n+  const lastEntry = state?.weightPath[state.weightPath.length - 1];\n+  const currentEnergy = lastEntry?.energy || 0;\n+  const usedEnergy = appliedComments.length * energyThreshold;\n+  const unusedEnergy = currentEnergy - usedEnergy;\n+  const safeUnusedEnergy = Math.max(unusedEnergy, 0);\n+  const energyLevel = Math.floor(safeUnusedEnergy / energyThreshold);\n+  const energyRemainder = safeUnusedEnergy % energyThreshold;\n+  const [energyPulseKey, setEnergyPulseKey] = useState(0);\n+  const energyLevelRef = useRef(0);\n+  const [showFullEnergy, setShowFullEnergy] = useState(false);\n+  const fullEnergyTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n+  const energyProgress = showFullEnergy ? 1 : energyRemainder / energyThreshold;\n+\n+  useEffect(() => {\n+    const prevLevel = energyLevelRef.current;\n+    if (energyLevel > prevLevel) {\n+      setEnergyPulseKey((key) => key + 1);\n+      setShowFullEnergy(true);\n+      if (fullEnergyTimeoutRef.current) {\n+        clearTimeout(fullEnergyTimeoutRef.current);\n+      }\n+      fullEnergyTimeoutRef.current = setTimeout(() => {\n+        setShowFullEnergy(false);\n+      }, 200);\n+    }\n+    energyLevelRef.current = energyLevel;\n+  }, [energyLevel]);\n+\n+  useEffect(() => {\n+    return () => {\n+      if (fullEnergyTimeoutRef.current) {\n+        clearTimeout(fullEnergyTimeoutRef.current);\n+      }\n+    };\n+  }, []);\n+\n   // @@@ CRITICAL: Resize textareas then restore scroll position\n   // Order matters: resize first (changes content height), then restore scroll\n   // Triggers: on mount (refsReady) and when cells added/deleted (cells.length)\n@@ -929,11 +967,6 @@ export default function App() {\n     return <div>Loading...</div>;\n   }\n \n-  const lastEntry = state.weightPath[state.weightPath.length - 1];\n-  const currentEnergy = lastEntry?.energy || 0;\n-  const usedEnergy = state.commentors.filter(c => c.appliedAt).length * 50;\n-  const unusedEnergy = currentEnergy - usedEnergy;\n-  const appliedComments = state.commentors.filter(c => c.appliedAt);\n \n   return (\n     <>\n@@ -1442,10 +1475,41 @@ export default function App() {\n                 backgroundColor: '#fafafa',\n                 zIndex: 50\n               }}>\n-                <span>Energy: {unusedEnergy}/{currentEnergy}</span>\n                 <span>Weight: {lastEntry?.weight || 0}</span>\n                 <span>Applied: {appliedComments.length}</span>\n                 <span>Groups: {commentGroups.size}</span>\n+                <span style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n+                  <span>Energy:</span>\n+                  <span\n+                    key={energyPulseKey}\n+                    style={{\n+                      display: 'inline-flex',\n+                      padding: '2px',\n+                      borderRadius: '999px',\n+                      animation: energyPulseKey > 0 ? 'energyPulse 0.6s ease-out' : 'none'\n+                    }}\n+                  >\n+                    <span style={{\n+                      width: '120px',\n+                      height: '8px',\n+                      borderRadius: '999px',\n+                      background: 'rgba(102, 102, 102, 0.2)',\n+                      overflow: 'hidden',\n+                      display: 'block'\n+                    }}>\n+                    <span\n+                      style={{\n+                        display: 'block',\n+                        height: '100%',\n+                        width: `${Math.round(energyProgress * 100)}%`,\n+                        background: '#666',\n+                        borderRadius: '999px',\n+                        transition: 'width 0.25s ease',\n+                      }}\n+                    />\n+                    </span>\n+                  </span>\n+                </span>\n               </div>\n             </div>\n           </div>"
  }
]