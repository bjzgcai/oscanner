[
  {
    "sha": "0d07715e6a7df889277d0c279e4bab0727922376",
    "filename": "frontend/src/App.tsx",
    "status": "modified",
    "additions": 95,
    "deletions": 26,
    "changes": 121,
    "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/b56fdc9077af4657752cd5434560ff09b8cfcd2b/frontend%2Fsrc%2FApp.tsx",
    "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/b56fdc9077af4657752cd5434560ff09b8cfcd2b/frontend%2Fsrc%2FApp.tsx",
    "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2FApp.tsx?ref=b56fdc9077af4657752cd5434560ff09b8cfcd2b",
    "patch": "@@ -97,6 +97,14 @@ export default function App() {\n   const [showMigrationDialog, setShowMigrationDialog] = useState(false);\n   const [isMigrating, setIsMigrating] = useState(false);\n   const currentLanguage = (i18n.language || 'en').split('-')[0];\n+  const [showEnergyBar, setShowEnergyBar] = useState(() => {\n+    const stored = localStorage.getItem('show-energy-bar');\n+    return stored ? stored === 'true' : true;\n+  });\n+\n+  useEffect(() => {\n+    localStorage.setItem('show-energy-bar', String(showEnergyBar));\n+  }, [showEnergyBar]);\n   const handleUILanguageChange = useCallback((code: string) => {\n     if (code !== currentLanguage) {\n       i18n.changeLanguage(code);\n@@ -1478,38 +1486,40 @@ export default function App() {\n                 <span>Weight: {lastEntry?.weight || 0}</span>\n                 <span>Applied: {appliedComments.length}</span>\n                 <span>Groups: {commentGroups.size}</span>\n-                <span style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n-                  <span>Energy:</span>\n-                  <span\n-                    key={energyPulseKey}\n-                    style={{\n-                      display: 'inline-flex',\n-                      padding: '2px',\n-                      borderRadius: '999px',\n-                      animation: energyPulseKey > 0 ? 'energyPulse 0.6s ease-out' : 'none'\n-                    }}\n-                  >\n-                    <span style={{\n-                      width: '120px',\n-                      height: '8px',\n-                      borderRadius: '999px',\n-                      background: 'rgba(102, 102, 102, 0.2)',\n-                      overflow: 'hidden',\n-                      display: 'block'\n-                    }}>\n+                {showEnergyBar && (\n+                  <span style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n+                    <span>Energy:</span>\n                     <span\n+                      key={energyPulseKey}\n                       style={{\n-                        display: 'block',\n-                        height: '100%',\n-                        width: `${Math.round(energyProgress * 100)}%`,\n-                        background: '#666',\n+                        display: 'inline-flex',\n+                        padding: '2px',\n                         borderRadius: '999px',\n-                        transition: 'width 0.25s ease',\n+                        animation: energyPulseKey > 0 ? 'energyPulse 0.6s ease-out' : 'none'\n                       }}\n-                    />\n+                    >\n+                      <span style={{\n+                        width: '120px',\n+                        height: '8px',\n+                        borderRadius: '999px',\n+                        background: 'rgba(102, 102, 102, 0.2)',\n+                        overflow: 'hidden',\n+                        display: 'block'\n+                      }}>\n+                        <span\n+                          style={{\n+                            display: 'block',\n+                            height: '100%',\n+                            width: `${Math.round(energyProgress * 100)}%`,\n+                            background: '#666',\n+                            borderRadius: '999px',\n+                            transition: 'width 0.25s ease',\n+                          }}\n+                        />\n+                      </span>\n                     </span>\n                   </span>\n-                </span>\n+                )}\n               </div>\n             </div>\n           </div>\n@@ -1640,6 +1650,65 @@ export default function App() {\n                 }}>\n                   {t('settings.language.preview')}\n                 </p>\n+\n+                <div style={{\n+                  marginTop: 20,\n+                  paddingTop: 16,\n+                  borderTop: '1px dashed #d0c4b0'\n+                }}>\n+                  <div style={{\n+                    display: 'flex',\n+                    alignItems: 'center',\n+                    justifyContent: 'space-between',\n+                    gap: 12\n+                  }}>\n+                    <div>\n+                      <div style={{\n+                        fontSize: 14,\n+                        fontWeight: 500,\n+                        color: '#2c2c2c',\n+                        fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif'\n+                      }}>\n+                        Energy Bar / \u80fd\u91cf\u6761\n+                      </div>\n+                      <div style={{\n+                        marginTop: 6,\n+                        fontSize: 12,\n+                        color: '#666',\n+                        fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif'\n+                      }}>\n+                        Toggle the energy progress bar in the bottom stats line.\n+                      </div>\n+                    </div>\n+                    <button\n+                      type=\"button\"\n+                      onClick={() => setShowEnergyBar(prev => !prev)}\n+                      aria-pressed={showEnergyBar}\n+                      style={{\n+                        width: 44,\n+                        height: 24,\n+                        borderRadius: 999,\n+                        border: showEnergyBar ? '1px solid #2c2c2c' : '1px solid #d0c4b0',\n+                        background: showEnergyBar ? '#2c2c2c' : 'transparent',\n+                        cursor: 'pointer',\n+                        position: 'relative',\n+                        padding: 0,\n+                        transition: 'all 0.2s ease'\n+                      }}\n+                    >\n+                      <span style={{\n+                        position: 'absolute',\n+                        top: 3,\n+                        left: showEnergyBar ? 24 : 4,\n+                        width: 16,\n+                        height: 16,\n+                        borderRadius: '50%',\n+                        background: showEnergyBar ? '#fff' : '#8a7a69',\n+                        transition: 'all 0.2s ease'\n+                      }} />\n+                    </button>\n+                  </div>\n+                </div>\n               </div>\n             </section>\n "
  }
]