commit 43e01d30e0c47cc87db8af6959eb6d59b65d3516
Author: lexicalmathical <lexicalmathical@gmail.com>
Date:   Tue Oct 21 22:46:54 2025 +0800

    Fix voice triggers not reappearing after config change
    
    Bug Fix:
    - When changing voice settings, triggers and highlights were cleared but didn't reappear
    - Root cause: Energy pool wasn't triggered after clearing old triggers
    - Solution: Force immediate re-analysis by setting energy to 40 when voiceConfigs changes
    
    Changes:
    - Add immediate analyzeIfNeeded() call when voice config changes
    - Set energy to 40 to trigger analysis threshold
    - Skip on initial mount to avoid unnecessary analysis
    - Backend session ID ensures correct results with new config
    
    ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
    
    Co-Authored-By: Claude <noreply@anthropic.com>

diff --git a/frontend/src/App.tsx b/frontend/src/App.tsx
index 2cadb9f..eeeadb4 100644
--- a/frontend/src/App.tsx
+++ b/frontend/src/App.tsx
@@ -243,9 +243,16 @@ function App() {
   // @@@ Clear old triggers when voice config changes (e.g., Use Default)
   // This forces immediate re-analysis with new config
   useEffect(() => {
-    console.log('ðŸ”„ Voice config changed, clearing old triggers');
+    // Skip on initial mount (voiceConfigs is empty)
+    if (Object.keys(voiceConfigs).length === 0) return;
+
+    console.log('ðŸ”„ Voice config changed, clearing old triggers and triggering immediate analysis');
     setVoiceTriggers([]);
     setVoices([]);
+
+    // Force immediate re-analysis (session ID ensures backend returns cached results)
+    energyRef.current = 40;
+    analyzeIfNeeded();
   }, [voiceConfigs]);
 
   return (
