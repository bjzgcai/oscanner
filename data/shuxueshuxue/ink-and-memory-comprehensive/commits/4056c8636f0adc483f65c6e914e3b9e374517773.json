{
  "sha": "4056c8636f0adc483f65c6e914e3b9e374517773",
  "node_id": "C_kwDOP2Zrm9oAKDQwNTZjODYzNmYwYWRjNDgzZjY1YzZlOTE0ZTNiOWUzNzQ1MTc3NzM",
  "commit": {
    "author": {
      "name": "zhuchenyu2008",
      "email": "132262479+zhuchenyu2008@users.noreply.github.com",
      "date": "2025-12-28T12:49:05Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2025-12-28T12:49:05Z"
    },
    "message": "Frontend Energy Accumulation Visualization\n\n  - Added an Energy progress bar to the writing view\u2019s bottom debug stats bar\r\n    and made it animate when crossing each energy threshold.\r\n  - Implemented threshold-based progress calculation (per 50 energy) with a\r\n    brief full-fill flash before rolling into the next cycle.\r\n  - Enhanced the pulse animation for clearer visual feedback.\r\n\r\n  Changes\r\n\r\n  - frontend/src/App.tsx Added energy threshold/progress logic, pulse trigger,\r\n    and the UI for Energy: + progress bar in the bottom stats bar.\r\n  - frontend/src/App.css Added @keyframes energyPulse with stronger glow/\r\n    scale/brightness.",
    "tree": {
      "sha": "c01a427c7145d784ee3c757b3b6b109144a5d40c",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/trees/c01a427c7145d784ee3c757b3b6b109144a5d40c"
    },
    "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/git/commits/4056c8636f0adc483f65c6e914e3b9e374517773",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsFcBAABCAAQBQJpUSdBCRC1aQ7uu5UhlAAA1hUQAKXmRvdJtaLS9AGY1iEz9AeL\nnpkZ1CqeUv3WLShNLxyphoeYEnhLVbgzeuJ53L05gb9IWvOOehQHKCu9fAfzGazG\nFTqHAcNSqE55f8dIomRd7OQ+a84H0Kg11VHBmWCdg0KlAaHSewUPw6/b3/NT9dlN\nIHutP2QRdcWKTDHNNUtxAH8PoKqW/IKbLAmpdfw6vmLl96H6c0jXnMtTLruyl2cG\nPGHiiA/camCSNt4wSond6yEnMy+tm09MztmjJPVvgvnkIxMA7SWseOie/akwJYrV\nGpgCTvHDAcUkzMh6FkeC8Y1ySfWLzYAqP0WHMF6mwmc1Emwm8hKYoRN5xmHJ69i0\nluFp/5/c6y2YMdom2X/QHtm6v+VDcvQ52buigQbZ0irUP9TxOseKq/4XuLd04p7s\nD/cAE/s17cM64ZYlWUK+fdp+pb24Px2OtfyIodZYt2wwJJpsRjCh23kEwj0LIUxJ\nRZQf98oITlaBnaSk2D/iin1eOwRSPglGj23aORd6MkHiDu33+CULQkwk6oGhgXWE\nhip0oIN/uoX5rY+BanuO8xQJWMI66kYbbyZgC+e/xSRattxaF+D05GESa3HNHbDY\n0IR4m/ToBBsl30OWVSnwZqOm2oUQnuIgnEQQjoWMqEqbDAlIts4jjo0I/WI73S55\nUgrKHqNu/NVwtslaPXGj\n=96YU\n-----END PGP SIGNATURE-----\n",
      "payload": "tree c01a427c7145d784ee3c757b3b6b109144a5d40c\nparent 06b7c9539721d80431b5f072591f13ab241be5c9\nauthor zhuchenyu2008 <132262479+zhuchenyu2008@users.noreply.github.com> 1766926145 +0800\ncommitter GitHub <noreply@github.com> 1766926145 +0800\n\nFrontend Energy Accumulation Visualization\n\n  - Added an Energy progress bar to the writing view\u2019s bottom debug stats bar\r\n    and made it animate when crossing each energy threshold.\r\n  - Implemented threshold-based progress calculation (per 50 energy) with a\r\n    brief full-fill flash before rolling into the next cycle.\r\n  - Enhanced the pulse animation for clearer visual feedback.\r\n\r\n  Changes\r\n\r\n  - frontend/src/App.tsx Added energy threshold/progress logic, pulse trigger,\r\n    and the UI for Energy: + progress bar in the bottom stats bar.\r\n  - frontend/src/App.css Added @keyframes energyPulse with stronger glow/\r\n    scale/brightness.",
      "verified_at": "2025-12-28T12:49:05Z"
    }
  },
  "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/4056c8636f0adc483f65c6e914e3b9e374517773",
  "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/4056c8636f0adc483f65c6e914e3b9e374517773",
  "comments_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/4056c8636f0adc483f65c6e914e3b9e374517773/comments",
  "author": {
    "login": "zhuchenyu2008",
    "id": 132262479,
    "node_id": "U_kgDOB-IqTw",
    "avatar_url": "https://avatars.githubusercontent.com/u/132262479?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zhuchenyu2008",
    "html_url": "https://github.com/zhuchenyu2008",
    "followers_url": "https://api.github.com/users/zhuchenyu2008/followers",
    "following_url": "https://api.github.com/users/zhuchenyu2008/following{/other_user}",
    "gists_url": "https://api.github.com/users/zhuchenyu2008/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zhuchenyu2008/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zhuchenyu2008/subscriptions",
    "organizations_url": "https://api.github.com/users/zhuchenyu2008/orgs",
    "repos_url": "https://api.github.com/users/zhuchenyu2008/repos",
    "events_url": "https://api.github.com/users/zhuchenyu2008/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zhuchenyu2008/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "06b7c9539721d80431b5f072591f13ab241be5c9",
      "url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/commits/06b7c9539721d80431b5f072591f13ab241be5c9",
      "html_url": "https://github.com/shuxueshuxue/ink-and-memory/commit/06b7c9539721d80431b5f072591f13ab241be5c9"
    }
  ],
  "stats": {
    "total": 96,
    "additions": 90,
    "deletions": 6
  },
  "files": [
    {
      "sha": "0fece1ad8684da6d29d6b8a262592ca00303f7ea",
      "filename": "frontend/src/App.css",
      "status": "modified",
      "additions": 20,
      "deletions": 0,
      "changes": 20,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.css",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.css",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2FApp.css?ref=4056c8636f0adc483f65c6e914e3b9e374517773",
      "patch": "@@ -134,6 +134,26 @@\n   }\n }\n \n+@keyframes energyPulse {\n+  0% {\n+    box-shadow: 0 0 0 rgba(102, 102, 102, 0);\n+    transform: scale(1);\n+    filter: brightness(1);\n+  }\n+  50% {\n+    box-shadow:\n+      0 0 12px rgba(102, 102, 102, 0.75),\n+      0 0 20px rgba(102, 102, 102, 0.45);\n+    transform: scale(1.06);\n+    filter: brightness(1.15);\n+  }\n+  100% {\n+    box-shadow: 0 0 0 rgba(102, 102, 102, 0);\n+    transform: scale(1);\n+    filter: brightness(1);\n+  }\n+}\n+\n /* @@@ Comment expansion animations */\n @keyframes slideDownFadeIn {\n   from {"
    },
    {
      "sha": "fbe1ebed4b2216ae55a805dc8c9b0dc2ac7d9e56",
      "filename": "frontend/src/App.tsx",
      "status": "modified",
      "additions": 70,
      "deletions": 6,
      "changes": 76,
      "blob_url": "https://github.com/shuxueshuxue/ink-and-memory/blob/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.tsx",
      "raw_url": "https://github.com/shuxueshuxue/ink-and-memory/raw/4056c8636f0adc483f65c6e914e3b9e374517773/frontend%2Fsrc%2FApp.tsx",
      "contents_url": "https://api.github.com/repos/shuxueshuxue/ink-and-memory/contents/frontend%2Fsrc%2FApp.tsx?ref=4056c8636f0adc483f65c6e914e3b9e374517773",
      "patch": "@@ -228,6 +228,44 @@ export default function App() {\n     engineRef,\n   });\n \n+  const energyThreshold = 50;\n+  const appliedComments = state?.commentors.filter(c => c.appliedAt) ?? [];\n+  const lastEntry = state?.weightPath[state.weightPath.length - 1];\n+  const currentEnergy = lastEntry?.energy || 0;\n+  const usedEnergy = appliedComments.length * energyThreshold;\n+  const unusedEnergy = currentEnergy - usedEnergy;\n+  const safeUnusedEnergy = Math.max(unusedEnergy, 0);\n+  const energyLevel = Math.floor(safeUnusedEnergy / energyThreshold);\n+  const energyRemainder = safeUnusedEnergy % energyThreshold;\n+  const [energyPulseKey, setEnergyPulseKey] = useState(0);\n+  const energyLevelRef = useRef(0);\n+  const [showFullEnergy, setShowFullEnergy] = useState(false);\n+  const fullEnergyTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n+  const energyProgress = showFullEnergy ? 1 : energyRemainder / energyThreshold;\n+\n+  useEffect(() => {\n+    const prevLevel = energyLevelRef.current;\n+    if (energyLevel > prevLevel) {\n+      setEnergyPulseKey((key) => key + 1);\n+      setShowFullEnergy(true);\n+      if (fullEnergyTimeoutRef.current) {\n+        clearTimeout(fullEnergyTimeoutRef.current);\n+      }\n+      fullEnergyTimeoutRef.current = setTimeout(() => {\n+        setShowFullEnergy(false);\n+      }, 200);\n+    }\n+    energyLevelRef.current = energyLevel;\n+  }, [energyLevel]);\n+\n+  useEffect(() => {\n+    return () => {\n+      if (fullEnergyTimeoutRef.current) {\n+        clearTimeout(fullEnergyTimeoutRef.current);\n+      }\n+    };\n+  }, []);\n+\n   // @@@ CRITICAL: Resize textareas then restore scroll position\n   // Order matters: resize first (changes content height), then restore scroll\n   // Triggers: on mount (refsReady) and when cells added/deleted (cells.length)\n@@ -929,11 +967,6 @@ export default function App() {\n     return <div>Loading...</div>;\n   }\n \n-  const lastEntry = state.weightPath[state.weightPath.length - 1];\n-  const currentEnergy = lastEntry?.energy || 0;\n-  const usedEnergy = state.commentors.filter(c => c.appliedAt).length * 50;\n-  const unusedEnergy = currentEnergy - usedEnergy;\n-  const appliedComments = state.commentors.filter(c => c.appliedAt);\n \n   return (\n     <>\n@@ -1442,10 +1475,41 @@ export default function App() {\n                 backgroundColor: '#fafafa',\n                 zIndex: 50\n               }}>\n-                <span>Energy: {unusedEnergy}/{currentEnergy}</span>\n                 <span>Weight: {lastEntry?.weight || 0}</span>\n                 <span>Applied: {appliedComments.length}</span>\n                 <span>Groups: {commentGroups.size}</span>\n+                <span style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n+                  <span>Energy:</span>\n+                  <span\n+                    key={energyPulseKey}\n+                    style={{\n+                      display: 'inline-flex',\n+                      padding: '2px',\n+                      borderRadius: '999px',\n+                      animation: energyPulseKey > 0 ? 'energyPulse 0.6s ease-out' : 'none'\n+                    }}\n+                  >\n+                    <span style={{\n+                      width: '120px',\n+                      height: '8px',\n+                      borderRadius: '999px',\n+                      background: 'rgba(102, 102, 102, 0.2)',\n+                      overflow: 'hidden',\n+                      display: 'block'\n+                    }}>\n+                    <span\n+                      style={{\n+                        display: 'block',\n+                        height: '100%',\n+                        width: `${Math.round(energyProgress * 100)}%`,\n+                        background: '#666',\n+                        borderRadius: '999px',\n+                        transition: 'width 0.25s ease',\n+                      }}\n+                    />\n+                    </span>\n+                  </span>\n+                </span>\n               </div>\n             </div>\n           </div>"
    }
  ]
}