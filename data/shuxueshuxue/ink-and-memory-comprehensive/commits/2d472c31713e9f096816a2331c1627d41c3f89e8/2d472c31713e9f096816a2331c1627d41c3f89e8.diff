commit 2d472c31713e9f096816a2331c1627d41c3f89e8
Author: lexicalmathical <lexicalmathical@gmail.com>
Date:   Thu Nov 6 19:03:55 2025 +0800

    Reduce inspiration timer to 2 seconds and clean up verbose console logs
    
    - Changed inspiration trigger delay from 5 seconds to 2 seconds for faster feedback
    - Removed repetitive debug logs from module load, useEffect, and EditorEngine
    - Kept important backend API call log for debugging
    - Cleaned up logs that were repeating on every HMR reload and state change
    
    ü§ñ Generated with [Claude Code](https://claude.com/claude-code)
    
    Co-Authored-By: Claude <noreply@anthropic.com>

diff --git a/frontend/src/App.tsx b/frontend/src/App.tsx
index 16b9b5d..3b0bc37 100644
--- a/frontend/src/App.tsx
+++ b/frontend/src/App.tsx
@@ -28,9 +28,6 @@ import { CommentGroupCard } from './components/CommentCard';
 import { findNormalizedPhrase } from './utils/textNormalize';
 import { useAuth } from './contexts/AuthContext';
 import LoginForm from './components/Auth/LoginForm';
-
-// @@@ DEBUG: Verify new code is loaded
-console.log('üöÄüöÄüöÄ APP.TSX LOADED - NEW CODE WITH SUGGESTIONS üöÄüöÄüöÄ');
 import RegisterForm from './components/Auth/RegisterForm';
 import { STORAGE_KEYS } from './constants/storageKeys';
 
@@ -339,8 +336,6 @@ export default function App() {
   // @@@ Update engine when voice configs change
   useEffect(() => {
     if (engineRef.current && Object.keys(voiceConfigs).length > 0) {
-      console.log('üì¢ App: voiceConfigs changed, updating engine. Enabled:',
-        Object.entries(voiceConfigs).filter(([_, v]) => v.enabled).map(([k]) => k));
       engineRef.current.setVoiceConfigs(voiceConfigs);
     }
   }, [voiceConfigs]);
@@ -364,7 +359,6 @@ export default function App() {
 
         // If user has already completed first login, clear localStorage
         if (preferences?.first_login_completed) {
-          console.log('‚úÖ Returning user, clearing localStorage');
           // Clear all app data from localStorage (keep only auth token)
           Object.values(STORAGE_KEYS).forEach(key => {
             if (key !== STORAGE_KEYS.AUTH_TOKEN) {
@@ -815,7 +809,6 @@ export default function App() {
 
   // @@@ Per-cell text change handler
   const handleTextChange = useCallback((cellId: string, newText: string) => {
-    console.log('üî•üî•üî• handleTextChange CALLED!', cellId, newText.length);
     setLocalTexts(prev => {
       const next = new Map(prev);
       next.set(cellId, newText);
@@ -851,21 +844,15 @@ export default function App() {
       engineRef.current.updateTextCell(cellId, newText);
     }
 
-    // @@@ Start 5-second debounce timer for suggestions
-    console.log('‚è±Ô∏è  Starting 5-second suggestion timer');
+    // @@@ Start 2-second debounce timer for suggestions
     suggestionTimerRef.current = setTimeout(async () => {
-      console.log('‚è∞ Timer fired! Fetching suggestion...');
-
       // Get all text from all text cells
       const allText = state?.cells
         .filter(c => c.type === 'text')
         .map(c => (c as TextCell).content)
         .join('') || '';
 
-      console.log(`üìù Text length: ${allText.length} chars`);
-
       if (allText.trim().length < 10) {
-        console.log('‚ùå Text too short, skipping suggestion');
         return;
       }
 
@@ -881,7 +868,6 @@ export default function App() {
 
         console.log('üöÄ Calling getSuggestion API...');
         const suggestion = await getSuggestion(allText, metaPrompt, statePrompt);
-        console.log('‚úÖ Got suggestion:', suggestion);
 
         // @@@ Validate text hasn't changed since request was sent
         const currentCells = engineRef.current?.getState().cells;
@@ -890,26 +876,13 @@ export default function App() {
           .map(c => (c as TextCell).content)
           .join('') || '';
 
-        console.log('üìä Comparison:', {
-          snapshotLength: snapshot.length,
-          currentLength: currentText.length,
-          matches: currentText === snapshot
-        });
-
         if (suggestion && currentText === snapshot) {
-          console.log('‚ú® Setting inspiration:', suggestion);
           setCurrentInspiration(suggestion);
-        } else {
-          if (!suggestion) {
-            console.log('‚ö†Ô∏è  No inspiration returned from backend');
-          } else {
-            console.log('‚ö†Ô∏è  Text changed, discarding inspiration');
-          }
         }
       } catch (error) {
-        console.error('‚ùå Failed to get inspiration:', error);
+        console.error('Failed to get inspiration:', error);
       }
-    }, 5000);
+    }, 2000);
   }, [composingCells, dropdownVisible, dropdownTriggerCellId, state, selectedState, stateConfig]);
 
   // @@@ Per-cell composition handlers
@@ -2014,6 +1987,40 @@ export default function App() {
                     }
                     return null;
                   })}
+
+                  {/* @@@ Inline Inspiration - appears after last text cell with icon and grey text */}
+                  {currentInspiration && (
+                    <div style={{
+                      display: 'flex',
+                      alignItems: 'center',
+                      gap: '10px',
+                      marginTop: '12px',
+                      color: '#999',
+                      fontSize: '16px',
+                      fontStyle: 'italic',
+                      cursor: 'pointer'
+                    }}
+                    onClick={() => setCurrentInspiration(null)}
+                    >
+                      {/* Voice Icon */}
+                      <div style={{
+                        fontSize: '24px',
+                        flexShrink: 0,
+                        color: '#666'
+                      }}>
+                        {React.createElement(iconMap[currentInspiration.icon as keyof typeof iconMap] || FaBrain)}
+                      </div>
+
+                      {/* Inspiration Text */}
+                      <div>
+                        <span style={{ fontWeight: 'normal', color: '#888' }}>
+                          {currentInspiration.voice}:
+                        </span>
+                        {' '}
+                        {currentInspiration.inspiration}
+                      </div>
+                    </div>
+                  )}
                 </div>
 
                 {/* Comments layer (absolute positioned) - hide on mobile */}
@@ -2332,74 +2339,6 @@ export default function App() {
         </div>
       )}
 
-      {/* @@@ Floating Inspiration Bubble - appears bottom-right when inspiration is available */}
-      {currentInspiration && (
-        <div
-          style={{
-            position: 'fixed',
-            bottom: isMobile ? '60px' : '20px',
-            right: isMobile ? '10px' : '20px',
-            maxWidth: isMobile ? 'calc(100% - 20px)' : '400px',
-            backgroundColor: '#fff',
-            borderRadius: '12px',
-            boxShadow: '0 4px 20px rgba(0,0,0,0.15)',
-            padding: '16px',
-            display: 'flex',
-            gap: '12px',
-            alignItems: 'start',
-            zIndex: 1000,
-            animation: 'slideIn 0.3s ease-out'
-          }}
-        >
-          {/* Voice Icon */}
-          <div
-            style={{
-              fontSize: '28px',
-              flexShrink: 0
-            }}
-          >
-            {React.createElement(iconMap[currentInspiration.icon as keyof typeof iconMap] || FaBrain)}
-          </div>
-
-          {/* Inspiration Content */}
-          <div style={{ flex: 1 }}>
-            <div style={{
-              fontWeight: 'bold',
-              marginBottom: '6px',
-              fontSize: '14px',
-              color: '#555'
-            }}>
-              {currentInspiration.voice}
-            </div>
-            <div style={{
-              fontSize: '15px',
-              lineHeight: '1.5',
-              color: '#333'
-            }}>
-              {currentInspiration.inspiration}
-            </div>
-          </div>
-
-          {/* Close button */}
-          <button
-            onClick={() => setCurrentInspiration(null)}
-            style={{
-              border: 'none',
-              background: 'transparent',
-              cursor: 'pointer',
-              fontSize: '18px',
-              color: '#999',
-              padding: '0',
-              width: '24px',
-              height: '24px',
-              flexShrink: 0
-            }}
-          >
-            √ó
-          </button>
-        </div>
-      )}
-
       {/* Calendar Popup */}
       {showCalendarPopup && (
         <CalendarPopup
diff --git a/frontend/src/engine/EditorEngine.ts b/frontend/src/engine/EditorEngine.ts
index 47cbfe8..3988019 100644
--- a/frontend/src/engine/EditorEngine.ts
+++ b/frontend/src/engine/EditorEngine.ts
@@ -137,8 +137,6 @@ export class EditorEngine {
   // @@@ Update voice configurations from settings
   setVoiceConfigs(configs: Record<string, any>) {
     this.voiceConfigs = configs;
-    console.log('üì¢ EditorEngine: voiceConfigs updated, enabled voices:',
-      Object.entries(configs).filter(([_, v]) => v.enabled).map(([k]) => k));
   }
 
   // @@@ Update a specific text cell by ID
