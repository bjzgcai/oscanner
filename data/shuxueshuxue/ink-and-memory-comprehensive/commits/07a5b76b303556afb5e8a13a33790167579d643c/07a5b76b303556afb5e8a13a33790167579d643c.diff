commit 07a5b76b303556afb5e8a13a33790167579d643c
Author: lexicalmathical <lexicalmathical@gmail.com>
Date:   Tue Oct 21 22:17:25 2025 +0800

    Add analysis view, calendar, quote functionality, and UI improvements
    
    - Add placeholder text to editor ("write here, I am listening...")
    - Create calendar view with fake writing entries
    - Implement analysis view with 5 pages:
      - Page 0: Sticky notes for actionable nudges
      - Page 1-3: Placeholders for future features
      - Page 4: Diary Q&A chat interface
    - Fix voice name display (show user-friendly names instead of keys)
    - Fix Use Default button with deep copy to force re-render
    - Add save feedback with green button animation
    - Implement quote functionality for comments
    - Improve quote button styling (circular, hidden by default, shows on hover)
    - Add HTML blockquote rendering for quoted comments
    
    ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
    
    Co-Authored-By: Claude <noreply@anthropic.com>

diff --git a/CLAUDE.md b/CLAUDE.md
new file mode 100644
index 0000000..6bc5cc2
--- /dev/null
+++ b/CLAUDE.md
@@ -0,0 +1,278 @@
+# Ink & Memory - Development & Deployment Guide
+
+## ğŸš€ Deployment to Production
+
+### Prerequisites
+- SSH access to Alibaba Cloud server (101.201.227.31)
+- SSH key at `~/Codebase/serverManagement/keys/Jeffry.pem`
+- Local development environment with Node.js and Python
+
+### Complete Deployment Process
+
+Run these commands from your local machine to deploy both frontend and backend:
+
+```bash
+# 1. Build Frontend
+cd /Users/lexicalmathical/Codebase/ink-and-memory/frontend
+npm run build
+
+# 2. Deploy Frontend
+scp -i ~/Codebase/serverManagement/keys/Jeffry.pem -r dist/* \
+  root@101.201.227.31:/var/www/lexicalmathical.com/ink-and-memory/
+
+# Fix permissions
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 \
+  "chown -R www-data:www-data /var/www/lexicalmathical.com/ink-and-memory/"
+
+# 3. Update PolyCLI (if needed)
+cd ~/Codebase/PolyCLI
+tar czf /tmp/polycli.tar.gz src/ pyproject.toml README.md
+
+scp -i ~/Codebase/serverManagement/keys/Jeffry.pem /tmp/polycli.tar.gz \
+  root@101.201.227.31:/tmp/
+
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 "
+  mkdir -p /tmp/PolyCLI &&
+  cd /tmp && tar xzf polycli.tar.gz -C /tmp/PolyCLI &&
+  cd /root/ink-and-memory/backend && source .venv/bin/activate &&
+  pip install --upgrade /tmp/PolyCLI/
+"
+
+# 4. Deploy Backend
+cd ~/Codebase/ink-and-memory/backend
+scp -i ~/Codebase/serverManagement/keys/Jeffry.pem *.py \
+  root@101.201.227.31:/root/ink-and-memory/backend/
+
+# 5. Restart Backend Server
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 "
+  tmux send-keys -t ink-and-memory:0 C-c
+  sleep 2
+  tmux send-keys -t ink-and-memory:0 'cd /root/ink-and-memory/backend && source .venv/bin/activate && OPENAI_API_KEY=sk-yz0JLc7sGbCHnwam70Bc9e29Dc684bAe904102C95dF32fB1 OPENAI_BASE_URL=https://api.dou.chat/v1 python server.py' Enter
+"
+```
+
+### Verify Deployment
+
+```bash
+# Check backend is running
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 \
+  "lsof -i :8765"
+
+# Check frontend files
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 \
+  "ls -lh /var/www/lexicalmathical.com/ink-and-memory/"
+
+# Test live URLs
+curl -I https://lexicalmathical.com/ink-and-memory/
+curl -s https://lexicalmathical.com/ink-and-memory/api/sessions | jq
+```
+
+### Production URLs
+- **App**: https://lexicalmathical.com/ink-and-memory/
+- **API**: https://lexicalmathical.com/ink-and-memory/api/
+- **Control Panel**: https://lexicalmathical.com/ink-and-memory/control-panel
+
+## ğŸ—ï¸ Architecture
+
+### Frontend (React + TypeScript + Vite)
+- **Location**: `/Users/lexicalmathical/Codebase/ink-and-memory/frontend/`
+- **Build Output**: `dist/` (generated by `npm run build`)
+- **Deployment**: Static files served by nginx from `/var/www/lexicalmathical.com/ink-and-memory/`
+- **Base Path**: `/ink-and-memory/` (configured in `vite.config.ts`)
+
+### Backend (Python + PolyCLI)
+- **Location**: `/Users/lexicalmathical/Codebase/ink-and-memory/backend/`
+- **Server Location**: `/root/ink-and-memory/backend/` on Alibaba Cloud
+- **Port**: 8765 (proxied through nginx)
+- **Environment**: Python virtual environment at `.venv/`
+- **Managed by**: tmux session `ink-and-memory:0`
+
+### Key Configuration Files
+
+**Frontend - `vite.config.ts`:**
+```typescript
+export default defineConfig({
+  plugins: [react()],
+  base: '/ink-and-memory/',  // CRITICAL: Must match deployment path
+  server: {
+    proxy: {
+      '/ink-and-memory/api': {
+        target: 'http://localhost:8765',
+        changeOrigin: true,
+        rewrite: (path) => path.replace(/^\/ink-and-memory/, '')
+      }
+    }
+  }
+})
+```
+
+**Frontend - `src/api/voiceApi.ts`:**
+```typescript
+const API_BASE = '/ink-and-memory';  // Production: nginx proxies to backend
+```
+
+**Backend - `server.py`:**
+```python
+# Uses PolyCLI session registry
+# Runs on port 8765
+# Environment variables required:
+# - OPENAI_API_KEY
+# - OPENAI_BASE_URL
+```
+
+## ğŸ”§ Development
+
+### Local Development Setup
+
+**Frontend:**
+```bash
+cd frontend
+npm install
+npm run dev
+# Runs on http://localhost:5173
+```
+
+**Backend:**
+```bash
+cd backend
+uv venv
+source .venv/bin/activate  # or .venv/Scripts/activate on Windows
+
+# Install PolyCLI
+cd ~/Codebase/PolyCLI
+uv pip install -e .
+
+cd ~/Codebase/ink-and-memory/backend
+uv pip install beautifulsoup4 requests 'httpx[socks]'
+
+# Create models.json with API config
+python server.py
+# Runs on http://localhost:8765
+```
+
+### API Configuration
+
+Create `backend/models.json`:
+```json
+{
+  "models": {
+    "gpt-4o-dou": {
+      "endpoint": "https://api.dou.chat/v1",
+      "api_key": "sk-yz0JLc7sGbCHnwam70Bc9e29Dc684bAe904102C95dF32fB1",
+      "model": "openai/chatgpt-4o-latest"
+    }
+  }
+}
+```
+
+## ğŸ“ Key Features & Implementation
+
+### Energy Pool Trigger System (v1.2.0)
+- **Location**: `frontend/src/App.tsx`
+- **How it works**:
+  - Tracks weighted character count between polling intervals (every 5 seconds)
+  - Accumulates energy when text increases
+  - Triggers backend analysis when energy >= 40
+  - Consumes 40 energy per request, preserves remainder
+  - Ignores deletions (negative weight changes)
+
+**Weighting System:**
+- CJK characters (Chinese/Japanese/Korean): 2 weight
+- Sentence punctuation (.!?ã€‚ï¼ï¼Ÿ\n): 4 weight
+- Chinese comma (ï¼Œ): 0 weight (ignored)
+- Other characters: 1 weight
+
+### Stateful Voice Analysis
+- **Location**: `backend/stateful_analyzer.py`
+- **Features**:
+  - Session-based state management (UUID isolation)
+  - Pruning of deleted comments
+  - Density enforcement (1 comment per sentence)
+  - No debouncing (allows multiple LLM calls on same text)
+  - Removed "one persona only once" restriction
+
+### Voice Customization
+- **Location**: `frontend/src/components/VoiceSettings.tsx`
+- **Features**:
+  - Full CRUD for voice personas
+  - Import/Export JSON configurations
+  - Text-based icon/color selection (not emoji/hex)
+  - localStorage persistence
+  - Reset to defaults
+
+## ğŸ› Troubleshooting
+
+### Frontend not updating after deployment
+```bash
+# Clear browser cache (Cmd+Shift+R on Mac)
+# OR rebuild from scratch:
+cd frontend
+rm -rf dist/
+npm run build
+# Redeploy...
+```
+
+### Backend API returns 502 Bad Gateway
+```bash
+# Check if backend is running
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 \
+  "lsof -i :8765"
+
+# View backend logs
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 \
+  "tmux attach -t ink-and-memory:0"
+
+# Restart backend (see deployment commands above)
+```
+
+### PolyCLI updates not taking effect
+```bash
+# Ensure you're updating the correct virtual environment
+# Redeploy PolyCLI and restart backend completely
+```
+
+## ğŸ“Š Monitoring
+
+### Check Backend Logs
+```bash
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 \
+  "tmux capture-pane -t ink-and-memory:0 -p | tail -50"
+```
+
+### Check Active Sessions
+```bash
+curl -s https://lexicalmathical.com/ink-and-memory/api/sessions | jq
+```
+
+### Check Server Status
+```bash
+ssh -i ~/Codebase/serverManagement/keys/Jeffry.pem root@101.201.227.31 "
+  echo '=== Backend Process ==='
+  lsof -i :8765
+
+  echo -e '\n=== nginx Status ==='
+  systemctl status nginx --no-pager | head -5
+
+  echo -e '\n=== Disk Usage ==='
+  df -h /var/www
+"
+```
+
+## ğŸ” Security Notes
+
+- **API Key**: Stored in environment variable on server (not in code)
+- **File Permissions**:
+  - Frontend: `www-data:www-data` (nginx user)
+  - Backend: `root:root` (not web-accessible)
+- **HTTPS**: All traffic encrypted via Let's Encrypt
+- **Session Isolation**: UUID-based with TTL cleanup
+
+## ğŸ“š Related Documentation
+
+- **Server Infrastructure**: `~/Codebase/serverManagement/CLAUDE.md`
+- **README**: `README.md` (user-facing documentation)
+- **PolyCLI**: `~/Codebase/PolyCLI/README.md`
+
+---
+*Last updated: 2025-10-21*
+*Version: v1.2.0-energy-pool*
diff --git a/backend/server.py b/backend/server.py
index d7c7a94..8e1dbe2 100644
--- a/backend/server.py
+++ b/backend/server.py
@@ -5,14 +5,19 @@ import time
 from polycli.orchestration.session_registry import session_def, get_registry
 from polycli import PolyAgent
 from stateful_analyzer import analyze_stateful
+import config
 
 @session_def(
     name="Analyze Voices",
     description="Detect inner voices in text using Disco Elysium archetypes",
-    params={"text": str, "session_id": str},
+    params={
+        "text": {"type": "str"},
+        "session_id": {"type": "str"},
+        "voices": {"type": "dict"}
+    },
     category="Analysis"
 )
-def analyze_text(text: str, session_id: str):
+def analyze_text(text: str, session_id: str, voices: dict = None):
     """
     Analyze text and detect inner voice triggers.
 
@@ -33,14 +38,15 @@ def analyze_text(text: str, session_id: str):
     agent = PolyAgent(id="voice-analyzer")
 
     print("Calling analyze_stateful pattern...")
-    voices = analyze_stateful(agent, text, session_id)
+    custom_voices = voices or config.VOICE_ARCHETYPES
+    result_voices = analyze_stateful(agent, text, session_id, custom_voices)
 
-    print(f"âœ… Got {len(voices)} voices")
-    for i, v in enumerate(voices):
+    print(f"âœ… Got {len(result_voices)} voices")
+    for i, v in enumerate(result_voices):
         print(f"   {i+1}. {v.get('voice', 'unknown')}: {v.get('comment', '')[:50]}...")
 
     result = {
-        "voices": voices,
+        "voices": result_voices,
         "status": "completed",
         "text_length": len(text)
     }
@@ -58,7 +64,24 @@ if __name__ == "__main__":
     print("\n" + "="*60)
     print("ğŸ­ Voice Analysis Server")
     print("="*60)
-    registry.serve_control_panel(port=8765)
+
+    # Monkey-patch the handler to add /api/default-voices endpoint
+    server, thread = registry.serve_control_panel(port=8765)
+
+    original_do_get = server.RequestHandlerClass.do_GET
+    def patched_do_get(handler_self):
+        if handler_self.path == "/api/default-voices":
+            import json
+            body = json.dumps(config.VOICE_ARCHETYPES).encode("utf-8")
+            handler_self.send_response(200)
+            handler_self.send_header("Content-Type", "application/json")
+            handler_self.send_header("Access-Control-Allow-Origin", "*")
+            handler_self.end_headers()
+            handler_self.wfile.write(body)
+        else:
+            original_do_get(handler_self)
+
+    server.RequestHandlerClass.do_GET = patched_do_get
 
     print("\nğŸ“š Available endpoints:")
     print("  - POST /api/trigger")
diff --git a/backend/stateful_analyzer.py b/backend/stateful_analyzer.py
index bcea6ae..53cff6a 100644
--- a/backend/stateful_analyzer.py
+++ b/backend/stateful_analyzer.py
@@ -44,9 +44,9 @@ class StatefulVoiceAnalyzer:
 
     def _get_sentences(self, text: str) -> list[str]:
         """Split text into sentences (supports English and Chinese)."""
-        # @@@ multilingual-sentence-split - English: .!? Chinese: ã€‚ï¼ï¼Ÿ
+        # @@@ multilingual-sentence-split - English: .!? Chinese: ã€‚ï¼ï¼Ÿï¼Œ
         # Also treat newlines as sentence boundaries
-        sentences = re.split(r'[.!?ã€‚ï¼ï¼Ÿ]+|\n+', text)
+        sentences = re.split(r'[.!?ã€‚ï¼ï¼Ÿï¼Œ]+|\n+', text)
         return [s.strip() for s in sentences if s.strip()]
 
     def _get_commented_regions(self, text: str) -> list[tuple[int, int]]:
@@ -69,8 +69,7 @@ class StatefulVoiceAnalyzer:
     def _enforce_density(self, new_comments: list[dict], text: str) -> list[dict]:
         """
         Enforce density rules:
-        1. Max 1 comment per persona across whole text
-        2. Max 1 persona per sentence
+        1. Max 1 persona per sentence
         """
         # Get sentence boundaries
         sentences = self._get_sentences(text)
@@ -82,9 +81,6 @@ class StatefulVoiceAnalyzer:
                 sentence_positions.append((start, start + len(sent), sent))
                 pos = start + len(sent)
 
-        # Track which personas are already used
-        used_personas = {c["voice"] for c in self.comments}
-
         # Track which sentences have comments
         sentence_has_comment = [False] * len(sentence_positions)
         for comment in self.comments:
@@ -101,11 +97,7 @@ class StatefulVoiceAnalyzer:
             voice = comment["voice"]
             phrase = comment["phrase"]
 
-            # Rule 1: Only 1 comment per persona
-            if voice in used_personas:
-                continue
-
-            # Rule 2: Only 1 comment per sentence
+            # Rule: Only 1 comment per sentence
             phrase_pos = text.lower().find(phrase.lower())
             if phrase_pos == -1:
                 continue
@@ -122,14 +114,13 @@ class StatefulVoiceAnalyzer:
 
             # Accept this comment
             filtered.append(comment)
-            used_personas.add(voice)
             if comment_sentence_idx is not None:
                 sentence_has_comment[comment_sentence_idx] = True
 
         return filtered
 
     @pattern
-    def analyze(self, agent: PolyAgent, text: str) -> list[dict]:
+    def analyze(self, agent: PolyAgent, text: str, voices: dict = None) -> list[dict]:
         """
         Analyze text and return ALL comments (existing + new).
 
@@ -157,16 +148,15 @@ class StatefulVoiceAnalyzer:
             print("â­ï¸  Text too short, returning existing comments")
             return self.comments
 
-        # Check if text changed significantly
-        text_diff = abs(len(text) - len(self.last_text))
-        if text_diff < 10 and self.comments:
-            print(f"â­ï¸  Text change too small ({text_diff} chars), returning existing")
-            return self.comments
+        # @@@ Removed debouncing - allow multiple LLM calls on same text
+        # This enables energy pool to trigger multiple times and get different comments
+        # The LLM prompt includes existing comments, so it will return new ones
 
         # Step 3: Build prompt with existing comments
+        voice_archetypes = voices or config.VOICE_ARCHETYPES
         voice_list = "\n".join([
             f"- {name} ({v['icon']}, {v['color']}): {v['tagline']}"
-            for name, v in config.VOICE_ARCHETYPES.items()
+            for name, v in voice_archetypes.items()
         ])
 
         # @@@ Build list of occupied sentences AND used personas to guide LLM
@@ -192,15 +182,8 @@ class StatefulVoiceAnalyzer:
                             occupied_sentences.add(i)
                             break
 
-            # Build summary with used personas and occupied sentences
-            used_personas = {c['voice'] for c in self.comments}
-
-            existing_summary = "\n\nâš ï¸  ALREADY USED PERSONAS (DO NOT USE THESE AGAIN - each persona can only appear ONCE):\n"
-            for persona in sorted(used_personas):
-                existing_summary += f"  - {persona}\n"
-            existing_summary += "ğŸ‘‰ You MUST choose a persona that is NOT in the list above!\n"
-
-            existing_summary += "\n\nEXISTING COMMENTS:\n"
+            # Build summary with occupied sentences
+            existing_summary = "\n\nEXISTING COMMENTS:\n"
             for c in self.comments:
                 existing_summary += f"- {c['voice']} commented on phrase \"{c['phrase']}\": {c['comment']}\n"
 
@@ -301,6 +284,15 @@ IMPORTANT:
 
         print(f"âœ… LLM returned {len(new_voices)} new comments")
 
+        # @@@ Override LLM's icon/color with actual config values, and use user-friendly name
+        for v in new_voices:
+            if v and v.get("voice") in voice_archetypes:
+                archetype_key = v["voice"]
+                v["icon"] = voice_archetypes[archetype_key]["icon"]
+                v["color"] = voice_archetypes[archetype_key]["color"]
+                # Replace key with user-friendly name (e.g., "Composure" -> "å¦ä¸€ä¸ªæˆ‘")
+                v["voice"] = voice_archetypes[archetype_key].get("name", archetype_key)
+
         # Step 4: Enforce density rules
         filtered_voices = self._enforce_density(new_voices, text)
         print(f"ğŸ“ After density filter: {len(filtered_voices)} comments")
@@ -351,10 +343,10 @@ def get_analyzer(session_id: str) -> StatefulVoiceAnalyzer:
 
     return _user_analyzers[session_id]
 
-def analyze_stateful(agent: PolyAgent, text: str, session_id: str) -> list[dict]:
+def analyze_stateful(agent: PolyAgent, text: str, session_id: str, voices: dict = None) -> list[dict]:
     """Analyze text using session-isolated analyzer."""
     # Cleanup stale sessions before processing
     cleanup_stale_sessions()
 
     analyzer = get_analyzer(session_id)
-    return analyzer.analyze(agent, text)
+    return analyzer.analyze(agent, text, voices)
diff --git a/frontend/package-lock.json b/frontend/package-lock.json
index da6f6de..311593e 100644
--- a/frontend/package-lock.json
+++ b/frontend/package-lock.json
@@ -9,6 +9,7 @@
       "version": "0.0.0",
       "dependencies": {
         "@tiptap/extension-highlight": "^3.6.2",
+        "@tiptap/extension-placeholder": "^3.7.2",
         "@tiptap/react": "^3.6.2",
         "@tiptap/starter-kit": "^3.6.2",
         "react": "^19.1.1",
@@ -1397,16 +1398,16 @@
       ]
     },
     "node_modules/@tiptap/core": {
-      "version": "3.6.2",
-      "resolved": "https://registry.npmjs.org/@tiptap/core/-/core-3.6.2.tgz",
-      "integrity": "sha512-XKZYrCVFsyQGF6dXQR73YR222l/76wkKfZ+2/4LCrem5qtcOarmv5pYxjUBG8mRuBPskTTBImSFTeQltJIUNCg==",
+      "version": "3.7.2",
+      "resolved": "https://registry.npmjs.org/@tiptap/core/-/core-3.7.2.tgz",
+      "integrity": "sha512-fJwNpTx0aq4UU0HNkxPvPYfNBcTHQ/q5xBUdOB5Mgu6clwGES38jVsNNSudB8g53APUmJIS+2fJbkxl3V+0jww==",
       "license": "MIT",
       "funding": {
         "type": "github",
         "url": "https://github.com/sponsors/ueberdosis"
       },
       "peerDependencies": {
-        "@tiptap/pm": "^3.6.2"
+        "@tiptap/pm": "^3.7.2"
       }
     },
     "node_modules/@tiptap/extension-blockquote": {
@@ -1697,6 +1698,19 @@
         "@tiptap/core": "^3.6.2"
       }
     },
+    "node_modules/@tiptap/extension-placeholder": {
+      "version": "3.7.2",
+      "resolved": "https://registry.npmjs.org/@tiptap/extension-placeholder/-/extension-placeholder-3.7.2.tgz",
+      "integrity": "sha512-YUr1rlxkgEBQDsMLpU8ruA4Uet37kXvwwFwIbDgaFd4NpfAD0fvX2zmPhHIBzsdH3e4V6eNp6IkmoYCWvugAAA==",
+      "license": "MIT",
+      "funding": {
+        "type": "github",
+        "url": "https://github.com/sponsors/ueberdosis"
+      },
+      "peerDependencies": {
+        "@tiptap/extensions": "^3.7.2"
+      }
+    },
     "node_modules/@tiptap/extension-strike": {
       "version": "3.6.2",
       "resolved": "https://registry.npmjs.org/@tiptap/extension-strike/-/extension-strike-3.6.2.tgz",
@@ -1737,23 +1751,23 @@
       }
     },
     "node_modules/@tiptap/extensions": {
-      "version": "3.6.2",
-      "resolved": "https://registry.npmjs.org/@tiptap/extensions/-/extensions-3.6.2.tgz",
-      "integrity": "sha512-tg7/DgaI6SpkeawryapUtNoBxsJUMJl3+nSjTfTvsaNXed+BHzLPsvmPbzlF9ScrAbVEx8nj6CCkneECYIQ4CQ==",
+      "version": "3.7.2",
+      "resolved": "https://registry.npmjs.org/@tiptap/extensions/-/extensions-3.7.2.tgz",
+      "integrity": "sha512-FaToSdU9fhQk2swkaXrAQNgdaE0dwLbUHcvilW5F4xTpQfZ3J535u5U2TUYf+f9KKSV5fTmD4QGNY9qxY7ihTg==",
       "license": "MIT",
       "funding": {
         "type": "github",
         "url": "https://github.com/sponsors/ueberdosis"
       },
       "peerDependencies": {
-        "@tiptap/core": "^3.6.2",
-        "@tiptap/pm": "^3.6.2"
+        "@tiptap/core": "^3.7.2",
+        "@tiptap/pm": "^3.7.2"
       }
     },
     "node_modules/@tiptap/pm": {
-      "version": "3.6.2",
-      "resolved": "https://registry.npmjs.org/@tiptap/pm/-/pm-3.6.2.tgz",
-      "integrity": "sha512-g+NXjqjbj6NfHOMl22uNWVYIu8oCq7RFfbnpohPMsSKJLaHYE8mJR++7T6P5R9FoqhIFdwizg1jTpwRU5CHqXQ==",
+      "version": "3.7.2",
+      "resolved": "https://registry.npmjs.org/@tiptap/pm/-/pm-3.7.2.tgz",
+      "integrity": "sha512-i2fvXDapwo/TWfHM6STYEbkYyF3qyfN6KEBKPrleX/Z80G5bLxom0gB79TsjLNxTLi6mdf0vTHgAcXMG1avc2g==",
       "license": "MIT",
       "dependencies": {
         "prosemirror-changeset": "^2.3.0",
diff --git a/frontend/package.json b/frontend/package.json
index fb60463..8f601d9 100644
--- a/frontend/package.json
+++ b/frontend/package.json
@@ -11,6 +11,7 @@
   },
   "dependencies": {
     "@tiptap/extension-highlight": "^3.6.2",
+    "@tiptap/extension-placeholder": "^3.7.2",
     "@tiptap/react": "^3.6.2",
     "@tiptap/starter-kit": "^3.6.2",
     "react": "^19.1.1",
diff --git a/frontend/src/App.css b/frontend/src/App.css
index 73ea2ce..ce3ed02 100644
--- a/frontend/src/App.css
+++ b/frontend/src/App.css
@@ -15,15 +15,17 @@
 }
 
 .book-interface {
+  position: fixed;
+  top: 60px;
+  left: 0;
+  right: 0;
+  bottom: 0;
   display: flex;
-  width: 100vw;
-  height: 100vh;
   background-color: #f5e6d3;
-  padding: 2rem;
+  padding: 1rem 2rem 2rem 2rem;
   gap: 2rem;
   box-sizing: border-box;
   overflow: hidden;
-  position: relative;
 
   /* Binder ring configuration */
   --gap-size: 1.5rem;
@@ -40,6 +42,8 @@
   border: 1px solid #ccc;
   border-radius: 4px;
   position: relative;
+  overflow: hidden;
+  min-height: 0; /* Allow flex children to shrink */
 }
 
 .book-page.right-page {
@@ -69,18 +73,23 @@
   box-sizing: border-box;
   display: flex;
   flex-direction: column;
+  overflow: hidden;
 }
 
 .editable-text-area > div {
   flex: 1;
   display: flex;
   flex-direction: column;
+  min-height: 0;
+  overflow: hidden;
 }
 
 .editable-text-area .tiptap {
   flex: 1;
   display: flex;
   flex-direction: column;
+  min-height: 0;
+  overflow: hidden;
 }
 
 .editable-text-area .ProseMirror {
@@ -95,6 +104,14 @@
   outline: none;
   box-sizing: border-box;
   cursor: text;
+  overflow-y: auto;
+  overflow-x: hidden;
+  scrollbar-width: none; /* Firefox */
+  -ms-overflow-style: none; /* IE/Edge */
+}
+
+.editable-text-area .ProseMirror::-webkit-scrollbar {
+  display: none; /* Chrome/Safari */
 }
 
 .editable-text-area .ProseMirror p {
@@ -105,6 +122,25 @@
   margin-top: 0;
 }
 
+/* Placeholder styling */
+.editable-text-area .ProseMirror p.is-editor-empty:first-child::before {
+  content: attr(data-placeholder);
+  color: #aaa;
+  pointer-events: none;
+  height: 0;
+  float: left;
+}
+
+/* Blockquote styling for quoted comments */
+.editable-text-area .ProseMirror blockquote {
+  margin: 1rem 0;
+  padding: 0.5rem 1rem;
+  border-left: 4px solid #8b7355;
+  background: #f9f5ed;
+  font-style: italic;
+  color: #555;
+}
+
 .voice-comment {
   padding: 1rem;
   border-left: 4px solid;
@@ -119,6 +155,10 @@
   max-width: 100%;
 }
 
+.voice-comment:hover .quote-button {
+  opacity: 1 !important;
+}
+
 .voice-header {
   display: flex;
   align-items: center;
diff --git a/frontend/src/App.tsx b/frontend/src/App.tsx
index 26c4b87..0c1b465 100644
--- a/frontend/src/App.tsx
+++ b/frontend/src/App.tsx
@@ -1,11 +1,18 @@
 import { useState, useEffect, useRef } from 'react'
 import './App.css'
 import WritingArea from './components/WritingArea'
+import type { EditableTextAreaRef } from './components/EditableTextArea'
 import VoicesPanel from './components/VoicesPanel'
 import VoiceComment from './components/VoiceComment'
 import BinderRings from './components/BinderRings'
+import VoiceSettings from './components/VoiceSettings'
+import CalendarView from './components/CalendarView'
+import AnalysisView from './components/AnalysisView'
+import LeftSidebar from './components/LeftSidebar'
 import type { VoiceTrigger } from './extensions/VoiceHighlight'
-import { analyzeText } from './api/voiceApi'
+import type { VoiceConfig } from './types/voice'
+import { analyzeText, getDefaultVoices } from './api/voiceApi'
+import { getVoices } from './utils/voiceStorage'
 
 interface Voice {
   name: string;
@@ -32,20 +39,47 @@ function App() {
       : generateUUID()
   ).current;
 
-  // @@@ Version logging for cache debugging
+  // @@@ Version logging and initialize default voices from backend
   useEffect(() => {
-    console.log('ğŸ­ Ink & Memory - Version: v1.1.0-weighted-40');
-    console.log('ğŸ“Š Analysis trigger threshold: 40 weight units (~40 English chars OR ~13 Chinese chars)');
-  }, []);
+    console.log('ğŸ­ Ink & Memory - Version: v1.2.0-energy-pool');
+    console.log('âš¡ Energy pool trigger: accumulate weight changes, trigger at 40 energy');
+    console.log('ğŸ“ Weights: CJK=2, punctuation(.!?ã€‚ï¼ï¼Ÿï¼Œ\\n)=4, other=1');
+    console.log('ğŸ”’ Single-threaded: max 1 backend request at a time');
 
+    // Fetch default voices from backend
+    getDefaultVoices().then(backendVoices => {
+      // Convert backend format to frontend VoiceConfig format (keep text names)
+      const converted: Record<string, VoiceConfig> = {};
+      for (const [name, data] of Object.entries(backendVoices)) {
+        const v = data as any;
+        converted[name] = {
+          name,
+          systemPrompt: v.tagline,
+          enabled: true,
+          icon: v.icon,    // Keep text name: "brain"
+          color: v.color   // Keep text name: "blue"
+        };
+      }
+      // Use localStorage if exists, otherwise use backend defaults
+      setVoiceConfigs(getVoices() || converted);
+    });
+  }, [sessionId]);
+
+  const [currentView, setCurrentView] = useState<'writing' | 'settings' | 'calendar' | 'analysis'>('writing');
   const [voices, setVoices] = useState<Voice[]>([]);
   const [voiceTriggers, setVoiceTriggers] = useState<VoiceTrigger[]>([]);
+  const [voiceConfigs, setVoiceConfigs] = useState<Record<string, VoiceConfig>>({});
   const [currentText, setCurrentText] = useState<string>('');
+  const [currentHTML, setCurrentHTML] = useState<string>('');
   const [cursorPosition, setCursorPosition] = useState<number>(0);
   const [focusedVoiceIndex, setFocusedVoiceIndex] = useState<number | undefined>(undefined);
   const currentTextRef = useRef<string>('');
-  const lastAnalyzedTextRef = useRef<string>('');
   const isAnalyzingRef = useRef<boolean>(false);
+  const editorRef = useRef<EditableTextAreaRef>(null);
+
+  // @@@ Energy pool trigger system
+  const energyRef = useRef<number>(0);
+  const lastPollWeightRef = useRef<number>(0);
 
   const detectVoices = (text: string, triggers: VoiceTrigger[]) => {
     const newVoices: Voice[] = [];
@@ -86,17 +120,27 @@ function App() {
     setFocusedVoiceIndex(closestIndex);
   }, [cursorPosition, voices]);
 
-  // @@@ weighted-character-counting - English chars = 1 weight, CJK chars = 3 weight
-  // This elegantly balances both languages: ~30 English chars OR ~10 Chinese chars to trigger
+  // @@@ weighted-character-counting with punctuation bonus
+  // Sentence separators get high weight to encourage natural boundaries
   const getWeightedLength = (text: string): number => {
     let weight = 0;
 
     for (const char of text) {
-      // CJK characters (Chinese, Japanese, Korean)
-      if (/[\u4e00-\u9fa5\u3040-\u309f\u30a0-\u30ff]/.test(char)) {
-        weight += 3;  // Chinese character = 3 weight
-      } else {
-        weight += 1;  // English/other = 1 weight
+      // Sentence separators (English + Chinese) and newlines = 4 weight
+      if (/[.!?ã€‚ï¼ï¼Ÿ\n]/.test(char)) {
+        weight += 4;
+      }
+      // Chinese comma = 0 weight (ignored)
+      else if (char === 'ï¼Œ') {
+        weight += 0;
+      }
+      // CJK characters (Chinese, Japanese, Korean) = 2 weight
+      else if (/[\u4e00-\u9fa5\u3040-\u309f\u30a0-\u30ff]/.test(char)) {
+        weight += 2;
+      }
+      // English/other = 1 weight
+      else {
+        weight += 1;
       }
     }
 
@@ -104,30 +148,53 @@ function App() {
   };
 
   const analyzeIfNeeded = async () => {
-    // Skip if already analyzing
+    // Skip if already analyzing (single-threaded)
     if (isAnalyzingRef.current) {
       return;
     }
 
     const currentTextValue = currentTextRef.current;
-    const lastTextValue = lastAnalyzedTextRef.current;
-
     const currentWeight = getWeightedLength(currentTextValue);
-    const lastWeight = getWeightedLength(lastTextValue);
-    const weightDiff = Math.abs(currentWeight - lastWeight);
 
-    // Only analyze if text changed by >40 weight
-    // (~40 English chars OR ~13 Chinese chars OR mixed)
-    if (weightDiff <= 40) {
+    // Calculate weight difference since last poll
+    const weightDiff = currentWeight - lastPollWeightRef.current;
+
+    // Accumulate energy (only positive changes, ignore deletions)
+    if (weightDiff > 0) {
+      energyRef.current += weightDiff;
+      console.log(`âš¡ Energy accumulated: +${weightDiff} â†’ ${energyRef.current} total`);
+    }
+
+    // @@@ Update last poll weight ALWAYS (every cycle, even if negative)
+    lastPollWeightRef.current = currentWeight;
+
+    // Check if we have enough energy to trigger
+    if (energyRef.current < 40) {
       return;
     }
 
+    // Trigger backend request and consume energy
     isAnalyzingRef.current = true;
-    lastAnalyzedTextRef.current = currentTextValue;
+    energyRef.current -= 40;
+    const remainingEnergy = energyRef.current;
 
     try {
-      console.log(`ğŸ” Calling backend analysis (${weightDiff} weight units changed)...`);
-      const backendVoices = await analyzeText(currentTextValue, sessionId);
+      console.log(`ğŸ” Calling backend analysis (consumed 40 energy, ${remainingEnergy} remaining)...`);
+      console.log(`ğŸ“ Current voiceConfigs:`, voiceConfigs);
+      // Convert frontend VoiceConfig to backend format
+      const backendFormat: Record<string, any> = {};
+      for (const [name, cfg] of Object.entries(voiceConfigs)) {
+        if (cfg.enabled) {
+          backendFormat[name] = {
+            name: cfg.name,
+            tagline: cfg.systemPrompt,
+            icon: cfg.icon,
+            color: cfg.color
+          };
+        }
+      }
+      console.log(`ğŸ“¤ Sending to backend:`, backendFormat);
+      const backendVoices = await analyzeText(currentTextValue, sessionId, backendFormat);
       console.log(`âœ… Got ${backendVoices.length} voices from backend`);
 
       setVoiceTriggers(backendVoices);
@@ -140,10 +207,11 @@ function App() {
   };
 
   // @@@ Polling strategy - Check every 5 seconds (stable interval)
+  // Must include voiceConfigs in deps so interval uses latest config
   useEffect(() => {
     const interval = setInterval(analyzeIfNeeded, 5000);
     return () => clearInterval(interval);
-  }, []);
+  }, [voiceConfigs]);
 
   const handleTextChange = (newText: string) => {
     setCurrentText(newText);
@@ -153,25 +221,95 @@ function App() {
     detectVoices(newText, voiceTriggers);
   };
 
+  const handleContentChange = (newHTML: string) => {
+    setCurrentHTML(newHTML);
+  };
+
+  const handleQuote = (voiceName: string, comment: string) => {
+    // Format as HTML blockquote for TipTap
+    const quoteHTML = `<blockquote><strong>${voiceName}</strong>: ${comment}</blockquote><p></p>`;
+    editorRef.current?.insertText(quoteHTML);
+  };
+
   // @@@ Re-detect voices when triggers change
   useEffect(() => {
     detectVoices(currentText, voiceTriggers);
   }, [voiceTriggers]);
 
   return (
-    <div className="book-interface">
-      <WritingArea
-        onChange={handleTextChange}
-        triggers={voiceTriggers}
-        onCursorChange={setCursorPosition}
-      />
-      <VoicesPanel focusedVoiceIndex={focusedVoiceIndex}>
-        {voices.map((voice, index) => (
-          <VoiceComment key={index} voice={voice.name} text={voice.text} icon={voice.icon} color={voice.color} />
-        ))}
-      </VoicesPanel>
-      <BinderRings />
-    </div>
+    <>
+      <LeftSidebar currentView={currentView} onViewChange={setCurrentView} />
+      {currentView === 'writing' && (
+        <div className="book-interface">
+          <WritingArea
+            ref={editorRef}
+            onChange={handleTextChange}
+            onContentChange={handleContentChange}
+            triggers={voiceTriggers}
+            onCursorChange={setCursorPosition}
+            content={currentHTML}
+          />
+          <VoicesPanel focusedVoiceIndex={focusedVoiceIndex}>
+            {voices.map((voice, index) => (
+              <VoiceComment
+                key={index}
+                voice={voice.name}
+                text={voice.text}
+                icon={voice.icon}
+                color={voice.color}
+                onQuote={() => handleQuote(voice.name, voice.text)}
+              />
+            ))}
+          </VoicesPanel>
+          <BinderRings />
+        </div>
+      )}
+      {currentView === 'settings' && (
+        <div style={{
+          position: 'fixed',
+          top: 60,
+          left: 0,
+          right: 0,
+          bottom: 0,
+          background: '#f5e6d3',
+          display: 'flex',
+          overflow: 'hidden'
+        }}>
+          <VoiceSettings
+            defaultVoices={voiceConfigs}
+            onSave={setVoiceConfigs}
+          />
+        </div>
+      )}
+      {currentView === 'calendar' && (
+        <div style={{
+          position: 'fixed',
+          top: 60,
+          left: 0,
+          right: 0,
+          bottom: 0,
+          background: '#f5e6d3',
+          display: 'flex',
+          overflow: 'hidden'
+        }}>
+          <CalendarView />
+        </div>
+      )}
+      {currentView === 'analysis' && (
+        <div style={{
+          position: 'fixed',
+          top: 60,
+          left: 0,
+          right: 0,
+          bottom: 0,
+          background: '#f5e6d3',
+          display: 'flex',
+          overflow: 'hidden'
+        }}>
+          <AnalysisView />
+        </div>
+      )}
+    </>
   );
 }
 
diff --git a/frontend/src/api/voiceApi.ts b/frontend/src/api/voiceApi.ts
index 76ba8ab..e472be9 100644
--- a/frontend/src/api/voiceApi.ts
+++ b/frontend/src/api/voiceApi.ts
@@ -5,6 +5,14 @@
 // nginx proxies /ink-and-memory/api/* to backend (8765)
 const API_BASE = '/ink-and-memory';
 
+/**
+ * Get default voices from backend
+ */
+export async function getDefaultVoices(): Promise<any> {
+  const response = await fetch(`${API_BASE}/api/default-voices`);
+  return await response.json();
+}
+
 interface TriggerResponse {
   success: boolean;
   exec_id: string;
@@ -29,14 +37,14 @@ interface StatusResponse {
 /**
  * Trigger voice analysis session
  */
-export async function triggerAnalysis(text: string, sessionId: string): Promise<string> {
+export async function triggerAnalysis(text: string, sessionId: string, voices?: any): Promise<string> {
   console.log('ğŸ“¤ Sending trigger request...');
   const response = await fetch(`${API_BASE}/api/trigger`, {
     method: 'POST',
     headers: { 'Content-Type': 'application/json' },
     body: JSON.stringify({
       session_id: 'analyze_text',
-      params: { text, session_id: sessionId }
+      params: { text, session_id: sessionId, voices }
     })
   });
 
@@ -88,8 +96,8 @@ export async function getAnalysisResult(exec_id: string): Promise<StatusResponse
 /**
  * Analyze text and return voices (all-in-one)
  */
-export async function analyzeText(text: string, sessionId: string) {
-  const exec_id = await triggerAnalysis(text, sessionId);
+export async function analyzeText(text: string, sessionId: string, voices?: any) {
+  const exec_id = await triggerAnalysis(text, sessionId, voices);
   const result = await getAnalysisResult(exec_id);
   return result?.voices || [];
 }
diff --git a/frontend/src/components/AnalysisView.tsx b/frontend/src/components/AnalysisView.tsx
new file mode 100644
index 0000000..317dcfc
--- /dev/null
+++ b/frontend/src/components/AnalysisView.tsx
@@ -0,0 +1,207 @@
+import { useState } from 'react';
+
+export default function AnalysisView() {
+  const [currentPage, setCurrentPage] = useState(0);
+
+  const pages = [
+    { id: 0, name: 'è¡ŒåŠ¨å»ºè®®' },
+    { id: 1, name: 'è¡Œä¸ºæ¨¡å¼åˆ†æ' },
+    { id: 2, name: 'æ€§æ ¼ç‰¹å¾åˆ†æ' },
+    { id: 3, name: 'é‡å¤è¯é¢˜' },
+    { id: 4, name: 'æ—¥è®°åº“é—®ç­”' }
+  ];
+
+  return (
+    <div style={{
+      width: '100%',
+      height: '100%',
+      display: 'flex',
+      fontFamily: "'Excalifont', 'Xiaolai', 'Georgia', serif",
+      paddingTop: '2rem'
+    }}>
+      {/* Left sidebar - Page tabs */}
+      <div style={{
+        width: 200,
+        background: '#fffef9',
+        alignSelf: 'flex-start',
+        borderTop: '1px solid #d0c4b0',
+        borderBottom: '1px solid #d0c4b0'
+      }}>
+        {pages.map(page => (
+          <div
+            key={page.id}
+            onClick={() => setCurrentPage(page.id)}
+            style={{
+              padding: '1rem 1.5rem',
+              cursor: 'pointer',
+              background: currentPage === page.id ? '#f5e6d3' : 'transparent',
+              borderLeft: currentPage === page.id ? '4px solid #8b7355' : '4px solid transparent',
+              fontWeight: currentPage === page.id ? 600 : 400,
+              color: currentPage === page.id ? '#333' : '#666',
+              transition: 'all 0.2s'
+            }}
+            onMouseEnter={e => {
+              if (currentPage !== page.id) {
+                e.currentTarget.style.background = '#f9f5ed';
+              }
+            }}
+            onMouseLeave={e => {
+              if (currentPage !== page.id) {
+                e.currentTarget.style.background = 'transparent';
+              }
+            }}
+          >
+            {page.name}
+          </div>
+        ))}
+      </div>
+
+      {/* Right content area */}
+      <div style={{
+        flex: 1,
+        padding: '2rem',
+        overflowY: 'auto',
+        background: '#f5e6d3'
+      }}>
+        {currentPage === 0 && <Page0StickyNotes />}
+        {currentPage === 1 && <PlaceholderPage title="è¡Œä¸ºæ¨¡å¼åˆ†æ" />}
+        {currentPage === 2 && <PlaceholderPage title="æ€§æ ¼ç‰¹å¾åˆ†æ" />}
+        {currentPage === 3 && <PlaceholderPage title="é‡å¤å‡ºç°çš„è¯é¢˜" />}
+        {currentPage === 4 && <Page4ChatQA />}
+      </div>
+    </div>
+  );
+}
+
+// Page 0: Sticky notes with actionable nudges
+function Page0StickyNotes() {
+  const notes = [
+    { text: 'æ‰¾ä¸€ä¸ªæœ‹å‹èŠæŸä¸ªè¯é¢˜', color: '#FFF9BE', rotation: -2 },
+    { text: 'å†™ç¨‹åºå‰åœ¨çº¸ä¸Šå†™äº”åˆ†é’Ÿ', color: '#D4EAF1', rotation: 1 },
+    { text: 'é‡æ–°è¯»ä¸€éä½ åˆšå†™çš„æ–‡å­—', color: '#F1D4D4', rotation: -1 },
+    { text: 'ç»™è¿™æ®µæ–‡å­—èµ·ä¸ªæ ‡é¢˜', color: '#FFF9BE', rotation: 2 },
+    { text: 'é‚£ä¸ªç®€å•çš„ loopï¼Œå†çœ‹ä¸€çœ¼', color: '#D4EAF1', rotation: -3 },
+    { text: 'è¯•ç€æŠŠè¿™æ®µè¯è¯´ç»™è‡ªå·±å¬', color: '#F1D4D4', rotation: 1 }
+  ];
+
+  return (
+    <div style={{
+      display: 'grid',
+      gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
+      gap: '2rem',
+      padding: '2rem'
+    }}>
+      {notes.map((note, index) => (
+        <div
+          key={index}
+          style={{
+            width: 200,
+            height: 200,
+            background: note.color,
+            padding: '1.5rem',
+            boxShadow: '0 4px 8px rgba(0,0,0,0.15)',
+            transform: `rotate(${note.rotation}deg)`,
+            transition: 'all 0.2s',
+            cursor: 'pointer',
+            display: 'flex',
+            alignItems: 'center',
+            justifyContent: 'center',
+            textAlign: 'center',
+            fontSize: '1.1rem',
+            lineHeight: 1.6,
+            color: '#333'
+          }}
+          onMouseEnter={e => {
+            e.currentTarget.style.transform = `rotate(${note.rotation}deg) scale(1.05)`;
+            e.currentTarget.style.boxShadow = '0 6px 12px rgba(0,0,0,0.2)';
+          }}
+          onMouseLeave={e => {
+            e.currentTarget.style.transform = `rotate(${note.rotation}deg)`;
+            e.currentTarget.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
+          }}
+        >
+          {note.text}
+        </div>
+      ))}
+    </div>
+  );
+}
+
+// Placeholder for pages 1-3
+function PlaceholderPage({ title }: { title: string }) {
+  return (
+    <div style={{
+      padding: '4rem',
+      textAlign: 'center',
+      color: '#666'
+    }}>
+      <h2 style={{
+        fontSize: '2rem',
+        marginBottom: '1rem',
+        color: '#333'
+      }}>{title}</h2>
+      <p style={{ fontSize: '1.2rem' }}>Coming soon...</p>
+    </div>
+  );
+}
+
+// Page 4: Chat-style Q&A interface
+function Page4ChatQA() {
+  const conversations = [
+    { type: 'user', text: 'æˆ‘æœ€è¿‘å†™äº†ä»€ä¹ˆï¼Ÿ', name: 'ä½ ' },
+    { type: 'ai', text: 'ä½ å†™äº†ä¸€æ®µå…³äºæºä»£ç è´¬å€¼çš„æƒ³æ³•ã€‚', name: 'AI' },
+    { type: 'user', text: 'æˆ‘ä¸ºä»€ä¹ˆä¼šå¤±è½ï¼Ÿ', name: 'ä½ ' },
+    { type: 'ai', text: 'ä½ æåˆ°æ„Ÿè§‰è‡ªå·±ä¸å†è¢«éœ€è¦äº†ï¼ŒAI å¯ä»¥åšå¾—æ›´å¥½ã€‚è¿™ç§ä»"åˆ›é€ è€…"å˜æˆ"æ¬è¿å·¥"çš„è½å·®ï¼Œè®©ä½ å¤±è½ã€‚', name: 'AI' },
+    { type: 'user', text: 'è¢«éœ€è¦å¯¹æˆ‘æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ', name: 'ä½ ' },
+    { type: 'ai', text: 'ä»ä½ çš„æ–‡å­—æ¥çœ‹ï¼Œè¢«éœ€è¦æ„å‘³ç€ä½ çš„æ€è€ƒå’Œåˆ›é€ æ˜¯æœ‰ä»·å€¼çš„ï¼Œä¸åªæ˜¯æœºæ¢°åœ°æ¬è¿ä»£ç ã€‚é‚£ç§ä¸»åŠ¨æ€è€ƒã€åˆ›é€ çš„ä½“éªŒï¼Œå¯¹ä½ å¾ˆé‡è¦ã€‚', name: 'AI' }
+  ];
+
+  return (
+    <div style={{
+      maxWidth: 800,
+      margin: '0 auto',
+      padding: '2rem'
+    }}>
+      {conversations.map((conv, index) => (
+        <div key={index}>
+          <div style={{
+            display: 'flex',
+            gap: '1rem',
+            padding: '1.5rem 0',
+            alignItems: 'flex-start'
+          }}>
+            {/* Name on the left */}
+            <div style={{
+              fontSize: '1rem',
+              fontWeight: 600,
+              color: '#666',
+              flexShrink: 0,
+              minWidth: 40
+            }}>
+              {conv.name}
+            </div>
+
+            {/* Text content */}
+            <div style={{
+              flex: 1,
+              fontSize: '1.1rem',
+              lineHeight: 1.8,
+              color: '#333'
+            }}>
+              {conv.text}
+            </div>
+          </div>
+
+          {/* Subtle divider */}
+          {index < conversations.length - 1 && (
+            <div style={{
+              height: 1,
+              background: 'linear-gradient(to right, transparent, #d0c4b0 20%, #d0c4b0 80%, transparent)',
+              opacity: 0.3
+            }} />
+          )}
+        </div>
+      ))}
+    </div>
+  );
+}
diff --git a/frontend/src/components/CalendarView.tsx b/frontend/src/components/CalendarView.tsx
new file mode 100644
index 0000000..3bf4d53
--- /dev/null
+++ b/frontend/src/components/CalendarView.tsx
@@ -0,0 +1,169 @@
+export default function CalendarView() {
+  // Fake calendar data
+  const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
+  const currentMonth = new Date().getMonth();
+  const currentYear = new Date().getFullYear();
+  const currentDate = new Date().getDate();
+
+  // Generate days for current month
+  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
+  const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
+
+  // Fake writing entries (just for display)
+  const fakeEntries: Record<number, number> = {
+    3: 2, 5: 1, 8: 3, 12: 1, 15: 2, 18: 4, 21: 1, 25: 2
+  };
+
+  const days = [];
+  // Empty cells for days before month starts
+  for (let i = 0; i < firstDayOfMonth; i++) {
+    days.push(<div key={`empty-${i}`} style={{ padding: 12 }} />);
+  }
+  // Actual days
+  for (let day = 1; day <= daysInMonth; day++) {
+    const isToday = day === currentDate;
+    const hasEntries = fakeEntries[day];
+
+    days.push(
+      <div
+        key={day}
+        style={{
+          padding: 12,
+          textAlign: 'center',
+          borderRadius: 8,
+          background: isToday ? '#fffef9' : hasEntries ? '#f9f5ed' : 'transparent',
+          border: isToday ? '2px solid #333' : hasEntries ? '1px solid #d0c4b0' : '1px solid transparent',
+          cursor: hasEntries ? 'pointer' : 'default',
+          position: 'relative',
+          fontFamily: "'Excalifont', 'Xiaolai', 'Georgia', serif",
+          fontSize: 16,
+          fontWeight: isToday ? 600 : 400,
+          color: isToday ? '#333' : hasEntries ? '#555' : '#999',
+          transition: 'all 0.2s'
+        }}
+        onMouseEnter={e => {
+          if (hasEntries) {
+            e.currentTarget.style.background = '#fff';
+            e.currentTarget.style.transform = 'scale(1.05)';
+          }
+        }}
+        onMouseLeave={e => {
+          if (hasEntries) {
+            e.currentTarget.style.background = '#f9f5ed';
+            e.currentTarget.style.transform = 'scale(1)';
+          }
+        }}
+      >
+        {day}
+        {hasEntries && (
+          <div style={{
+            position: 'absolute',
+            bottom: 4,
+            left: '50%',
+            transform: 'translateX(-50%)',
+            display: 'flex',
+            gap: 2
+          }}>
+            {Array.from({ length: Math.min(hasEntries, 5) }).map((_, i) => (
+              <div
+                key={i}
+                style={{
+                  width: 4,
+                  height: 4,
+                  borderRadius: '50%',
+                  background: '#8b7355'
+                }}
+              />
+            ))}
+          </div>
+        )}
+      </div>
+    );
+  }
+
+  return (
+    <div style={{
+      width: '100%',
+      height: '100%',
+      display: 'flex',
+      flexDirection: 'column',
+      alignItems: 'center',
+      justifyContent: 'center',
+      padding: '2rem',
+      boxSizing: 'border-box'
+    }}>
+      <div style={{
+        maxWidth: 600,
+        width: '100%',
+        background: '#fffef9',
+        borderRadius: 8,
+        padding: '2rem',
+        border: '1px solid #d0c4b0',
+        boxShadow: '0 4px 12px rgba(0,0,0,0.1)'
+      }}>
+        {/* Header */}
+        <div style={{
+          textAlign: 'center',
+          marginBottom: '2rem',
+          fontFamily: "'Excalifont', 'Xiaolai', 'Georgia', serif",
+          fontSize: 24,
+          fontWeight: 600,
+          color: '#333'
+        }}>
+          {months[currentMonth]} {currentYear}
+        </div>
+
+        {/* Day headers */}
+        <div style={{
+          display: 'grid',
+          gridTemplateColumns: 'repeat(7, 1fr)',
+          gap: 4,
+          marginBottom: 8
+        }}>
+          {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
+            <div
+              key={day}
+              style={{
+                padding: 8,
+                textAlign: 'center',
+                fontFamily: "'Excalifont', 'Xiaolai', 'Georgia', serif",
+                fontSize: 14,
+                fontWeight: 600,
+                color: '#8b7355'
+              }}
+            >
+              {day}
+            </div>
+          ))}
+        </div>
+
+        {/* Calendar grid */}
+        <div style={{
+          display: 'grid',
+          gridTemplateColumns: 'repeat(7, 1fr)',
+          gap: 4
+        }}>
+          {days}
+        </div>
+
+        {/* Legend */}
+        <div style={{
+          marginTop: '2rem',
+          paddingTop: '1rem',
+          borderTop: '1px solid #d0c4b0',
+          display: 'flex',
+          gap: '1rem',
+          justifyContent: 'center',
+          fontSize: 14,
+          color: '#666',
+          fontFamily: "'Excalifont', 'Xiaolai', 'Georgia', serif"
+        }}>
+          <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>
+            <div style={{ width: 4, height: 4, borderRadius: '50%', background: '#8b7355' }} />
+            <span>Writing entry</span>
+          </div>
+        </div>
+      </div>
+    </div>
+  );
+}
diff --git a/frontend/src/components/EditableTextArea.tsx b/frontend/src/components/EditableTextArea.tsx
index fd53152..23c97b9 100644
--- a/frontend/src/components/EditableTextArea.tsx
+++ b/frontend/src/components/EditableTextArea.tsx
@@ -1,39 +1,69 @@
 import { useEditor, EditorContent } from '@tiptap/react';
-import { useEffect } from 'react';
+import { useEffect, forwardRef, useImperativeHandle } from 'react';
 import StarterKit from '@tiptap/starter-kit';
+import Placeholder from '@tiptap/extension-placeholder';
 import { VoiceHighlight, type VoiceTrigger } from '../extensions/VoiceHighlight';
 
 interface EditableTextAreaProps {
   onChange: (text: string) => void;
+  onContentChange?: (html: string) => void;
   triggers: VoiceTrigger[];
   onCursorChange?: (position: number) => void;
+  content?: string;
 }
 
-export default function EditableTextArea({ onChange, triggers, onCursorChange }: EditableTextAreaProps) {
-  const editor = useEditor({
-    extensions: [
-      StarterKit,
-      VoiceHighlight.configure({ triggers })
-    ],
-    onUpdate: ({ editor }) => {
-      onChange(editor.getText());
-      onCursorChange?.(editor.state.selection.from);
-    },
-    onSelectionUpdate: ({ editor }) => {
-      onCursorChange?.(editor.state.selection.from);
-    },
-    autofocus: true,
-  });
-
-  // @@@ Dynamic trigger updates - Update highlights when triggers change
-  useEffect(() => {
-    if (editor && editor.isEditable) {
-      // Force recalculation by creating a new transaction with meta
-      const tr = editor.state.tr;
-      tr.setMeta('voiceHighlight', { triggers });
-      editor.view.dispatch(tr);
-    }
-  }, [triggers, editor]);
-
-  return <div className="editable-text-area"><EditorContent editor={editor} /></div>;
-}
\ No newline at end of file
+export interface EditableTextAreaRef {
+  insertText: (text: string) => void;
+}
+
+const EditableTextArea = forwardRef<EditableTextAreaRef, EditableTextAreaProps>(
+  (props, ref) => {
+    const { onChange, onContentChange, triggers, onCursorChange, content } = props;
+
+    const editor = useEditor({
+      extensions: [
+        StarterKit,
+        Placeholder.configure({
+          placeholder: 'write here, I am listening...',
+        }),
+        VoiceHighlight.configure({ triggers })
+      ],
+      content: content || '',
+      onUpdate: ({ editor }) => {
+        onChange(editor.getText());
+        onContentChange?.(editor.getHTML());
+        onCursorChange?.(editor.state.selection.from);
+      },
+      onSelectionUpdate: ({ editor }) => {
+        onCursorChange?.(editor.state.selection.from);
+      },
+      autofocus: true,
+    });
+
+    // @@@ Dynamic trigger updates - Update highlights when triggers change
+    useEffect(() => {
+      if (editor && editor.isEditable) {
+        // Force recalculation by creating a new transaction with meta
+        const tr = editor.state.tr;
+        tr.setMeta('voiceHighlight', { triggers });
+        editor.view.dispatch(tr);
+      }
+    }, [triggers, editor]);
+
+    // Expose insertText method to parent component
+    useImperativeHandle(ref, () => ({
+      insertText: (text: string) => {
+        if (editor) {
+          // Insert text at current cursor position
+          editor.chain().focus().insertContent(text).run();
+        }
+      }
+    }), [editor]);
+
+    return <div className="editable-text-area"><EditorContent editor={editor} /></div>;
+  }
+);
+
+EditableTextArea.displayName = 'EditableTextArea';
+
+export default EditableTextArea;
diff --git a/frontend/src/components/LeftSidebar.tsx b/frontend/src/components/LeftSidebar.tsx
new file mode 100644
index 0000000..ee3946f
--- /dev/null
+++ b/frontend/src/components/LeftSidebar.tsx
@@ -0,0 +1,102 @@
+interface Props {
+  currentView: 'writing' | 'settings' | 'calendar' | 'analysis';
+  onViewChange: (view: 'writing' | 'settings' | 'calendar' | 'analysis') => void;
+}
+
+export default function LeftSidebar({ currentView, onViewChange }: Props) {
+  const buttonStyle = (isActive: boolean) => ({
+    width: 40,
+    height: 40,
+    borderRadius: '50%',
+    border: isActive ? '2px solid #333' : '1px solid #ccc',
+    background: isActive ? '#fffef9' : '#fff',
+    fontSize: 20,
+    cursor: 'pointer',
+    display: 'flex',
+    alignItems: 'center',
+    justifyContent: 'center',
+    transition: 'all 0.2s',
+    boxShadow: isActive ? '0 4px 8px rgba(0,0,0,0.15)' : '0 2px 4px rgba(0,0,0,0.1)'
+  });
+
+  return (
+    <div style={{
+      position: 'fixed',
+      left: 0,
+      top: 0,
+      right: 0,
+      height: 60,
+      background: '#f5e6d3',
+      display: 'flex',
+      flexDirection: 'row',
+      alignItems: 'center',
+      padding: '0 16px',
+      gap: 12,
+      zIndex: 999
+    }}>
+      <button
+        onClick={() => onViewChange('writing')}
+        style={buttonStyle(currentView === 'writing')}
+        title="Writing"
+      >
+        âœï¸
+      </button>
+
+      <button
+        onClick={() => onViewChange('settings')}
+        style={buttonStyle(currentView === 'settings')}
+        title="Settings"
+      >
+        âš™ï¸
+      </button>
+
+      <button
+        onClick={() => onViewChange('calendar')}
+        style={buttonStyle(currentView === 'calendar')}
+        title="Calendar"
+      >
+        ğŸ“…
+      </button>
+
+      <button
+        onClick={() => onViewChange('analysis')}
+        style={buttonStyle(currentView === 'analysis')}
+        title="Analysis"
+      >
+        ğŸ“Š
+      </button>
+
+      <a
+        href="https://github.com/shuxueshuxue/ink-and-memory"
+        target="_blank"
+        rel="noopener noreferrer"
+        style={{
+          width: 40,
+          height: 40,
+          borderRadius: '50%',
+          display: 'flex',
+          alignItems: 'center',
+          justifyContent: 'center',
+          background: '#fff',
+          border: '1px solid #ccc',
+          boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
+          transition: 'all 0.2s',
+          fontSize: 20,
+          textDecoration: 'none'
+        }}
+        onMouseEnter={e => {
+          e.currentTarget.style.transform = 'scale(1.1)';
+          e.currentTarget.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
+        }}
+        onMouseLeave={e => {
+          e.currentTarget.style.transform = 'scale(1)';
+          e.currentTarget.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
+        }}
+      >
+        <svg height="20" width="20" viewBox="0 0 16 16" fill="currentColor">
+          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
+        </svg>
+      </a>
+    </div>
+  );
+}
diff --git a/frontend/src/components/VoiceComment.tsx b/frontend/src/components/VoiceComment.tsx
index d2fc127..619b37e 100644
--- a/frontend/src/components/VoiceComment.tsx
+++ b/frontend/src/components/VoiceComment.tsx
@@ -5,6 +5,7 @@ interface VoiceCommentProps {
   text: string;
   icon: string;
   color: string;
+  onQuote?: () => void;
 }
 
 const iconMap = {
@@ -30,7 +31,7 @@ const colorMap: Record<string, { background: string; border: string }> = {
   purple: { background: '#f3e6ff', border: '#b366ff' },
 };
 
-export default function VoiceComment({ voice, text, icon, color }: VoiceCommentProps) {
+export default function VoiceComment({ voice, text, icon, color, onQuote }: VoiceCommentProps) {
   const Icon = iconMap[icon as keyof typeof iconMap];
   const colors = colorMap[color] || { background: '#f0f0f0', border: '#ccc' };
 
@@ -40,6 +41,7 @@ export default function VoiceComment({ voice, text, icon, color }: VoiceCommentP
       style={{
         backgroundColor: colors.background,
         borderColor: colors.border,
+        position: 'relative'
       }}
     >
       <div className="voice-header">
@@ -47,6 +49,43 @@ export default function VoiceComment({ voice, text, icon, color }: VoiceCommentP
         <strong>{voice}:</strong>
       </div>
       <div className="voice-text">{text}</div>
+      {onQuote && (
+        <button
+          onClick={onQuote}
+          style={{
+            position: 'absolute',
+            top: 8,
+            right: 8,
+            background: 'rgba(255, 255, 255, 0.9)',
+            border: 'none',
+            borderRadius: '50%',
+            width: 28,
+            height: 28,
+            fontSize: 18,
+            fontWeight: 'bold',
+            cursor: 'pointer',
+            color: '#666',
+            opacity: 0,
+            transition: 'all 0.2s',
+            display: 'flex',
+            alignItems: 'center',
+            justifyContent: 'center',
+            boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
+          }}
+          onMouseEnter={e => {
+            e.currentTarget.style.opacity = '1';
+            e.currentTarget.style.transform = 'scale(1.1)';
+          }}
+          onMouseLeave={e => {
+            e.currentTarget.style.opacity = '0';
+            e.currentTarget.style.transform = 'scale(1)';
+          }}
+          title="å¼•ç”¨åˆ°ç¼–è¾‘å™¨"
+          className="quote-button"
+        >
+          "
+        </button>
+      )}
     </div>
   );
 }
\ No newline at end of file
diff --git a/frontend/src/components/VoiceSettings.tsx b/frontend/src/components/VoiceSettings.tsx
new file mode 100644
index 0000000..c331807
--- /dev/null
+++ b/frontend/src/components/VoiceSettings.tsx
@@ -0,0 +1,192 @@
+import { useState, useEffect } from 'react';
+import type { VoiceConfig } from '../types/voice';
+import { getVoices, saveVoices, clearVoices } from '../utils/voiceStorage';
+
+// @@@ Display mappings (text name â†’ visual)
+const COLORS = {
+  'blue': { hex: '#4a90e2', label: 'Blue' },
+  'purple': { hex: '#9b59b6', label: 'Purple' },
+  'pink': { hex: '#e91e63', label: 'Pink' },
+  'green': { hex: '#27ae60', label: 'Green' },
+  'yellow': { hex: '#f39c12', label: 'Yellow' }
+};
+
+const ICONS = {
+  'brain': 'ğŸ§ ', 'lightbulb': 'ğŸ’¡', 'masks': 'ğŸ­', 'cloud': 'â˜ï¸',
+  'shield': 'ğŸ›¡ï¸', 'compass': 'ğŸ§­', 'heart': 'â¤ï¸', 'fist': 'âœŠ',
+  'fire': 'ğŸ”¥', 'wind': 'ğŸ’¨', 'question': 'â“', 'eye': 'ğŸ‘ï¸'
+};
+
+interface Props {
+  defaultVoices: Record<string, VoiceConfig>;
+  onSave: (voices: Record<string, VoiceConfig>) => void;
+}
+
+export default function VoiceSettings({ defaultVoices, onSave }: Props) {
+  const [voices, setVoices] = useState<Record<string, VoiceConfig>>({});
+  const [saveStatus, setSaveStatus] = useState<'idle' | 'saved'>('idle');
+
+  // @@@ Sync with defaultVoices prop (handles async fetch + Use Default button)
+  useEffect(() => {
+    if (Object.keys(defaultVoices).length > 0) {
+      const stored = getVoices();
+      setVoices(stored || defaultVoices);
+    }
+  }, [defaultVoices]);
+
+  const handleSave = () => {
+    saveVoices(voices);
+    onSave(voices);
+    setSaveStatus('saved');
+    setTimeout(() => setSaveStatus('idle'), 2000);
+  };
+
+  const handleDefault = () => {
+    clearVoices();
+    // Deep copy to force React to re-render
+    const freshDefaults = JSON.parse(JSON.stringify(defaultVoices));
+    setVoices(freshDefaults);
+    onSave(freshDefaults);
+  };
+
+  const handleAdd = () => {
+    const newId = `voice_${Date.now()}`;
+    setVoices({
+      ...voices,
+      [newId]: {
+        name: 'New Voice',
+        systemPrompt: 'Describe this voice...',
+        enabled: true,
+        icon: 'masks',
+        color: 'blue'
+      }
+    });
+  };
+
+  const handleDelete = (id: string) => {
+    const { [id]: _, ...rest } = voices;
+    setVoices(rest);
+  };
+
+  const handleRename = (id: string, newName: string) => {
+    // Just update the name, keep the ID stable to avoid React re-renders
+    setVoices({ ...voices, [id]: { ...voices[id], name: newName } });
+  };
+
+  const handleUpdate = (id: string, field: keyof VoiceConfig, value: any) => {
+    setVoices({ ...voices, [id]: { ...voices[id], [field]: value } });
+  };
+
+  const handleExport = () => {
+    const blob = new Blob([JSON.stringify(voices, null, 2)], { type: 'application/json' });
+    const url = URL.createObjectURL(blob);
+    const a = document.createElement('a');
+    a.href = url;
+    a.download = `voices-${Date.now()}.json`;
+    a.click();
+  };
+
+  const handleImport = () => {
+    const input = document.createElement('input');
+    input.type = 'file';
+    input.accept = '.json';
+    input.onchange = (e) => {
+      const file = (e.target as HTMLInputElement).files?.[0];
+      if (file) {
+        file.text().then(text => {
+          const imported = JSON.parse(text);
+          setVoices(imported);
+          saveVoices(imported);
+          onSave(imported);
+        });
+      }
+    };
+    input.click();
+  };
+
+  return (
+    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', background: '#f5e6d3', overflow: 'hidden' }}>
+      <div style={{ padding: '20px 32px', borderBottom: '1px solid #d0c4b0', background: '#f5e6d3', flexShrink: 0 }}>
+        <h2 style={{ margin: '0 0 16px 0', color: '#333', fontSize: 24 }}>Voice Settings</h2>
+        <div style={{ display: 'flex', gap: 8 }}>
+          <button onClick={handleAdd} style={{ padding: '6px 12px', border: '1px solid #ccc', background: '#fffef9', borderRadius: 4, cursor: 'pointer' }}>+ Add</button>
+          <button onClick={handleImport} style={{ padding: '6px 12px', border: '1px solid #ccc', background: '#fffef9', borderRadius: 4, cursor: 'pointer' }}>Import</button>
+          <button onClick={handleExport} style={{ padding: '6px 12px', border: '1px solid #ccc', background: '#fffef9', borderRadius: 4, cursor: 'pointer' }}>Export</button>
+          <button onClick={handleDefault} style={{ padding: '6px 12px', border: '1px solid #ccc', background: '#fffef9', borderRadius: 4, cursor: 'pointer' }}>Use Default</button>
+          <button
+            onClick={handleSave}
+            style={{
+              padding: '6px 12px',
+              border: saveStatus === 'saved' ? '1px solid #27ae60' : '1px solid #666',
+              background: saveStatus === 'saved' ? '#27ae60' : '#333',
+              color: '#fff',
+              borderRadius: 4,
+              cursor: 'pointer',
+              fontWeight: 'bold',
+              transition: 'all 0.3s'
+            }}
+          >
+            {saveStatus === 'saved' ? 'âœ“ Saved!' : 'Save'}
+          </button>
+        </div>
+      </div>
+      <div style={{ flex: 1, overflowY: 'auto', padding: 32, display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(320px, 1fr))', gap: 20, alignContent: 'start', background: '#f5e6d3' }}>
+        {Object.entries(voices).map(([id, voice]) => (
+          <div key={id} style={{ padding: 12, border: '1px solid #d0c4b0', borderRadius: 4, position: 'relative', background: '#fffef9' }}>
+            <button
+              onClick={() => handleDelete(id)}
+              style={{ position: 'absolute', top: 8, right: 8, background: 'none', border: 'none', cursor: 'pointer', fontSize: 16 }}
+              title="Delete"
+            >
+              ğŸ—‘ï¸
+            </button>
+
+            <div style={{ marginBottom: 8 }}>
+              <label style={{ display: 'flex', alignItems: 'center', gap: 8 }}>
+                <input
+                  type="checkbox"
+                  checked={voice.enabled}
+                  onChange={e => handleUpdate(id, 'enabled', e.target.checked)}
+                />
+                <input
+                  type="text"
+                  value={voice.name}
+                  onChange={e => handleRename(id, e.target.value)}
+                  style={{ flex: 1, border: 'none', borderBottom: '1px solid #d0c4b0', fontSize: 14, fontWeight: 'bold', background: 'transparent', padding: '4px 0' }}
+                />
+              </label>
+            </div>
+
+            <div style={{ display: 'flex', gap: 8, marginBottom: 8 }}>
+              <select
+                value={voice.icon}
+                onChange={e => handleUpdate(id, 'icon', e.target.value)}
+                style={{ flex: 1, padding: 4, border: '1px solid #d0c4b0', borderRadius: 4, background: '#fff' }}
+              >
+                {Object.entries(ICONS).map(([name, emoji]) => (
+                  <option key={name} value={name}>{emoji} {name}</option>
+                ))}
+              </select>
+              <select
+                value={voice.color}
+                onChange={e => handleUpdate(id, 'color', e.target.value)}
+                style={{ flex: 1, padding: 4, border: '1px solid #d0c4b0', borderRadius: 4, background: '#fff' }}
+              >
+                {Object.entries(COLORS).map(([name, { hex, label }]) => (
+                  <option key={name} value={name} style={{ color: hex }}>â— {label}</option>
+                ))}
+              </select>
+            </div>
+
+            <textarea
+              value={voice.systemPrompt}
+              onChange={e => handleUpdate(id, 'systemPrompt', e.target.value)}
+              placeholder="Voice prompt..."
+              style={{ width: '100%', minHeight: 100, padding: 8, fontSize: 13, fontFamily: 'monospace', border: '1px solid #d0c4b0', borderRadius: 4, background: '#fff', resize: 'none', boxSizing: 'border-box' }}
+            />
+          </div>
+        ))}
+      </div>
+    </div>
+  );
+}
diff --git a/frontend/src/components/WritingArea.tsx b/frontend/src/components/WritingArea.tsx
index a969dc2..c73127f 100644
--- a/frontend/src/components/WritingArea.tsx
+++ b/frontend/src/components/WritingArea.tsx
@@ -1,17 +1,24 @@
+import { forwardRef } from 'react';
 import BookPage from './BookPage';
-import EditableTextArea from './EditableTextArea';
+import EditableTextArea, { type EditableTextAreaRef } from './EditableTextArea';
 import type { VoiceTrigger } from '../extensions/VoiceHighlight';
 
 interface WritingAreaProps {
   onChange: (text: string) => void;
+  onContentChange?: (html: string) => void;
   triggers: VoiceTrigger[];
   onCursorChange?: (position: number) => void;
+  content?: string;
 }
 
-export default function WritingArea({ onChange, triggers, onCursorChange }: WritingAreaProps) {
+const WritingArea = forwardRef<EditableTextAreaRef, WritingAreaProps>(({ onChange, onContentChange, triggers, onCursorChange, content }, ref) => {
   return (
     <BookPage side="left">
-      <EditableTextArea onChange={onChange} triggers={triggers} onCursorChange={onCursorChange} />
+      <EditableTextArea ref={ref} onChange={onChange} onContentChange={onContentChange} triggers={triggers} onCursorChange={onCursorChange} content={content} />
     </BookPage>
   );
-}
\ No newline at end of file
+});
+
+WritingArea.displayName = 'WritingArea';
+
+export default WritingArea;
\ No newline at end of file
diff --git a/frontend/src/types/voice.ts b/frontend/src/types/voice.ts
new file mode 100644
index 0000000..9f3b872
--- /dev/null
+++ b/frontend/src/types/voice.ts
@@ -0,0 +1,7 @@
+export interface VoiceConfig {
+  name: string;
+  systemPrompt: string;
+  enabled: boolean;
+  icon: string;
+  color: string;
+}
diff --git a/frontend/src/utils/voiceStorage.ts b/frontend/src/utils/voiceStorage.ts
new file mode 100644
index 0000000..8abf40d
--- /dev/null
+++ b/frontend/src/utils/voiceStorage.ts
@@ -0,0 +1,11 @@
+import type { VoiceConfig } from '../types/voice';
+
+const KEY = 'voice-customizations';
+
+export const getVoices = (): Record<string, VoiceConfig> | null =>
+  JSON.parse(localStorage.getItem(KEY) || 'null');
+
+export const saveVoices = (voices: Record<string, VoiceConfig>) =>
+  localStorage.setItem(KEY, JSON.stringify(voices));
+
+export const clearVoices = () => localStorage.removeItem(KEY);
diff --git a/frontend/vite.config.ts b/frontend/vite.config.ts
index b12451a..5014455 100644
--- a/frontend/vite.config.ts
+++ b/frontend/vite.config.ts
@@ -5,4 +5,13 @@ import react from '@vitejs/plugin-react'
 export default defineConfig({
   plugins: [react()],
   base: '/ink-and-memory/',  // Deploy at lexicalmathical.com/ink-and-memory/
+  server: {
+    proxy: {
+      '/ink-and-memory/api': {
+        target: 'http://localhost:8765',
+        changeOrigin: true,
+        rewrite: (path) => path.replace(/^\/ink-and-memory/, '')
+      }
+    }
+  }
 })
