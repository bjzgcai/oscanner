commit 194eadabf052f47285276b3f0e483487d1cfa38b
Author: lexicalmathical <lexicalmathical@gmail.com>
Date:   Sun Nov 2 15:40:48 2025 +0800

    Fix Start Fresh button to create new session/entry
    
    Root cause: Start Fresh was clearing content but keeping same sessionId
    - Old: Saved empty state with SAME sessionId â†’ reloaded same session
    - Result: Appeared empty but was still the same entry
    
    Fix: Create NEW session with new sessionId
    - Generate new sessionId: session_${timestamp}_${random}
    - Clear currentEntryId â†’ forces new calendar entry on save
    - Save new empty session to database
    - Reload â†’ loads the new empty session
    
    Benefits:
    - Each "Start Fresh" creates a genuinely new writing session
    - New calendar entry created on save (not overwriting old one)
    - Console log added: "âœ… Created new session: <id>"
    
    ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
    
    Co-Authored-By: Claude <noreply@anthropic.com>

diff --git a/frontend/src/App.tsx b/frontend/src/App.tsx
index 2caf075..5deb407 100644
--- a/frontend/src/App.tsx
+++ b/frontend/src/App.tsx
@@ -837,22 +837,25 @@ export default function App() {
 
   const confirmStartFresh = useCallback(async () => {
     if (isAuthenticated && engineRef.current) {
-      // For authenticated users: save empty state to database
-      const currentState = engineRef.current.getState();
+      // @@@ For authenticated users: create NEW session with new sessionId
+      const newSessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
       const emptyState = {
         cells: [{ id: Math.random().toString(36).slice(2), type: 'text', content: '' }],
         commentors: [],
         tasks: [],
         weightPath: [],
         overlappedPhrases: [],
-        sessionId: currentState.sessionId
+        sessionId: newSessionId,
+        // @@@ Clear currentEntryId so it creates a NEW calendar entry on save
+        currentEntryId: undefined
       };
 
       try {
         const { saveSession } = await import('./api/voiceApi');
         await saveSession(emptyState.sessionId, emptyState);
+        console.log(`âœ… Created new session: ${newSessionId}`);
       } catch (error) {
-        console.error('Failed to clear session in database:', error);
+        console.error('Failed to create new session in database:', error);
       }
     } else {
       // For guest users: clear localStorage
