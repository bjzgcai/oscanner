*** FILE: frontend/src/components/DeckEditorModal.tsx ***
@@ -0,0 +1,569 @@
+import { useMemo } from 'react';
+import type { Deck, Voice } from '../api/voiceApi';
+import { COLORS, iconMap } from './deckVisuals';
+
+interface Props {
+  deck: Deck;
+  isSystem: boolean;
+  selectedVoiceId: string | null;
+  onSelectVoice: (voiceId: string | null) => void;
+  onClose: () => void;
+  creatingVoiceId: string | null;
+  onAddVoice: (deckId: string) => Promise<void>;
+  onUpdateDeck: (deckId: string, data: Partial<Deck>) => Promise<void>;
+  onUpdateVoice: (voiceId: string, data: Partial<Voice>) => Promise<void>;
+  onToggleVoice: (voiceId: string, currentEnabled: boolean) => Promise<void>;
+  onDeleteVoice: (voiceId: string) => Promise<void>;
+}
+
+export default function DeckEditorModal({
+  deck,
+  isSystem,
+  selectedVoiceId,
+  onSelectVoice,
+  onClose,
+  creatingVoiceId,
+  onAddVoice,
+  onUpdateDeck,
+  onUpdateVoice,
+  onToggleVoice,
+  onDeleteVoice
+}: Props) {
+  const voices = deck.voices || [];
+  const selectedVoice = useMemo(
+    () => voices.find(v => v.id === selectedVoiceId) || null,
+    [voices, selectedVoiceId]
+  );
+
+  return (
+    <div
+      style={{
+        position: 'fixed',
+        top: 0,
+        left: 0,
+        right: 0,
+        bottom: 0,
+        background: 'rgba(0,0,0,0.45)',
+        display: 'flex',
+        alignItems: 'center',
+        justifyContent: 'center',
+        zIndex: 9998,
+        padding: 16,
+        boxSizing: 'border-box'
+      }}
+      onClick={onClose}
+    >
+      <div
+        onClick={(e) => e.stopPropagation()}
+        style={{
+          width: 'min(1200px, 100%)',
+          height: '85vh',
+          maxHeight: '85vh',
+          background: '#f8f0e6',
+          borderRadius: 14,
+          overflow: 'hidden',
+          border: '2px solid #d0c4b0',
+          boxShadow: '0 16px 36px rgba(0,0,0,0.25)',
+          display: 'flex',
+          flexDirection: 'column'
+        }}
+      >
+        <div style={{
+          display: 'flex',
+          justifyContent: 'space-between',
+          alignItems: 'center',
+          padding: '16px 18px',
+          borderBottom: '1px solid #d0c4b0',
+          background: '#fff'
+        }}>
+          <div style={{ fontSize: 18, fontWeight: 700, color: '#2c2c2c', letterSpacing: -0.3 }}>
+            Deck Editor
+          </div>
+          <button
+            onClick={onClose}
+            style={{
+              background: '#f7f3ed',
+              border: '1px solid #d0c4b0',
+              borderRadius: 10,
+              padding: '8px 14px',
+              cursor: 'pointer',
+              fontSize: 13,
+              fontWeight: 600,
+              color: '#2c2c2c',
+              boxShadow: '0 2px 6px rgba(0,0,0,0.08)',
+              transition: 'all 0.15s'
+            }}
+            onMouseEnter={(e) => {
+              e.currentTarget.style.transform = 'translateY(-1px)';
+              e.currentTarget.style.boxShadow = '0 4px 10px rgba(0,0,0,0.12)';
+            }}
+            onMouseLeave={(e) => {
+              e.currentTarget.style.transform = 'translateY(0)';
+              e.currentTarget.style.boxShadow = '0 2px 6px rgba(0,0,0,0.08)';
+            }}
+          >
+            Close
+          </button>
+        </div>
+
+        <div style={{ padding: 16, display: 'flex', flexDirection: 'column', gap: 16, flex: 1, overflow: 'hidden' }}>
+          {/* Deck metadata: name + description left, prompt right */}
+          <div style={{
+            display: 'flex',
+            gap: 12,
+            flexWrap: 'wrap'
+          }}>
+            <div style={{
+              flex: '0 1 360px',
+              minWidth: 260,
+              background: '#fff',
+              border: '2px solid #e0e0e0',
+              borderRadius: 12,
+              padding: 16,
+              boxShadow: '0 2px 6px rgba(0,0,0,0.05)',
+              display: 'flex',
+              flexDirection: 'column',
+              gap: 10,
+              boxSizing: 'border-box'
+            }}>
+              <div style={{
+                fontSize: 11,
+                fontWeight: 600,
+                color: '#666',
+                letterSpacing: 0.5,
+                textTransform: 'uppercase'
+              }}>
+                Deck Name
+              </div>
+              <input
+                key={`${deck.id}-${deck.name}`}
+                type="text"
+                defaultValue={deck.name}
+                disabled={isSystem}
+                onBlur={(e) => {
+                  if (!isSystem && e.target.value !== deck.name) {
+                    onUpdateDeck(deck.id, { name: e.target.value });
+                  }
+                }}
+                style={{
+                  width: '100%',
+                  padding: '10px 12px',
+                  fontSize: 15,
+                  fontWeight: 600,
+                  border: '2px solid #e0e0e0',
+                  borderRadius: 8,
+                  background: isSystem ? '#f5f5f5' : '#fff',
+                  color: '#2c2c2c',
+                  boxSizing: 'border-box'
+                }}
+              />
+              <div style={{
+                fontSize: 11,
+                fontWeight: 600,
+                color: '#666',
+                letterSpacing: 0.5,
+                textTransform: 'uppercase'
+              }}>
+                Deck Description
+              </div>
+              <textarea
+                key={`${deck.id}-desc-${deck.description || ''}`}
+                defaultValue={deck.description || ''}
+                disabled={isSystem}
+                onBlur={(e) => {
+                  if (!isSystem && e.target.value !== (deck.description || '')) {
+                    onUpdateDeck(deck.id, { description: e.target.value });
+                  }
+                }}
+                style={{
+                  width: '100%',
+                  minHeight: 90,
+                  padding: '10px 12px',
+                  fontSize: 13,
+                  fontFamily: 'monospace',
+                  border: '2px solid #e0e0e0',
+                  borderRadius: 8,
+                  background: isSystem ? '#f5f5f5' : '#fff',
+                  resize: 'vertical',
+                  boxSizing: 'border-box',
+                  lineHeight: 1.5
+                }}
+              />
+            </div>
+
+            <div style={{
+              flex: '1 1 320px',
+              minWidth: 260,
+              background: '#fff',
+              border: '2px solid #e0e0e0',
+              borderRadius: 12,
+              padding: 16,
+              boxShadow: '0 2px 6px rgba(0,0,0,0.05)',
+              display: 'flex',
+              flexDirection: 'column',
+              gap: 8,
+              boxSizing: 'border-box'
+            }}>
+              <div style={{
+                fontSize: 11,
+                fontWeight: 600,
+                color: '#666',
+                letterSpacing: 0.5,
+                textTransform: 'uppercase'
+              }}>
+                Deck Prompt (shared)
+              </div>
+              <textarea
+                key={`${deck.id}-prompt-${deck.description || ''}`}
+                defaultValue={deck.description || ''}
+                disabled={isSystem}
+                onBlur={(e) => {
+                  if (!isSystem && e.target.value !== (deck.description || '')) {
+                    onUpdateDeck(deck.id, { description: e.target.value });
+                  }
+                }}
+                style={{
+                  width: '100%',
+                  minHeight: 140,
+                  padding: '10px 12px',
+                  fontSize: 13,
+                  fontFamily: 'monospace',
+                  border: '2px solid #e0e0e0',
+                  borderRadius: 8,
+                  background: isSystem ? '#f5f5f5' : '#fff',
+                  resize: 'vertical',
+                  boxSizing: 'border-box',
+                  lineHeight: 1.6
+                }}
+              />
+            </div>
+          </div>
+
+          <div style={{ height: 1, background: '#dcd4c5', width: '100%' }} />
+
+          <div style={{
+            display: 'flex',
+            gap: 16,
+            alignItems: 'stretch',
+            flexWrap: 'wrap',
+            flex: 1,
+            minHeight: 0
+          }}>
+            {/* Left column: voice list */}
+            <div style={{
+              width: 320,
+              flexShrink: 0,
+              flexGrow: 0,
+              minWidth: 260,
+              maxHeight: '100%',
+              display: 'flex',
+              flexDirection: 'column',
+              gap: 12
+            }}>
+              <div style={{
+                background: '#fff',
+                border: '2px solid #e0e0e0',
+                borderRadius: 10,
+                padding: 14,
+                boxShadow: '0 2px 6px rgba(0,0,0,0.05)',
+                display: 'flex',
+                flexDirection: 'column',
+                gap: 10,
+                flex: 1,
+                minHeight: 200,
+                overflowY: 'auto'
+              }}>
+                <div style={{
+                  display: 'flex',
+                  alignItems: 'center',
+                  justifyContent: 'space-between'
+                }}>
+                  <div style={{
+                    fontSize: 11,
+                    fontWeight: 600,
+                    color: '#666',
+                    letterSpacing: 0.5,
+                    textTransform: 'uppercase'
+                  }}>
+                    Agents
+                  </div>
+                  {!isSystem && (
+                    <button
+                      onClick={() => onAddVoice(deck.id)}
+                      disabled={creatingVoiceId === deck.id}
+                      style={{
+                        border: '1px dashed #4a90e2',
+                        background: 'transparent',
+                        color: '#4a90e2',
+                        padding: '6px 10px',
+                        borderRadius: 6,
+                        cursor: creatingVoiceId === deck.id ? 'not-allowed' : 'pointer',
+                        fontSize: 12
+                      }}
+                    >
+                      {creatingVoiceId === deck.id ? 'Adding…' : '+ Add'}
+                    </button>
+                  )}
+                </div>
+
+                <div style={{ display: 'flex', flexDirection: 'column', gap: 6, overflowY: 'auto' }}>
+                  {voices.length === 0 && (
+                    <div style={{ color: '#999', fontSize: 13, fontStyle: 'italic' }}>
+                      No voices in this deck yet
+                    </div>
+                  )}
+                  {voices.map(voice => {
+                    const VoiceIcon = iconMap[voice.icon as keyof typeof iconMap] || iconMap.brain;
+                    const voiceColor = COLORS[voice.color as keyof typeof COLORS]?.hex || '#4a90e2';
+                    const isSelected = selectedVoiceId === voice.id;
+
+                    return (
+                      <div
+                        key={voice.id}
+                        onClick={() => onSelectVoice(voice.id)}
+                        style={{
+                          display: 'flex',
+                          alignItems: 'center',
+                          gap: 10,
+                          padding: '10px 12px',
+                          borderRadius: 8,
+                          cursor: 'pointer',
+                          border: isSelected ? `2px solid ${voiceColor}` : '2px solid transparent',
+                          background: isSelected ? `${voiceColor}15` : '#fafafa',
+                          transition: 'all 0.15s',
+                          opacity: voice.enabled ? 1 : 0.55
+                        }}
+                      >
+                        <div style={{
+                          width: 32,
+                          height: 32,
+                          borderRadius: 16,
+                          background: voiceColor,
+                          display: 'flex',
+                          alignItems: 'center',
+                          justifyContent: 'center',
+                          color: '#fff',
+                          flexShrink: 0,
+                          boxShadow: '0 2px 6px rgba(0,0,0,0.15)'
+                        }}>
+                          <VoiceIcon size={16} />
+                        </div>
+                        <div style={{
+                          flex: 1,
+                          minWidth: 0,
+                          fontSize: 14,
+                          fontWeight: isSelected ? 700 : 500,
+                          color: '#2c2c2c',
+                          overflow: 'hidden',
+                          textOverflow: 'ellipsis',
+                          whiteSpace: 'nowrap'
+                        }}>
+                          {voice.name}
+                        </div>
+                        <input
+                          type="checkbox"
+                          checked={voice.enabled}
+                          onClick={(e) => e.stopPropagation()}
+                          onChange={() => onToggleVoice(voice.id, voice.enabled)}
+                          disabled={isSystem}
+                          style={{ cursor: 'pointer' }}
+                        />
+                      </div>
+                    );
+                  })}
+                </div>
+              </div>
+            </div>
+
+            {/* Right column: selected voice editor */}
+            <div style={{
+              flex: 1,
+              minWidth: 0,
+              minHeight: 0,
+              display: 'flex',
+              flexDirection: 'column',
+              gap: 12
+            }}>
+              {selectedVoice ? (() => {
+                const voiceColor = COLORS[selectedVoice.color as keyof typeof COLORS]?.hex || '#4a90e2';
+                const VoiceIcon = iconMap[selectedVoice.icon as keyof typeof iconMap] || iconMap.brain;
+
+                return (
+                  <div
+                    key={selectedVoice.id}
+                    style={{
+                      flex: 1,
+                      minHeight: 0,
+                      background: '#fff',
+                      border: `2px solid ${voiceColor}`,
+                      borderRadius: 12,
+                      padding: 18,
+                      boxShadow: `0 4px 10px ${voiceColor}25`,
+                      display: 'flex',
+                      flexDirection: 'column',
+                      gap: 12
+                    }}
+                  >
+                    <div style={{
+                      display: 'flex',
+                      alignItems: 'center',
+                      gap: 12,
+                      flexWrap: 'wrap'
+                    }}>
+                      <div style={{
+                        width: 44,
+                        height: 44,
+                        borderRadius: 22,
+                        background: voiceColor,
+                        display: 'flex',
+                        alignItems: 'center',
+                        justifyContent: 'center',
+                        color: '#fff',
+                        boxShadow: `0 3px 8px ${voiceColor}40`
+                      }}>
+                        <VoiceIcon size={22} />
+                      </div>
+
+                      <input
+                        key={`${selectedVoice.id}-${selectedVoice.name}`}
+                        type="text"
+                        defaultValue={selectedVoice.name}
+                        disabled={isSystem}
+                        onBlur={(e) => {
+                          if (!isSystem && e.target.value !== selectedVoice.name) {
+                            onUpdateVoice(selectedVoice.id, { name: e.target.value });
+                          }
+                        }}
+                        style={{
+                          flex: 1,
+                          minWidth: 140,
+                          border: 'none',
+                          borderBottom: '2px solid #e0e0e0',
+                          fontSize: 18,
+                          fontWeight: 700,
+                          padding: '6px 4px',
+                          outline: 'none',
+                          background: 'transparent'
+                        }}
+                      />
+
+                      <select
+                        value={selectedVoice.icon}
+                        disabled={isSystem}
+                        onChange={(e) => onUpdateVoice(selectedVoice.id, { icon: e.target.value })}
+                        style={{
+                          padding: '8px 10px',
+                          borderRadius: 6,
+                          border: '1px solid #ddd',
+                          background: '#fafafa',
+                          fontSize: 12,
+                          cursor: isSystem ? 'not-allowed' : 'pointer'
+                        }}
+                      >
+                        {Object.keys(iconMap).map((iconName) => (
+                          <option key={iconName} value={iconName}>{iconName}</option>
+                        ))}
+                      </select>
+
+                      <select
+                        value={selectedVoice.color}
+                        disabled={isSystem}
+                        onChange={(e) => onUpdateVoice(selectedVoice.id, { color: e.target.value })}
+                        style={{
+                          padding: '8px 10px',
+                          borderRadius: 6,
+                          border: '1px solid #ddd',
+                          background: '#fafafa',
+                          fontSize: 12,
+                          cursor: isSystem ? 'not-allowed' : 'pointer'
+                        }}
+                      >
+                        {Object.entries(COLORS).map(([colorName, data]) => (
+                          <option key={colorName} value={colorName}>{data.label}</option>
+                        ))}
+                      </select>
+
+                      <label style={{ display: 'flex', alignItems: 'center', gap: 6, fontSize: 12, color: '#333' }}>
+                        <input
+                          type="checkbox"
+                          checked={selectedVoice.enabled}
+                          disabled={isSystem}
+                          onChange={() => onToggleVoice(selectedVoice.id, selectedVoice.enabled)}
+                        />
+                        Enabled
+                      </label>
+
+                      {!isSystem && (
+                        <button
+                          onClick={() => onDeleteVoice(selectedVoice.id)}
+                          style={{
+                            padding: '8px 12px',
+                            background: '#fff',
+                            border: '1px solid #e0e0e0',
+                            borderRadius: 6,
+                            cursor: 'pointer',
+                            fontSize: 12,
+                            color: '#c00'
+                          }}
+                        >
+                          Delete
+                        </button>
+                      )}
+                    </div>
+
+                    <div style={{
+                      fontSize: 11,
+                      fontWeight: 600,
+                      color: '#666',
+                      letterSpacing: 0.5,
+                      textTransform: 'uppercase'
+                    }}>
+                      Agent Prompt
+                    </div>
+                    <textarea
+                      key={`${selectedVoice.id}-${selectedVoice.system_prompt}`}
+                      defaultValue={selectedVoice.system_prompt}
+                      disabled={isSystem}
+                      onBlur={(e) => {
+                        if (!isSystem && e.target.value !== selectedVoice.system_prompt) {
+                          onUpdateVoice(selectedVoice.id, { system_prompt: e.target.value });
+                        }
+                      }}
+                      style={{
+                        flex: 1,
+                        width: '100%',
+                        minHeight: 0,
+                        padding: 12,
+                        fontSize: 13,
+                        fontFamily: 'monospace',
+                        border: '2px solid #e0e0e0',
+                        borderRadius: 8,
+                        background: isSystem ? '#f5f5f5' : '#fff',
+                        resize: 'vertical',
+                        boxSizing: 'border-box',
+                        lineHeight: 1.6
+                      }}
+                    />
+                  </div>
+                );
+              })() : (
+                <div style={{
+                  flex: 1,
+                  background: '#fff',
+                  border: '2px dashed #d0c4b0',
+                  borderRadius: 12,
+                  padding: 40,
+                  color: '#888',
+                  fontSize: 14,
+                  textAlign: 'center'
+                }}>
+                  Select an agent from the list to edit
+                </div>
+              )}
+            </div>
+          </div>
+        </div>
+      </div>
+    </div>
+  );
+}

*** FILE: frontend/src/components/DeckManager.tsx ***
@@ -1,5 +1,4 @@
 import { useMemo, useState, useEffect, useRef } from 'react';
-import { createPortal } from 'react-dom';
 import { useTranslation } from 'react-i18next';
 import {
   listDecks,
@@ -16,36 +15,8 @@ import {
   type Deck,
   type Voice
 } from '../api/voiceApi';
-import {
-  FaBrain, FaHeart, FaQuestion, FaCloud, FaTheaterMasks, FaEye,
-  FaFistRaised, FaLightbulb, FaShieldAlt, FaWind, FaFire, FaCompass,
-  FaChevronDown, FaChevronRight
-} from 'react-icons/fa';
-
-// @@@ Display mappings (text name → visual)
-const COLORS = {
-  'blue': { hex: '#4a90e2', label: 'Blue' },
-  'purple': { hex: '#9b59b6', label: 'Purple' },
-  'pink': { hex: '#e91e63', label: 'Pink' },
-  'green': { hex: '#27ae60', label: 'Green' },
-  'yellow': { hex: '#f39c12', label: 'Yellow' }
-};
-
-// @@@ Icon map with React Icons
-const iconMap = {
-  brain: FaBrain,
-  heart: FaHeart,
-  question: FaQuestion,
-  cloud: FaCloud,
-  masks: FaTheaterMasks,
-  eye: FaEye,
-  fist: FaFistRaised,
-  lightbulb: FaLightbulb,
-  shield: FaShieldAlt,
-  wind: FaWind,
-  fire: FaFire,
-  compass: FaCompass,
-};
+import DeckEditorModal from './DeckEditorModal';
+import { COLORS, iconMap } from './deckVisuals';
 
 interface Props {
   onUpdate?: () => void;
@@ -58,16 +29,14 @@ export default function DeckManager({ onUpdate }: Props) {
   ), []);
   const [decks, setDecks] = useState<Deck[]>([]);
   const [communityDecks, setCommunityDecks] = useState<Deck[]>([]);
-  const [expandedDecks, setExpandedDecks] = useState<Set<string>>(new Set());
   const [loading, setLoading] = useState(true);
   const [error, setError] = useState<string | null>(null);
-  const [editingVoice, setEditingVoice] = useState<string | null>(null);
-  const [editingField, setEditingField] = useState<'name' | 'prompt' | null>(null);
-  const [iconPickerOpen, setIconPickerOpen] = useState<string | null>(null); // @@@ Track which voice's icon+color picker is open
   const [deckIconPickerOpen, setDeckIconPickerOpen] = useState<string | null>(null); // @@@ Track which deck's icon+color picker is open
   const [creatingDeck, setCreatingDeck] = useState(false);
   const [creatingVoice, setCreatingVoice] = useState<string | null>(null);
   const [publishWarning, setPublishWarning] = useState<string | null>(null);
+  const [selectedVoiceByDeck, setSelectedVoiceByDeck] = useState<Record<string, string | null>>({});
+  const [activeDeckId, setActiveDeckId] = useState<string | null>(null);
 
   // @@@ Scroll position preservation
   const scrollContainerRef = useRef<HTMLDivElement>(null);
@@ -77,6 +46,33 @@ export default function DeckManager({ onUpdate }: Props) {
     loadCommunityDecks();
   }, []);
 
+  useEffect(() => {
+    setSelectedVoiceByDeck(prev => {
+      let changed = false;
+      const next = { ...prev };
+
+      decks.forEach((deck) => {
+        const voiceIds = deck.voices?.map(v => v.id) || [];
+        const currentSelection = next[deck.id];
+
+        if (voiceIds.length === 0) {
+          if (currentSelection !== null) {
+            next[deck.id] = null;
+            changed = true;
+          }
+          return;
+        }
+
+        if (!currentSelection || !voiceIds.includes(currentSelection)) {
+          next[deck.id] = voiceIds[0];
+          changed = true;
+        }
+      });
+
+      return changed ? next : prev;
+    });
+  }, [decks]);
+
   async function loadDecks(preserveScroll = false) {
     // @@@ Save scroll position before reload
     const savedScrollTop = preserveScroll && scrollContainerRef.current
@@ -123,15 +119,7 @@ export default function DeckManager({ onUpdate }: Props) {
   }
 
   function toggleDeck(deckId: string) {
-    setExpandedDecks(prev => {
-      const next = new Set(prev);
-      if (next.has(deckId)) {
-        next.delete(deckId);
-      } else {
-        next.add(deckId);
-      }
-      return next;
-    });
+    setActiveDeckId(deckId);
   }
 
   async function handleForkDeck(deckId: string) {
@@ -203,7 +191,6 @@ export default function DeckManager({ onUpdate }: Props) {
     try {
       await updateVoice(voiceId, data);
       await loadDecks(true);
-      setEditingVoice(null);
       onUpdate?.();
     } catch (err: any) {
       alert(`Failed to update voice: ${err.message}`);
@@ -241,7 +228,7 @@ export default function DeckManager({ onUpdate }: Props) {
         color: 'blue'
       });
       await loadDecks(true);
-      setExpandedDecks(prev => new Set([...prev, newDeck.deck_id]));
+      setActiveDeckId(newDeck.deck_id);
       onUpdate?.();
     } catch (err: any) {
       alert(`Failed to create deck: ${err.message}`);
@@ -253,13 +240,14 @@ export default function DeckManager({ onUpdate }: Props) {
   async function handleAddVoice(deckId: string) {
     setCreatingVoice(deckId);
     try {
-      await createVoice({
+      const { voice_id: newVoiceId } = await createVoice({
         deck_id: deckId,
         name: 'New Voice',
         system_prompt: 'You are a helpful assistant.',
         icon: 'brain',
         color: 'blue'
       });
+      setSelectedVoiceByDeck(prev => ({ ...prev, [deckId]: newVoiceId }));
       await loadDecks(true);
       onUpdate?.();
     } catch (err: any) {
@@ -367,6 +355,8 @@ export default function DeckManager({ onUpdate }: Props) {
     );
   }
 
+  const activeDeck = decks.find(d => d.id === activeDeckId) || null;
+
   return (
     <div style={{ flex: 1, display: 'flex', flexDirection: 'column', background: '#f8f0e6', overflow: 'hidden' }}>
       {/* Scrollable Content with embedded header */}
@@ -442,278 +432,108 @@ export default function DeckManager({ onUpdate }: Props) {
             {t('deck.sections.myDecks')}
           </h3>
 
-          {/* User's Decks */}
-          {decks.map(deck => {
-            const isExpanded = expandedDecks.has(deck.id);
-            const isSystem = !!deck.is_system; // @@@ Convert to boolean to prevent React from rendering "0"
-            const Icon = iconMap[deck.icon as keyof typeof iconMap] || FaBrain;
-            const colorHex = COLORS[deck.color as keyof typeof COLORS]?.hex || '#4a90e2';
-            const voiceCount = deck.voice_count || deck.voices?.length || 0;
-            const voiceCountLabel = t('deck.labels.voiceCount', { count: voiceCount });
-
-            return (
-              <div
-                key={deck.id}
-                style={{
-                  background: '#fff',
-                  border: `2px solid ${isSystem ? '#d0c4b0' : colorHex}`,
-                  borderRadius: 12,
-                  overflow: 'hidden',
-                  boxShadow: '0 4px 12px rgba(0,0,0,0.1)',
-                  transition: 'all 0.3s'
-                }}
-              >
-                {/* Deck Header */}
+          <div style={{
+            display: 'grid',
+            gridTemplateColumns: 'repeat(auto-fit, minmax(360px, 1fr))',
+            gap: 14
+          }}>
+            {decks.map(deck => {
+              const isSystem = !!deck.is_system;
+              const Icon = iconMap[deck.icon as keyof typeof iconMap] || iconMap.brain;
+              const colorHex = COLORS[deck.color as keyof typeof COLORS]?.hex || '#4a90e2';
+              const voiceCount = deck.voice_count || deck.voices?.length || 0;
+              const voiceCountLabel = t('deck.labels.voiceCount', { count: voiceCount });
+
+              return (
                 <div
+                  key={deck.id}
                   onClick={() => toggleDeck(deck.id)}
                   style={{
-                    padding: 20,
-                    background: isSystem ? '#f9f9f9' : '#fafafa',
+                    background: '#fff',
+                    border: `2px solid ${isSystem ? '#d0c4b0' : colorHex}`,
+                    borderRadius: 10,
+                    boxShadow: '0 3px 10px rgba(0,0,0,0.08)',
+                    padding: 12,
                     display: 'flex',
-                    alignItems: 'center',
-                    gap: 16,
-                    transition: 'background 0.2s',
-                    cursor: 'pointer'
+                    flexDirection: 'column',
+                    gap: 10,
+                    cursor: 'pointer',
+                    transition: 'transform 0.15s, box-shadow 0.15s'
+                  }}
+                  onMouseEnter={(e) => {
+                    e.currentTarget.style.transform = 'translateY(-1px)';
+                    e.currentTarget.style.boxShadow = '0 6px 14px rgba(0,0,0,0.12)';
+                  }}
+                  onMouseLeave={(e) => {
+                    e.currentTarget.style.transform = 'translateY(0)';
+                    e.currentTarget.style.boxShadow = '0 3px 10px rgba(0,0,0,0.08)';
                   }}
                 >
-                  {/* Expand/Collapse Icon */}
-                  <div
-                    onClick={() => toggleDeck(deck.id)}
-                    style={{ fontSize: 20, color: '#666', cursor: 'pointer' }}
-                  >
-                    {isExpanded ? <FaChevronDown /> : <FaChevronRight />}
-                  </div>
-
-                  {/* Deck Icon with picker */}
-                  <div
-                    style={{ position: 'relative' }}
-                    onClick={(e) => e.stopPropagation()}
-                  >
+                  <div style={{ display: 'flex', gap: 10, alignItems: 'center' }}>
                     <div
-                      data-deck-icon={deck.id}
-                      onClick={(e) => {
-                        e.stopPropagation();
-                        if (!isSystem) {
-                          setDeckIconPickerOpen(deckIconPickerOpen === deck.id ? null : deck.id);
-                        }
-                      }}
-                      style={{
-                        width: 56,
-                        height: 56,
-                        borderRadius: 28,
-                        background: `linear-gradient(135deg, ${colorHex} 0%, ${colorHex}cc 100%)`,
-                        display: 'flex',
-                        alignItems: 'center',
-                        justifyContent: 'center',
-                        color: '#fff',
-                        flexShrink: 0,
-                        boxShadow: `0 3px 8px ${colorHex}40`,
-                        cursor: isSystem ? 'default' : 'pointer',
-                        transition: 'transform 0.2s, box-shadow 0.2s'
-                      }}
-                      onMouseEnter={(e) => {
-                        if (!isSystem) {
-                          e.currentTarget.style.transform = 'scale(1.1)';
-                          e.currentTarget.style.boxShadow = `0 6px 16px ${colorHex}60`;
-                        }
-                      }}
-                      onMouseLeave={(e) => {
-                        if (!isSystem) {
-                          e.currentTarget.style.transform = 'scale(1)';
-                          e.currentTarget.style.boxShadow = `0 3px 8px ${colorHex}40`;
-                        }
-                      }}
-                      title={isSystem ? '' : 'Click to change icon'}
+                      style={{ position: 'relative' }}
+                      onClick={(e) => e.stopPropagation()}
                     >
-                      <Icon size={28} />
-                    </div>
-
-                    {/* Icon Picker Dropdown for Deck - Rendered at top level using portal */}
-                    {deckIconPickerOpen === deck.id && (() => {
-                      const iconBadge = document.querySelector(`[data-deck-icon="${deck.id}"]`) as HTMLElement;
-                      if (!iconBadge) return null;
-                      const rect = iconBadge.getBoundingClientRect();
-
-                      return createPortal(
-                        <>
-                          {/* Transparent overlay to capture clicks outside */}
-                          <div
-                            onClick={() => setDeckIconPickerOpen(null)}
-                            style={{
-                              position: 'fixed',
-                              top: 0,
-                              left: 0,
-                              right: 0,
-                              bottom: 0,
-                              zIndex: 9999
-                            }}
-                          />
-                          {/* Icon & Color picker dropdown */}
-                          <div
-                            style={{
-                              position: 'fixed',
-                              top: rect.bottom + 4,
-                              left: rect.left,
-                              background: '#fff',
-                              border: '2px solid #4a90e2',
-                              borderRadius: 8,
-                              padding: 8,
-                              boxShadow: '0 4px 16px rgba(0,0,0,0.2)',
-                              zIndex: 10000,
-                              minWidth: 180
-                            }}
-                          >
-                            {/* Icons Grid */}
-                            <div style={{
-                              display: 'grid',
-                              gridTemplateColumns: 'repeat(4, 1fr)',
-                              gap: 4,
-                              marginBottom: 8
-                            }}>
-                              {Object.entries(iconMap).map(([iconName, IconComponent]) => {
-                                const isSelected = deck.icon === iconName;
-                                return (
-                                  <div
-                                    key={iconName}
-                                    onClick={(e) => {
-                                      e.stopPropagation();
-                                      handleUpdateDeck(deck.id, { icon: iconName });
-                                    }}
-                                    style={{
-                                      width: 40,
-                                      height: 40,
-                                      borderRadius: 8,
-                                      background: isSelected ? colorHex : '#f0f0f0',
-                                      display: 'flex',
-                                      alignItems: 'center',
-                                      justifyContent: 'center',
-                                      color: isSelected ? '#fff' : '#666',
-                                      cursor: 'pointer',
-                                      transition: 'all 0.2s'
-                                    }}
-                                    onMouseEnter={(e) => {
-                                      if (!isSelected) {
-                                        e.currentTarget.style.background = '#e0e0e0';
-                                        e.currentTarget.style.transform = 'scale(1.1)';
-                                      }
-                                    }}
-                                    onMouseLeave={(e) => {
-                                      if (!isSelected) {
-                                        e.currentTarget.style.background = '#f0f0f0';
-                                        e.currentTarget.style.transform = 'scale(1)';
-                                      }
-                                    }}
-                                    title={iconName}
-                                  >
-                                    <IconComponent size={20} />
-                                  </div>
-                                );
-                              })}
-                            </div>
-
-                            {/* Divider */}
-                            <div style={{
-                              height: 1,
-                              background: '#e0e0e0',
-                              marginBottom: 8
-                            }} />
-
-                            {/* Colors Row */}
-                            <div style={{
-                              display: 'flex',
-                              gap: 6,
-                              justifyContent: 'center'
-                            }}>
-                              {Object.entries(COLORS).map(([colorName, colorData]) => {
-                                const isSelected = deck.color === colorName;
-                                return (
-                                  <div
-                                    key={colorName}
-                                    onClick={(e) => {
-                                      e.stopPropagation();
-                                      handleUpdateDeck(deck.id, { color: colorName });
-                                    }}
-                                    style={{
-                                      width: 28,
-                                      height: 28,
-                                      borderRadius: 14,
-                                      background: colorData.hex,
-                                      cursor: 'pointer',
-                                      border: isSelected ? '3px solid #2c2c2c' : '2px solid #ddd',
-                                      transition: 'all 0.2s',
-                                      boxSizing: 'border-box'
-                                    }}
-                                    onMouseEnter={(e) => {
-                                      if (!isSelected) {
-                                        e.currentTarget.style.transform = 'scale(1.15)';
-                                      }
-                                    }}
-                                    onMouseLeave={(e) => {
-                                      if (!isSelected) {
-                                        e.currentTarget.style.transform = 'scale(1)';
-                                      }
-                                    }}
-                                    title={colorData.label}
-                                  />
-                                );
-                              })}
-                            </div>
-                          </div>
-                        </>,
-                        document.body
-                      );
-                    })()}
-                  </div>
-
-                  {/* Deck Info - Display Only */}
-                  <div style={{ flex: 1, minWidth: 0 }}>
-                    <div style={{
-                      fontSize: 20,
-                      fontWeight: 700,
-                      color: '#2c2c2c',
-                      marginBottom: 4
-                    }}>
-                      {deck.name}
-                      {isSystem && (
-                        <span style={{
-                          marginLeft: 12,
-                          fontSize: 12,
-                          fontWeight: 500,
-                          color: '#888',
-                          background: '#e0e0e0',
-                          padding: '2px 8px',
-                          borderRadius: 4
-                        }}>
-                          {t('deck.labels.system')}
-                        </span>
-                      )}
-                    </div>
-
-                    <div style={{
-                      fontSize: 14,
-                      color: '#666'
-                    }}>
-                      {deck.description || t('deck.labels.noDescription')}
+                      <div
+                        data-deck-icon={deck.id}
+                        onClick={(e) => {
+                          e.stopPropagation();
+                          if (!isSystem) {
+                            setDeckIconPickerOpen(deckIconPickerOpen === deck.id ? null : deck.id);
+                          }
+                        }}
+                        style={{
+                          width: 46,
+                          height: 46,
+                          borderRadius: 23,
+                          background: `linear-gradient(135deg, ${colorHex} 0%, ${colorHex}cc 100%)`,
+                          display: 'flex',
+                          alignItems: 'center',
+                          justifyContent: 'center',
+                          color: '#fff',
+                          flexShrink: 0,
+                          boxShadow: `0 3px 8px ${colorHex}40`,
+                          cursor: isSystem ? 'default' : 'pointer',
+                          transition: 'transform 0.2s, box-shadow 0.2s'
+                        }}
+                      >
+                        <Icon size={22} />
+                      </div>
                     </div>
 
-                    <div style={{
-                      fontSize: 12,
-                      color: '#999',
-                      marginTop: 4
-                    }}>
-                      {voiceCountLabel}
+                    <div style={{ flex: 1, minWidth: 0, display: 'flex', flexDirection: 'column', gap: 2 }}>
+                      <div style={{ display: 'flex', alignItems: 'center', gap: 6, flexWrap: 'wrap' }}>
+                        <div style={{ fontSize: 17, fontWeight: 700, color: '#2c2c2c', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>
+                          {deck.name}
+                        </div>
+                        {isSystem && (
+                          <span style={{
+                            fontSize: 10,
+                            fontWeight: 700,
+                            color: '#777',
+                            background: '#ededed',
+                            padding: '2px 6px',
+                            borderRadius: 6
+                          }}>
+                            System
+                          </span>
+                        )}
+                      </div>
+                      <div style={{ fontSize: 12, color: '#555', lineHeight: 1.4, maxHeight: 36, overflow: 'hidden', textOverflow: 'ellipsis' }}>
+                        {deck.description || t('deck.labels.noDescription')}
+                      </div>
+                      <div style={{ fontSize: 11, color: '#888' }}>{voiceCountLabel}</div>
                     </div>
-                  </div>
 
-                  {/* Actions */}
-                  <div style={{ display: 'flex', alignItems: 'center', gap: 12 }} onClick={(e) => e.stopPropagation()}>
-                    {/* @@@ Deck-level toggle switch */}
                     <div
-                      onClick={() => handleToggleDeck(deck.id, deck.enabled)}
+                      onClick={(e) => {
+                        e.stopPropagation();
+                        handleToggleDeck(deck.id, deck.enabled);
+                      }}
                       style={{
-                        width: 50,
-                        height: 26,
-                        borderRadius: 13,
+                        width: 42,
+                        height: 20,
+                        borderRadius: 10,
                         background: deck.enabled ? colorHex : '#ccc',
                         position: 'relative',
                         cursor: 'pointer',
@@ -724,661 +544,91 @@ export default function DeckManager({ onUpdate }: Props) {
                     >
                       <div style={{
                         position: 'absolute',
-                        top: 3,
-                        left: deck.enabled ? 26 : 3,
-                        width: 20,
-                        height: 20,
-                        borderRadius: 10,
+                        top: 2,
+                        left: deck.enabled ? 22 : 2,
+                        width: 16,
+                        height: 16,
+                        borderRadius: 8,
                         background: '#fff',
                         transition: 'left 0.3s',
                         boxShadow: '0 2px 4px rgba(0,0,0,0.2)'
                       }} />
                     </div>
+                  </div>
 
+                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }} onClick={(e) => e.stopPropagation()}>
                     {isSystem ? (
                       <button
                         onClick={() => handleForkDeck(deck.id)}
                         style={{
-                          padding: '8px 16px',
+                          padding: '6px 10px',
                           background: colorHex,
                           color: '#fff',
                           border: 'none',
                           borderRadius: 6,
                           cursor: 'pointer',
-                          fontSize: 13,
-                          fontWeight: 600,
-                          transition: 'all 0.2s'
-                        }}
-                        onMouseEnter={(e) => {
-                          e.currentTarget.style.transform = 'translateY(-1px)';
-                          e.currentTarget.style.boxShadow = `0 4px 12px ${colorHex}60`;
-                        }}
-                        onMouseLeave={(e) => {
-                          e.currentTarget.style.transform = 'translateY(0)';
-                          e.currentTarget.style.boxShadow = 'none';
+                          fontSize: 12,
+                          fontWeight: 600
                         }}
                       >
-                        Fork to My Collection
+                        Fork
                       </button>
                     ) : (
                       <>
-                        {/* @@@ Show sync button if deck has a parent */}
                         {deck.parent_id && (
                           <button
                             onClick={() => handleSyncDeck(deck.id)}
                             style={{
-                              padding: '8px 16px',
+                              padding: '6px 10px',
                               background: '#81b7d2',
                               color: '#fff',
                               border: 'none',
                               borderRadius: 6,
                               cursor: 'pointer',
-                              fontSize: 13,
-                              fontWeight: 600,
-                              transition: 'all 0.2s'
-                            }}
-                            onMouseEnter={(e) => {
-                              e.currentTarget.style.transform = 'translateY(-1px)';
-                              e.currentTarget.style.boxShadow = '0 4px 12px rgba(129, 183, 210, 0.4)';
-                            }}
-                            onMouseLeave={(e) => {
-                              e.currentTarget.style.transform = 'translateY(0)';
-                              e.currentTarget.style.boxShadow = 'none';
+                              fontSize: 12,
+                              fontWeight: 600
                             }}
                           >
-                            {t('deck.actions.sync')}
+                            Sync
                           </button>
                         )}
-                        {/* @@@ Publish button for user-owned decks */}
                         <button
                           onClick={() => handlePublishClick(deck)}
                           style={{
-                            padding: '8px 16px',
+                            padding: '6px 10px',
                             background: deck.published ? '#f39c7a' : '#b47ed7',
                             color: '#fff',
                             border: 'none',
                             borderRadius: 6,
                             cursor: 'pointer',
-                            fontSize: 13,
-                            fontWeight: 600,
-                            transition: 'all 0.2s'
-                          }}
-                          onMouseEnter={(e) => {
-                            e.currentTarget.style.transform = 'translateY(-1px)';
-                            const color = deck.published ? 'rgba(243, 156, 122, 0.4)' : 'rgba(180, 126, 215, 0.4)';
-                            e.currentTarget.style.boxShadow = `0 4px 12px ${color}`;
-                          }}
-                          onMouseLeave={(e) => {
-                            e.currentTarget.style.transform = 'translateY(0)';
-                            e.currentTarget.style.boxShadow = 'none';
+                            fontSize: 12,
+                            fontWeight: 600
                           }}
                         >
-                          {deck.published ? t('deck.actions.unpublish') : t('deck.actions.publish')}
+                          {deck.published ? 'Unpub' : 'Pub'}
                         </button>
                         <button
                           onClick={() => handleDeleteDeck(deck.id)}
                           style={{
-                            padding: '8px 16px',
+                            padding: '6px 10px',
                             background: '#e8956c',
                             color: '#fff',
                             border: 'none',
                             borderRadius: 6,
                             cursor: 'pointer',
-                            fontSize: 13,
-                            fontWeight: 600,
-                            transition: 'all 0.2s'
-                          }}
-                          onMouseEnter={(e) => {
-                            e.currentTarget.style.transform = 'translateY(-1px)';
-                            e.currentTarget.style.boxShadow = '0 4px 12px rgba(232, 149, 108, 0.4)';
-                          }}
-                          onMouseLeave={(e) => {
-                            e.currentTarget.style.transform = 'translateY(0)';
-                            e.currentTarget.style.boxShadow = 'none';
+                            fontSize: 12,
+                            fontWeight: 600
                           }}
                         >
-                          {t('deck.actions.delete')}
+                          Delete
                         </button>
                       </>
                     )}
                   </div>
                 </div>
-
-                {/* Voices List (Expanded) */}
-                {isExpanded && (
-                  <div style={{ padding: 20, background: '#fafafa' }}>
-                    {/* @@@ Deck Edit Form (only for user-owned decks) */}
-                    {!isSystem && (
-                      <div style={{
-                        background: '#fff',
-                        border: '2px solid #e0e0e0',
-                        borderRadius: 8,
-                        padding: 16,
-                        marginBottom: 16
-                      }}>
-                        <h4 style={{
-                          margin: '0 0 12px 0',
-                          fontSize: 14,
-                          fontWeight: 600,
-                          color: '#666'
-                        }}>
-                          Deck Settings
-                        </h4>
-
-                        {/* Deck Name Field */}
-                        <div style={{ marginBottom: 12 }}>
-                          <label style={{
-                            display: 'block',
-                            fontSize: 12,
-                            fontWeight: 500,
-                            color: '#888',
-                            marginBottom: 4
-                          }}>
-                            Name
-                          </label>
-                          <input
-                            type="text"
-                            defaultValue={deck.name}
-                            onBlur={(e) => {
-                              if (e.target.value !== deck.name) {
-                                handleUpdateDeck(deck.id, { name: e.target.value });
-                              }
-                            }}
-                            onClick={(e) => e.stopPropagation()}
-                            style={{
-                              width: '100%',
-                              padding: '8px 12px',
-                              fontSize: 14,
-                              border: '1px solid #ddd',
-                              borderRadius: 6,
-                              fontFamily: 'inherit',
-                              boxSizing: 'border-box'
-                            }}
-                          />
-                        </div>
-
-                        {/* Deck Description Field */}
-                        <div>
-                          <label style={{
-                            display: 'block',
-                            fontSize: 12,
-                            fontWeight: 500,
-                            color: '#888',
-                            marginBottom: 4
-                          }}>
-                            Description
-                          </label>
-                          <textarea
-                            defaultValue={deck.description || ''}
-                            onBlur={(e) => {
-                              if (e.target.value !== deck.description) {
-                                handleUpdateDeck(deck.id, { description: e.target.value });
-                              }
-                            }}
-                            onClick={(e) => e.stopPropagation()}
-                            style={{
-                              width: '100%',
-                              minHeight: 80,
-                              padding: '8px 12px',
-                              fontSize: 14,
-                              border: '1px solid #ddd',
-                              borderRadius: 6,
-                              fontFamily: 'inherit',
-                              resize: 'vertical',
-                              boxSizing: 'border-box'
-                            }}
-                          />
-                        </div>
-                      </div>
-                    )}
-
-                    {deck.voices && deck.voices.length > 0 && (
-                      <div style={{
-                        display: 'grid',
-                        gridTemplateColumns: 'repeat(auto-fill, minmax(340px, 1fr))',
-                        gap: 16
-                      }}>
-                        {deck.voices.map(voice => {
-                        const VoiceIcon = iconMap[voice.icon as keyof typeof iconMap] || FaBrain;
-                        const voiceColor = COLORS[voice.color as keyof typeof COLORS]?.hex || '#4a90e2';
-                        const isEditing = editingVoice === voice.id;
-
-                        return (
-                          <div
-                            key={voice.id}
-                            style={{
-                              background: '#fff',
-                              border: `2px solid ${voice.enabled ? voiceColor : '#ddd'}`,
-                              borderRadius: 8,
-                              padding: 16,
-                              position: 'relative',
-                              boxShadow: '0 2px 6px rgba(0,0,0,0.08)',
-                              transition: 'all 0.2s',
-                              opacity: voice.enabled ? 1 : 0.6
-                            }}
-                          >
-                            {/* Voice Header */}
-                            <div style={{ display: 'flex', alignItems: 'center', gap: 12, marginBottom: 12 }}>
-                              {/* @@@ Icon badge with picker */}
-                              <div style={{ position: 'relative' }}>
-                                <div
-                                  data-voice-icon={voice.id}
-                                  onClick={() => {
-                                    if (!isSystem) {
-                                      setIconPickerOpen(iconPickerOpen === voice.id ? null : voice.id);
-                                    }
-                                  }}
-                                  style={{
-                                    width: 40,
-                                    height: 40,
-                                    borderRadius: 20,
-                                    background: `linear-gradient(135deg, ${voiceColor} 0%, ${voiceColor}cc 100%)`,
-                                    display: 'flex',
-                                    alignItems: 'center',
-                                    justifyContent: 'center',
-                                    color: '#fff',
-                                    flexShrink: 0,
-                                    cursor: isSystem ? 'default' : 'pointer',
-                                    transition: 'transform 0.2s, box-shadow 0.2s'
-                                  }}
-                                  onMouseEnter={(e) => {
-                                    if (!isSystem) {
-                                      e.currentTarget.style.transform = 'scale(1.1)';
-                                      e.currentTarget.style.boxShadow = '0 4px 12px rgba(0,0,0,0.2)';
-                                    }
-                                  }}
-                                  onMouseLeave={(e) => {
-                                    if (!isSystem) {
-                                      e.currentTarget.style.transform = 'scale(1)';
-                                      e.currentTarget.style.boxShadow = 'none';
-                                    }
-                                  }}
-                                  title={isSystem ? '' : 'Click to change icon'}
-                                >
-                                  <VoiceIcon size={20} />
-                                </div>
-
-                                {/* Icon & Color Picker Dropdown - Rendered at top level using portal */}
-                                {iconPickerOpen === voice.id && (() => {
-                                  const iconBadge = document.querySelector(`[data-voice-icon="${voice.id}"]`) as HTMLElement;
-                                  if (!iconBadge) return null;
-                                  const rect = iconBadge.getBoundingClientRect();
-
-                                  return createPortal(
-                                    <>
-                                      {/* Transparent overlay to capture clicks outside */}
-                                      <div
-                                        onClick={() => setIconPickerOpen(null)}
-                                        style={{
-                                          position: 'fixed',
-                                          top: 0,
-                                          left: 0,
-                                          right: 0,
-                                          bottom: 0,
-                                          zIndex: 9999
-                                        }}
-                                      />
-                                      {/* Icon & Color picker dropdown */}
-                                      <div
-                                        style={{
-                                          position: 'fixed',
-                                          top: rect.bottom + 4,
-                                          left: rect.left,
-                                          background: '#fff',
-                                          border: '2px solid #4a90e2',
-                                          borderRadius: 8,
-                                          padding: 8,
-                                          boxShadow: '0 4px 16px rgba(0,0,0,0.2)',
-                                          zIndex: 10000,
-                                          minWidth: 180
-                                        }}
-                                      >
-                                        {/* Icons Grid */}
-                                        <div style={{
-                                          display: 'grid',
-                                          gridTemplateColumns: 'repeat(4, 1fr)',
-                                          gap: 4,
-                                          marginBottom: 8
-                                        }}>
-                                          {Object.entries(iconMap).map(([iconName, IconComponent]) => {
-                                            const isSelected = voice.icon === iconName;
-                                            return (
-                                              <div
-                                                key={iconName}
-                                                onClick={(e) => {
-                                                  e.stopPropagation();
-                                                  handleUpdateVoice(voice.id, { icon: iconName });
-                                                }}
-                                                style={{
-                                                  width: 40,
-                                                  height: 40,
-                                                  borderRadius: 8,
-                                                  background: isSelected ? voiceColor : '#f0f0f0',
-                                                  display: 'flex',
-                                                  alignItems: 'center',
-                                                  justifyContent: 'center',
-                                                  color: isSelected ? '#fff' : '#666',
-                                                  cursor: 'pointer',
-                                                  transition: 'all 0.2s'
-                                                }}
-                                                onMouseEnter={(e) => {
-                                                  if (!isSelected) {
-                                                    e.currentTarget.style.background = '#e0e0e0';
-                                                    e.currentTarget.style.transform = 'scale(1.1)';
-                                                  }
-                                                }}
-                                                onMouseLeave={(e) => {
-                                                  if (!isSelected) {
-                                                    e.currentTarget.style.background = '#f0f0f0';
-                                                    e.currentTarget.style.transform = 'scale(1)';
-                                                  }
-                                                }}
-                                                title={iconName}
-                                              >
-                                                <IconComponent size={20} />
-                                              </div>
-                                            );
-                                          })}
-                                        </div>
-
-                                        {/* Divider */}
-                                        <div style={{
-                                          height: 1,
-                                          background: '#e0e0e0',
-                                          marginBottom: 8
-                                        }} />
-
-                                        {/* Colors Row */}
-                                        <div style={{
-                                          display: 'flex',
-                                          gap: 6,
-                                          justifyContent: 'center'
-                                        }}>
-                                          {Object.entries(COLORS).map(([colorName, colorData]) => {
-                                            const isSelected = voice.color === colorName;
-                                            return (
-                                              <div
-                                                key={colorName}
-                                                onClick={(e) => {
-                                                  e.stopPropagation();
-                                                  handleUpdateVoice(voice.id, { color: colorName });
-                                                }}
-                                                style={{
-                                                  width: 28,
-                                                  height: 28,
-                                                  borderRadius: 14,
-                                                  background: colorData.hex,
-                                                  cursor: 'pointer',
-                                                  border: isSelected ? '3px solid #2c2c2c' : '2px solid #ddd',
-                                                  transition: 'all 0.2s',
-                                                  boxSizing: 'border-box'
-                                                }}
-                                                onMouseEnter={(e) => {
-                                                  if (!isSelected) {
-                                                    e.currentTarget.style.transform = 'scale(1.15)';
-                                                  }
-                                                }}
-                                                onMouseLeave={(e) => {
-                                                  if (!isSelected) {
-                                                    e.currentTarget.style.transform = 'scale(1)';
-                                                  }
-                                                }}
-                                                title={colorData.label}
-                                              />
-                                            );
-                                          })}
-                                        </div>
-                                      </div>
-                                    </>,
-                                    document.body
-                                  );
-                                })()}
-                              </div>
-
-                              <div style={{ flex: 1, minWidth: 0 }}>
-                                {/* @@@ Inline editing for voice name */}
-                                {!isEditing || editingField !== 'name' ? (
-                                  <div
-                                    onClick={() => {
-                                      if (!isSystem) {
-                                        setEditingVoice(voice.id);
-                                        setEditingField('name');
-                                      }
-                                    }}
-                                    style={{
-                                      fontSize: 16,
-                                      fontWeight: 600,
-                                      color: '#2c2c2c',
-                                      overflow: 'hidden',
-                                      textOverflow: 'ellipsis',
-                                      whiteSpace: 'nowrap',
-                                      cursor: isSystem ? 'default' : 'pointer',
-                                      transition: 'opacity 0.2s'
-                                    }}
-                                    onMouseEnter={(e) => {
-                                      if (!isSystem) e.currentTarget.style.opacity = '0.7';
-                                    }}
-                                    onMouseLeave={(e) => {
-                                      if (!isSystem) e.currentTarget.style.opacity = '1';
-                                    }}
-                                  >
-                                    {voice.name}
-                                  </div>
-                                ) : (
-                                  <input
-                                    autoFocus
-                                    defaultValue={voice.name}
-                                    onBlur={(e) => {
-                                      handleUpdateVoice(voice.id, { name: e.target.value });
-                                      setEditingVoice(null);
-                                      setEditingField(null);
-                                    }}
-                                    onKeyDown={(e) => {
-                                      if (e.key === 'Enter') {
-                                        e.currentTarget.blur();
-                                      } else if (e.key === 'Escape') {
-                                        setEditingVoice(null);
-                                        setEditingField(null);
-                                      }
-                                    }}
-                                    style={{
-                                      width: '100%',
-                                      fontSize: 16,
-                                      fontWeight: 600,
-                                      color: '#2c2c2c',
-                                      padding: '4px 8px',
-                                      border: '2px solid #4a90e2',
-                                      borderRadius: 4,
-                                      background: '#f0f8ff'
-                                    }}
-                                  />
-                                )}
-                              </div>
-
-                              {/* @@@ Voice-level toggle switch */}
-                              <div
-                                onClick={() => handleToggleVoice(voice.id, voice.enabled)}
-                                style={{
-                                  width: 40,
-                                  height: 22,
-                                  borderRadius: 11,
-                                  background: voice.enabled ? voiceColor : '#ccc',
-                                  position: 'relative',
-                                  cursor: 'pointer',
-                                  transition: 'background 0.3s',
-                                  flexShrink: 0
-                                }}
-                                title={voice.enabled ? 'Disable voice' : 'Enable voice'}
-                              >
-                                <div style={{
-                                  position: 'absolute',
-                                  top: 3,
-                                  left: voice.enabled ? 21 : 3,
-                                  width: 16,
-                                  height: 16,
-                                  borderRadius: 8,
-                                  background: '#fff',
-                                  transition: 'left 0.3s',
-                                  boxShadow: '0 2px 4px rgba(0,0,0,0.2)'
-                                }} />
-                              </div>
-
-                              {!isSystem && (
-                                <button
-                                  onClick={() => handleDeleteVoice(voice.id)}
-                                  style={{
-                                    background: 'rgba(255, 255, 255, 0.9)',
-                                    border: '1px solid #ddd',
-                                    borderRadius: 4,
-                                    width: 24,
-                                    height: 24,
-                                    display: 'flex',
-                                    alignItems: 'center',
-                                    justifyContent: 'center',
-                                    cursor: 'pointer',
-                                    fontSize: 12,
-                                    transition: 'all 0.2s'
-                                  }}
-                                  onMouseEnter={(e) => {
-                                    e.currentTarget.style.background = '#fee';
-                                    e.currentTarget.style.borderColor = '#fcc';
-                                  }}
-                                  onMouseLeave={(e) => {
-                                    e.currentTarget.style.background = 'rgba(255, 255, 255, 0.9)';
-                                    e.currentTarget.style.borderColor = '#ddd';
-                                  }}
-                                  title="Delete"
-                                >
-                                  ×
-                                </button>
-                              )}
-                            </div>
-
-                            {/* Voice Prompt with inline editing */}
-                            {!isEditing || editingField !== 'prompt' ? (
-                              <div
-                                onClick={() => {
-                                  if (!isSystem) {
-                                    setEditingVoice(voice.id);
-                                    setEditingField('prompt');
-                                  }
-                                }}
-                                style={{
-                                  fontSize: 12,
-                                  color: '#666',
-                                  lineHeight: 1.6,
-                                  overflow: 'hidden',
-                                  textOverflow: 'ellipsis',
-                                  display: '-webkit-box',
-                                  WebkitLineClamp: 3,
-                                  WebkitBoxOrient: 'vertical',
-                                  cursor: isSystem ? 'default' : 'pointer',
-                                  transition: 'opacity 0.2s'
-                                }}
-                                onMouseEnter={(e) => {
-                                  if (!isSystem) e.currentTarget.style.opacity = '0.7';
-                                }}
-                                onMouseLeave={(e) => {
-                                  if (!isSystem) e.currentTarget.style.opacity = '1';
-                                }}
-                              >
-                                {voice.system_prompt}
-                              </div>
-                            ) : (
-                              <>
-                                <textarea
-                                  autoFocus
-                                  defaultValue={voice.system_prompt}
-                                  onBlur={(e) => {
-                                    handleUpdateVoice(voice.id, { system_prompt: e.target.value });
-                                    setEditingVoice(null);
-                                    setEditingField(null);
-                                  }}
-                                  onKeyDown={(e) => {
-                                    if (e.key === 'Escape') {
-                                      setEditingVoice(null);
-                                      setEditingField(null);
-                                    }
-                                  }}
-                                  style={{
-                                    width: '100%',
-                                    minHeight: '100px',
-                                    fontSize: 12,
-                                    color: '#2c2c2c',
-                                    padding: '8px',
-                                    border: '2px solid #4a90e2',
-                                    borderRadius: 4,
-                                    background: '#f0f8ff',
-                                    fontFamily: 'inherit',
-                                    lineHeight: 1.6,
-                                    resize: 'vertical',
-                                    boxSizing: 'border-box'
-                                  }}
-                                />
-                                <div style={{
-                                  fontSize: 11,
-                                  color: '#999',
-                                  marginTop: 4
-                                }}>
-                                  {voice.system_prompt.length} chars · Press Esc to cancel
-                                </div>
-                              </>
-                            )}
-                          </div>
-                        );
-                        })}
-                      </div>
-                    )}
-
-                    {/* @@@ Add Voice button */}
-                    {!isSystem && (
-                      <button
-                        onClick={() => handleAddVoice(deck.id)}
-                        disabled={creatingVoice === deck.id}
-                        style={{
-                          padding: '8px 16px',
-                          marginTop: '16px',
-                          background: 'transparent',
-                          color: '#4a90e2',
-                          border: '1px dashed #4a90e2',
-                          borderRadius: '4px',
-                          cursor: creatingVoice === deck.id ? 'not-allowed' : 'pointer',
-                          fontSize: '12px',
-                          opacity: creatingVoice === deck.id ? 0.6 : 1,
-                          transition: 'all 0.2s',
-                          alignSelf: 'flex-start'
-                        }}
-                        onMouseEnter={(e) => {
-                          if (creatingVoice !== deck.id) {
-                            e.currentTarget.style.background = '#f0f8ff';
-                          }
-                        }}
-                        onMouseLeave={(e) => {
-                          if (creatingVoice !== deck.id) {
-                            e.currentTarget.style.background = 'transparent';
-                          }
-                        }}
-                      >
-                        {creatingVoice === deck.id ? t('deck.actions.addingVoice') : t('deck.actions.addVoice')}
-                      </button>
-                    )}
-
-                    {/* Empty State */}
-                    {(!deck.voices || deck.voices.length === 0) && (
-                      <div style={{
-                        padding: 32,
-                        textAlign: 'center',
-                        color: '#999',
-                        fontStyle: 'italic'
-                      }}>
-                        No voices in this deck yet
-                      </div>
-                    )}
-                  </div>
-                )}
-              </div>
-            );
-          })}
+              );
+            })}
+          </div>
 
           {/* @@@ Community Decks Section */}
           <hr style={{ margin: '32px 0', border: '1px solid #d0c4b0' }} />
@@ -1405,7 +655,7 @@ export default function DeckManager({ onUpdate }: Props) {
           ) : (
             <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>
               {communityDecks.map(deck => {
-                const Icon = iconMap[deck.icon as keyof typeof iconMap] || FaBrain;
+            const Icon = iconMap[deck.icon as keyof typeof iconMap] || iconMap.brain;
                 const colorHex = COLORS[deck.color as keyof typeof COLORS]?.hex || '#4a90e2';
 
                 return (
@@ -1501,6 +751,23 @@ export default function DeckManager({ onUpdate }: Props) {
         </div>
       </div>
 
+      {/* Deck editor modal */}
+      {activeDeck && (
+        <DeckEditorModal
+          deck={activeDeck}
+          isSystem={!!activeDeck.is_system}
+          selectedVoiceId={selectedVoiceByDeck[activeDeck.id] || activeDeck.voices?.[0]?.id || null}
+          onSelectVoice={(voiceId) => setSelectedVoiceByDeck(prev => ({ ...prev, [activeDeck.id]: voiceId }))}
+          onClose={() => setActiveDeckId(null)}
+          creatingVoiceId={creatingVoice}
+          onAddVoice={handleAddVoice}
+          onUpdateDeck={handleUpdateDeck}
+          onUpdateVoice={handleUpdateVoice}
+          onToggleVoice={handleToggleVoice}
+          onDeleteVoice={handleDeleteVoice}
+        />
+      )}
+
       {/* @@@ Publish Warning Modal */}
       {publishWarning && (
         <div

*** FILE: frontend/src/components/deckVisuals.ts ***
@@ -0,0 +1,27 @@
+import {
+  FaBrain, FaHeart, FaQuestion, FaCloud, FaTheaterMasks, FaEye,
+  FaFistRaised, FaLightbulb, FaShieldAlt, FaWind, FaFire, FaCompass
+} from 'react-icons/fa';
+
+export const COLORS = {
+  'blue': { hex: '#4a90e2', label: 'Blue' },
+  'purple': { hex: '#9b59b6', label: 'Purple' },
+  'pink': { hex: '#e91e63', label: 'Pink' },
+  'green': { hex: '#27ae60', label: 'Green' },
+  'yellow': { hex: '#f39c12', label: 'Yellow' }
+};
+
+export const iconMap = {
+  brain: FaBrain,
+  heart: FaHeart,
+  question: FaQuestion,
+  cloud: FaCloud,
+  masks: FaTheaterMasks,
+  eye: FaEye,
+  fist: FaFistRaised,
+  lightbulb: FaLightbulb,
+  shield: FaShieldAlt,
+  wind: FaWind,
+  fire: FaFire,
+  compass: FaCompass,
+};

